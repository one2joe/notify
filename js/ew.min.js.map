{"version":3,"sources":["dist/js/ew.js"],"names":["ew$1","$$1","luxon","_interopDefaultLegacy","e","default","ew__default","$__default","luxon__default","Validators","__proto__","userLevelId","el","ew","checkInteger","value","language","phrase","parseInt","userLevelName","id","elId","document","getElementById","name","trim","level","sameText","includes","toLowerCase","required","fieldName","_$el$data","$el","$p","closest","data","substr","css","hasValue","replace","fileRequired","elFn","mismatchPassword","startsWith","elPwd","between","x","z","val","passwordStrength","isMaskedPassword","hasClass","username","raw","match","RegExp","escapeRegExChars","INVALID_USERNAME_CHARACTERS","password","ENCRYPTED_PASSWORD","INVALID_PASSWORD_CHARACTERS","email","getValue","checkEmail","emails","cnt","err","checkEmails","datetime","format","checkDate","time","checkTime","float","checkNumber","range","min","max","checkRange","integer","phone","checkPhone","zip","checkZip","creditCard","checkCreditCard","ssn","checkSsn","guid","checkGuid","regex","pattern","checkByRegEx","url","checkUrl","custom","fn","args","captcha","recaptcha","_grecaptcha","grecaptcha","getResponse","dataset","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","o","p","setPrototypeOf","_inheritsLoose","subClass","superClass","create","constructor","_defineProperty","obj","batchSettings","type","contentType","processData","dataType","toJSON","JSON","stringify","parse","batchSetup","options","extend","Batch","batch","func","this","undefined","parent","ajaxSetup","_batch","requests","add","_func$name","call","clear","send","instance","success","parentSuccess","status","xhr","map","request","settings","childSuccess","statusText","_deliver","ajax","_addRequest","push","_responses$error","_responses$error2","responses","error","description","alert","each","response","_request$settings$com","_request$settings$suc","complete","$ajax","FormBase","pageId","$self","_initiated","element","$element","htmlForm","initSearchPanel","modified","emptyRow","multiPage","autoSuggests","lists","formKeyCountName","submitReturnsPromise","disableForm","form","getForm","find","prop","addClass","trigger","elements","filter","enableForm","$elements","removeClass","not","appendHidden","$form","$dp","attr","ar","serializeArray","forEach","appendTo","canSubmit","async","updateTextArea","validate","$dps","dp","j","test","$els","result","evt","Event","originalEvent","isDefaultPrevented","isObject","submit","_e$originalEvent","_e$originalEvent$subm","formAction","submitter","setAttribute","getAttribute","split","method","toUpperCase","body","serialize","fetch","finally","getList","compileTemplates","values","list","template","isString","templates","_this$element","_this$element2","tagName","getElement","getElements","selector","is","eq","get","updateLists","rowindex","immediate","_form$querySelector","isNumber","isUndefined","querySelector","fixId","multiple","t","prefix","endsWith","entries","join","parents","parentFields","slice","lookupOptions","pvalues","getOptionValues","updateOptions","bind","deferreds","batchSize","ajaxBatchSize","b","splice","getApiUrl","API_LOOKUP_ACTION","when","then","source","fail","console","log","always","createAutoSuggest","assign","limit","AUTO_SUGGEST_MAX_ENTRIES","autoSuggestSettings","AutoSuggest","initEditors","ed","active","save","destroyEditor","destroy","onError","msg","initUpload","index","later","AJAX_DELAY","upload","setupFilters","filters","filterList","$sf","toggleClass","$df","$delete","$save","saveFilters","SEARCH_FILTER_OPTION","localStorage","setItem","PROJECT_NAME","$body","currentPage","done","off","on","prompt","input","html","sanitize","prevAll","remove","next","$submenu","Array","isArray","insertBefore","action","append","TOKEN_NAME_KEY","TOKEN_NAME","ANTIFORGERY_TOKEN_KEY","ANTIFORGERY_TOKEN","arguments","one","init","IS_LOGGEDIN","IS_SYS_ADMIN","CURRENT_USER_NAME","_self$filterList$filt","_self$filterList","item","getItem","parseJson","grep","show","hide","hasFormData","text","substring","render","loadjs","ready","setTimeout","$tab","$panel","$container","width","CONFIRM_CANCEL","href","window","location","forms","beforeSend","before","Field","fldvar","validators","invalid","validator","addValidator","_proto","addError","_this$_error","_error","clearErrors","clearValidators","_element","shouldValidate","updateFeedback","resetInvalid","_this$_element","_this$_element$classL","_this$_element$closes","_this$_element$closes2","classList","contains","server","fieldContainerSelector","innerHTML","errorMessage","_this$_element$closes3","feedback","setInvalid","focus","setFocus","canFocus","_el$style","_el$classList","hidden","readonly","disabled","style","display","from","_checkbox","checked","set","_this$_element2","_this$_element2$id","activeElement","Form","_FormBase","_this","tryFocus","addField","fields","getField","addFields","field","apply","addCustomError","getFieldElements","rowIndex","delay","makeVisible","focusDelay","preventScroll","autoFocusPreventScroll","_focused","_this$_error2","getFocusable","autoFocus","detailpage","querySelectorAll","_ew$forms$get","psearch","gotoPageByElement","$pane","validateFields","row","_form$querySelector2","_form$querySelector3","validateRequired","updateSelected","addcnt","keycnt","detailpages","gridinsert","some","insert","startcnt","rowcnt","String","customValidate","frm","_rowIndex2","k","_rowIndex3","_ew$forms$get2","AjaxLookup","elementId","formElement","m","pf","debounce","recordCount","formatResult","opt","isAutoSuggest","jsRenderHelpers","displayValue","generateRequest","page","LANGUAGE_ID","getUserParams","arp","MULTIPLE_OPTION_SEPARATOR","getUrl","query","start","params","URLSearchParams","q","n","rnd","random","toString","prepare","transform","results","totalRecordCount","records","_isAutoSuggest","SelectionListOption","selected","_AjaxLookup","$input","minWidth","maxHeight","highlight","hint","minLength","classNames","forceSelection","forceSelect","lineHeight","paddingY","d","setValue","ta","isOpen","menu","empty","$item","getActiveSelectable","typeahead","close","timer","loadingMore","tpl","suggestion","footer","syncResults","asyncResults","cancel","getSyncResults","Infinity","$menu","$node","$dataset","suggestionHeight","outerHeight","suggestions","rendered","count","h","scrollTop","toggle","loadingMoreTimer","_loadingMoreTimer","$footer","_loadingMoreTimer2","offset","top","getMore","v","findIndex","option","lf","LOOKUP_ALL_DISPLAY_FIELDS","df","df2","df3","df4","every","datasets","_append","Forms","_ew$getForm","_forms","f","ids","keys","Select2Language","errorLoading","inputTooLong","overChars","maximum","inputTooShort","remainingChars","minimum","maximumSelected","noResults","searching","removeAllItems","removeItem","search","Utils$3","select2","amd","require","_defined","Select2ResultsDecorator","decorated","$results","displayMessage","escapeMarkup","hideLoading","$message","message","className","sort","cols","len","$row","last","$option","children","pagination","more","createElement","c","attrs","role","matches","Element","msMatchesSelector","webkitMatchesSelector","_resultId","title","StoreData","Utils$2","ModalResults","container","_container$listeners$","listeners","pop","$highlighted","getHighlightedResults","GetData","_mousedown","$this","ModalSearch","$search","removeAttr","KEYS","$","PRINT_SCREEN","DropdownSearchDecorator","handleSearch","which","TAB","SHIFT","CTRL","ALT","_keyUpPrevented","term","Select2AttachBody","_AttachBody","_attachPositioningHandler","events","handler","_positionDropdown","_resizeDropdown","_detachPositioningHandler","_showDropdown","$dropdownContainer","$dropdownParent","_popper","Popper","createPopper","placement","IS_RTL","modifiers","enabled","_this$_popper2","update","_this$_popper3","ModalAttachBody","_bindContainerResultHandlers","stopPropagation","position","$dropdown","_containerResultsHandlersBound","$modal","_self$$search$","_updateDropdown","currentTarget","_e$originalEvent2","detach","end","oldValue","modal","event","draggable","FilterAttachBody","_hideDropdown","_this$_popper","outerWidth","_dropdownButton$close","contents","clone","selection","_handleClear","$filterDropdown","dropdownButton","reference","DropdownAttachBody","_defined$1","AllowClear$1","Utils$1","FilterAllowClear","_AllowClear","_","isDisabled","$clear","$selection","previousVal","placeholder","unselectData","prevented","Select2MultipleSelectionDecorator","Select2DataAdapterDecorator","_data$element","ResultsList","SingleSelection","MultipleSelection","Placeholder","AllowClear","SelectionSearch","EventRelay","Utils","Translation","SelectData","ArrayData","AjaxData","Tags","Tokenizer","MinimumInputLength","MaximumInputLength","MaximumSelectionLength","Dropdown","DropdownSearch","HidePlaceholder","InfiniteScroll","MinimumResultsForSearch","SelectOnClose","CloseOnSelect","DropdownCSS","TagsSearchHighlight","Defaults","defaults","dataAdapter","Decorate","minimumInputLength","maximumInputLength","maximumSelectionLength","tags","tokenSeparators","tokenizer","resultsAdapter","columns","customOption","iconClass","templateResult","selectOptions","_templateResult","loading","selectOnClose","dropdownAdapter","minimumResultsForSearch","closeOnSelect","dropdownCssClass","dropdown","selectionAdapter","allowClear","translations","dir","currentUrl","URL","$document$1","initIcons","_e$target","tooltipOptions","IS_MOBILE","sanitizeFn","tooltip","_bootstrap$Tooltip$ge","bootstrap","Tooltip","getInstance","initPasswordOptions","_e$target2","pStrength","MIN_PASSWORD_STRENGTH","changeBackground","backgrounds","passwordValidFrom","onPasswordStrengthChanged","strength","percentage","$pst","$pb","pct","valid","setValid","pGenerator","passwordLength","GENERATE_PASSWORD_LENGTH","uppercase","GENERATE_PASSWORD_UPPERCASE","lowercase","GENERATE_PASSWORD_LOWERCASE","numbers","GENERATE_PASSWORD_NUMBER","specialChars","GENERATE_PASSWORD_SPECIALCHARS","onPasswordGenerated","pwd","triggerHandler","PATH_BASE","API_URL","qs","route","encodeURIComponent","sanitizeUrl","searchParams","decodeURIComponent","initExportLinks","_e$target3","fileDownload","preventDefault","initMultiSelectCheckboxes","_e$target4","$cbs","_update","isHtml","Swal","fire","sweetAlertSettings","showConfirmButton","allowOutsideClick","allowEscapeKey","willOpen","showLoading","cache","xhrFields","responseType","textStatus","jqXHR","createObjectURL","Blob","a","getResponseHeader","download","appendChild","click","objectUrl","revokeObjectURL","errorThrown","_Swal$getActions","getActions","showValidationMessage","lazyLoad","_e$target5","LAZY_LOAD","img","LAZY_LOAD_DELAY","src","initLightboxes","_e$target6","USE_COLORBOX","lightboxSettings","current","previous","xhrError","imgError","colorbox","rel","initPdfObjects","_e$target7","EMBED_PDF","PDFObjectOptions","PDFObject","embed","fallbackLink","initTooltips","_e$target8","popover","initForms","_e$target9","isFunction$2","_alert","cb","config","confirmButtonText","customClass","htmlContainer","isConfirmed","_prompt","cfg","_config","showCancelButton","cancelButtonText","inputValidator","toast","toastOptions","Toasts","first","showToast","class","autohide","autoHideSuccessMessage","autoHideSuccessMessageDelay","$f","parentId","change","_batch$send","childFields","els","getId","names","isTextbox","isFilter","$elf","typ","elf","_updateOptions","autoFillTargetFields","autoFill","fo","frmo","$obj","arr","clearOptions","addOpt","newOption","selectOption","_updateSibling","isBoolean","ds","isModalLookup","root","convertToBool","_export","sel","fobj","keySelected","isHiddenTextArea","_el$dataset","modalLookup","_el$dataset2","isHidden","selectAll","clearSelected","tbl","rowIndexes","r","rows","clearDelete","$tr","siblings","addBack","clickDelete","setupTable","force","$tbl","$rows","tBodies","$target","cells","div","parentsUntil","RESPONSIVE_TABLE_CLASS","rowSpan","clientHeight","offsetHeight","attach","$r","setupGrid","grid","$grid","USE_OVERLAY_SCROLLBARS","overlayScrollbars","overlayScrollbarsOptions","htmlDecode","table","getAncestorBy","node","parentNode","_node","nodeType","o1","o2","lookup","getOptionTexts","lo","hasAttribute","removeAll","valueSeparator","sep","isValue","optionHtml","OPTION_HTML_TEMPLATE","_obj$options$","selectedIndex","opts","isAutoSelect","_ajaxStop","lastPageSubmit","executeScript","matchAll","createRange","createContextualFragment","s1","s2","s","addScript","stripScript","reduce","scr","HTMLScriptElement","removeScript","getContent","$content","getOptions","modalDialogHide","$dlg","removeData","showing","reload","dest_array","destEl","v0","pid","post","$tt","trig","Popover","content","wd","getTipElement","copyToClipboard","_source","_source2","str","innerText","left","select","execCommand","removeChild","object_value","parseNumber","showMessage","arg","_arg$target","doc","swal","win","$div","$alert","$heading","w","$toast","Math","floor","Pace","_forms$get","ajaxSend","jqxhr","apiUrl","isApi","allowed","hostname","API_JWT_TOKEN","IS_WINDOWS_AUTHENTICATION","setRequestHeader","API_JWT_AUTHORIZATION_HEADER","FormData","ajaxStart","ajaxStop","ajaxError","DateTime","parseDateTime","fromFormat","locale","numberingSystem","getNumberingSystem","redirect","_ew$vars","newUrl","vars","login","entry","protocol","host","_fixLayoutHeightTimer","functions","Select2Utils","Select2Defaults","createSelect","selectId","processResults","_data$records$length","_data$records","$select","_$$data$$dropdown$fin","createModalLookup","_data$records$length2","_data$records2","_$$data$$dropdown$fin2","createFilter","_data$records$length3","_data$records3","_$$data$$dropdown$fin3","setSessionTimer","timeoutTime","keepAliveTimer","counter","useKeepAlive","SESSION_KEEP_ALIVE_INTERVAL","IS_AUTOLOGIN","keepAlive","API_SESSION_ACTION","token","resetTimer","SESSION_TIMEOUT_COUNTDOWN","SESSION_TIMEOUT","timeout","timerInterval","timerProgressBar","setInterval","getHtmlContainer","sec","timeleft","round","getTimerLeft","textContent","willClose","clearInterval","setTimer","dismiss","DismissReason","TIMEOUT_URL","keepAliveInterval","updateDropdownPosition","prev","searchOperatorChanged","parm","$fld","$fld2","hasY","$cond","hasCond","$and","opr","$opr2","opr2","isBetween","isNullOpr","isNullOpr2","hideOpr2","hideX","hideY","isFunction","setSearchType","searchType","phraseId","applyTemplate","divId","tmplId","classId","exportType","export","_document$getElementB","dlg","_dlg$querySelector","subtmpl","rowspan","childNodes","replaceWith","cloneNode","views","hasTag","jsRenderAttributes","scripts","tmpl","$meta","PDF_STYLESHEET_FILENAME","PROJECT_STYLESHEET_FILENAME","responseText","customexport","filename","param","jQuery","toggleGroup","idx","valueChanged","infix","fld","bool","nelm","oelm","fnelm","setLanguage","submitAction","_window$msg","isPost","isMultiple","_success","_submit","removeSpaces","clearError","jquery","reset","once","MOBILE_DETECT","version","shiftKey","ctrlKey","confirmDelete","selectAllKeys","selectKey","$cb","addGridRow","_bootstrap$Tooltip$ge2","$tpl","$lastrow","suffix","$elkeycnt","attributes","$btn","dispose","after","scrollHeight","deleteGridRow","_bootstrap$Tooltip$ge3","rowidx","keycntname","_delete","$keyact","htmlEncode","sameString","optionsHtml","MAX_OPTION_COUNT","headers","Headers","enable2FA","API_2FA_ACTION","API_2FA_SHOW","_result$error2","imageUrl","showLoaderOnConfirm","isLoading","getConfirmButton","disableInput","getImage","onload","enableInput","getInput","preConfirm","API_2FA_VERIFY","catch","_result$error","disable2FA","API_2FA_RESET","_result$error3","_result$error4","showBackupCodes","showDenyButton","showLoaderOnDeny","denyButtonText","denyButton","disableButtons","API_2FA_BACKUP_CODES","codes","enableButtons","preDeny","getDenyButton","API_2FA_NEW_BACKUP_CODES","addOptionDialogShow","_args$evt","lnk","addOptionDialog","_submitSuccess","_results","objName","API_OBJECT_NAME","re","linkField","dfs","displayFields","ffs","filterFields","pfs","lfv","ff","txt","obj2","ar2","_results2","_results$error","_results3","failureMessage","_fail","btn","API_ADD_ACTION","filterFieldVars","nodeName","modalDialogShow","_args$evt2","_bootstrap$Tooltip$ge4","_args$evt3","_args$evt3$currentTar","_args$evt4","_args$evt4$currentTar","_$dlg$data","modalDialog","size","_caption","$lnk","caption","_button","isNull","_always","handleResult","pathname","_current","view","warningMessage","successMessage","_result$error5","_result$error6","$bd","cf","ct","Modal","_focustrap","__handleFocusin","_handleFocusin","_e$target10","importDialogShow","_args$evt5","_bootstrap$Tooltip$ge5","importDialog","$dropzone","$data","$progress","classname","$msg","hideMessage","showProgress","pc","updateProgress","tcnt","totalCount","file","importProgress","API_PROGRESS_ACTION","API_FILE_TOKEN_NAME","importComplete","fileResults","files","fileResult","scnt","successCount","fcnt","failCount","showLog","failList","ecnt","importFail","importUploadOptions","acceptFileTypes","IMPORT_FILE_ALLOWED_EXTENSIONS","fileupload","API_UPLOAD_ACTION","autoUpload","singleFileUploads","dropZone","messages","maxFileSize","maxNumberOfFiles","minFileSize","SESSION_ID","_data$result","_data$result$files","importfiles","ok","filetoken","API_ACTION_NAME","importFiles","processfail","progressall","loaded","total","uploadProgress","hdr","emailDialogShow","emailDialog","_e$target$querySelect","_$$closest$find$data","MAX_EMAIL_RECIPIENT","exportid","exportWithCharts","showDrillDown","arUrl","pos","spinnerClass","draggableOptions","boundary","$tip","_result$error7","_result$error8","callback","_convert","API_LIST_ACTION","API_VIEW_ACTION","API_DELETE_ACTION","responseJSON","toggleSearchOperator","toggleLayout","_bootstrap$Tooltip$ge6","layout","load","PAGE_LAYOUT","_document$createRange","_document$createRange2","initPage","DECIMAL_SEPARATOR","min_value","max_value","creditcard_string","tempdigit","doubledigit","checkdigit","charAt","email_cnt","arEmails","nid","$ft","$fn","$fa","$fs","$exts","$maxsize","$maxfilecount","$label","label","_confirmDelete","confirm","_downloadTemplate","_uploadTemplate","uploadUrl","API_JQUERY_UPLOAD_ACTION","formData","session","exts","maxsize","maxfilecount","multipart","loadImageFileTypes","loadVideoFileTypes","loadAudioFileTypes","filesContainer","uploadTemplateId","downloadTemplateId","uploadTemplate","downloadTemplate","previewMaxWidth","UPLOAD_THUMBNAIL_WIDTH","previewMaxHeight","UPLOAD_THUMBNAIL_HEIGHT","uploadOptions","MULTIPLE_UPLOAD_SEPARATOR","fid","indexOf","_data$files","l","_data$files2","_data$result2","_data$result2$files","_data$files3","context","getLocaleFromPlatform","NUMBERING_SYSTEM","numeralSystem","delimiters","thousands","GROUPING_SEPARATOR","decimal","Intl","NumberFormat","resolvedOptions","formatDateTime","dt","fromSQL","fromSeconds","Date","fromJSDate","toFormat","parseDate","parseTime","isValid","formatCurrency","CURRENCY_FORMAT","formats","currency","CURRENCY_SYMBOL","formatNumber","NUMBER_FORMAT","formatPercent","PERCENT_FORMAT","_e$target11","$tables","initPanels","renderJsTemplates","adminlte","Treeview","_jQueryInterface","_localStorage$getItem","inputs","IS_SCREEN_SM_MIN","parseFloat","$rpt","mh","USE_JAVASCRIPT_MESSAGE","togglePassword","$i","exportId","exportUrl","now","delete","exportCharts","charts","chart","toBase64Image","chartEngine","streamType","stream","parameters","API_EXPORT_CHART_ACTION","fixLayoutHeight","addEventHandlers","tblVar","fldVar","isPushNotificationSupported","navigator","urlBase64ToUint8Array","base64String","base64","repeat","rawData","atob","outputArray","Uint8Array","charCodeAt","sendSubscriptionToServer","subscription","getKey","contentEncoding","PushManager","supportedContentEncodings","endpoint","btoa","fromCharCode","json","createSubscription","API_PUSH_NOTIFICATION_ACTION","API_PUSH_NOTIFICATION_SUBSCRIBE","serviceWorkerReg","serviceWorker","pushManager","subscribe","userVisibleOnly","applicationServerKey","PUSH_SERVER_PUBLIC_KEY","getSubscription","setSubscription","inst","tip","setContent","subscribeNotification","Notification","permission","_await$getSubscriptio","requestPermission","_document$getElementB2","checkSubscription","unsubscribeNotification","res","unsubscribe","API_PUSH_NOTIFICATION_DELETE","SERVICE_WORKER","register","scope","webpush","pushNotificationDialogShow","pushDialog","successes","acc","cur","failures","inited","latlng","useSingleMap","showAllMarkers","useMarkerClusterer","ext","maps","height","singleMapHeight","singleMapWidth","showMapOnTop","createMap","createBounds","createMarkerClusterer","marker","createMarker","fitBounds","promises","address","geocodingDelay","Promise","resolve","geocode","latitude","longitude","isNaN","createLatLng","all","matchMedia","MobileDetect","userAgent","mobile","MultiPage","formid","formID","pageIndex","maxPageIndex","minPageIndex","pageIndexes","$pages","$collapses","isTab","isCollapse","hideDisabledButton","hideInactivePages","lockTabs","hideTabs","showPagerTop","showPagerBottom","pagerTemplate","_show","_properties","pageShow","gotoPage","$page","gotoPageByIndex","gotoPageByElementId","togglePage","$tabs","google","setCenter","$bodies","$document","debugMode","DEBUG","hash","animate","ewAction","exportSelected","collapse","zIndex","isFinite","isDate","periodic","interval","clearTimeout","rec","_this$data","visible","_this$data2","toNumber","toDate","_ew$vars$tables","_ew$vars$tables$table","_ew$vars$tables$table2","_ew$vars$tables$table3","tables","clientFormatPattern","toJsDate","toJSDate","_getMenuElement","_menu","getParentFromElement","mutationList","mutation","MutationObserver","observe","attributeFilter","attributeOldValue","subtree","_toggle","$currentTarget","treeviewMenu","isText","stopImmediatePropagation","isNil$1","isFunction$1","isNaNNumber$1","isFiniteNumber$1","multiplyByPowerOfTen$1","number","powerOfTenExponent","NaN","numAsString","indexOfE","log10$1","numberThatIsPowerOfTen","LOG10E","toObject$1","entriesResolver","object","escapeRegexString$1","string","memoize$1","cacheKey","powerOf10LookupObject","currentValue","additionalZeros","isPowerOfTen$1","toBase","valueUnit","unitScale","base","scale","toBaseMultiplier","convertUnit","originUnit","targetUnit","valueAsBase","resolvedScale","conversionFactorFromBase","unitScaleDefinition","unit","convert","toBest","exclude","cutOffNumber","best","scaleUnit","absoluteResult","abs","scaleDefinition","stringRepeat$1","createUnitScaleFromLocaleAbbreviations$1","scaleItem","scaleItemIndex","formattedStringToNumber$1","inputString","_a","stringOriginal","stringWithLatinDigits","numericStringWithExtraInfo","numeralSystemMap","numericStringLength","numeralSystemToLatinSystemMap","digit","digitIndex","output","numericStringIndex","char","replaceNumeralSystemWithLatinNumbers","zeroFormat","nullFormat","decimalDelimiterFromLocale","stringWithDotDecimalDelimiter","abbreviationScalingFactor","abbreviations","abbreviationsSortedByLengthDesc","abbreviation","scapedAbbreviationForRegex","regexp","getScalingFactorFromAbbreviations","negativeFactor","numberAsString","locale$1","code","ordinal","merge","newObject","argsLength","isObject$1","isString$1","truncateNumber$1","ceil","getPatternParts","patternMask","isInEscapedPart","currentEscapedWord","parts","escaped","patternIncludes","patternRemoveEscapedText","patternReplace","searchValue","replaceValue","stringIncludes$1","signRule$1","patternWithoutEscapedText","negativeParentheses","forceSign","outputPatternMask","abbreviationRule$1","compactUnit","compact","abbreviationRegExpResult","compactAuto","splitStringInTwoParts$1","separator","indexOfSearchChar","countChars","stringChar","decimalPlacesRule$1","patternPrecisionPart","minimumFractionDigits","maximumFractionDigits","trimmedPatternPrecisionPart","patternPrecisionPartWithoutClosingBracket","precisionSplitted","fractionDigits","optionalDecimalPlacesRule$1","optionalFractionDigits","parsePattern$1","inputPattern","resolvedInputPattern","patternMaskAfterSignRule","signRules","patternMaskAfterAbbreviationRule","abbreviationRules","patternMaskAfterOptionalDecimalPlacesRule","optionalDecimalPlacesRules","outputPatternMaskWithoutEscapedText","decimalPlacesRules","minimumIntegerDigits","patternMaskIntegerPart","minimumIntegerDigitsRule","grouping","patternMaskAfterHandlingNumberPosition","numberPositionRule","patternMaskWithEnsuredSignPosition","addSignPositionIfItDoesNotExists","removeSignIfExists$1","valueAsString","rescaleRoundedValue$1","currentAbbreviationScale","patternRules","newScaledValue","newScaledValueUnit","scaleValueWithAbbreviation$1","forcedAbbreviationUnit","abbreviationsFromLocale","targetPowerOfTenExponent","scaleDefinitionFromLocale","closestPowerOfTenWithAvailableAbbreviation","distanceFromTarget","resolveForcedAbbreviationUnit","scaledValue","localizedUnit","roundNumber$1","precision","roundingFunction","resolvedPrecision","roundedScaledValue","numberToNonExponentialString$1","significand","exponent","exponentAsNumber","integerPartOfSignificand","fractionalPartOfSignificand","numberOfZerosToAdd","formatPositiveExponentResult","significandAsString","negativeExponentAbsoluteValue","outputIntegerPartOfSignificand","outputFractionalPartOfSignificand","firstCharInIntegerPart","formatNegativeExponentResult","numberToFixed$1","finiteNumber","fractionalPartOfValueAsString","targetFractionDigitsAmount","roundedValue","integerPart","fractionalPart","addTrailingZerosInFractionalPart","roundValueAndAddTrailingZeros$1","rounding","resolvedRoundingFunction","replaceDigitsWithNumeralSystem$1","numericString","addOrRemoveLeadingZerosToValue$1","valueIntegerPartWithoutSign","addSignInfoToFullFormattedNumber$1","fullFormattedValueWithoutSign","isValueNegative","isValueZero","splitNumberIntegerAndDecimalParts$1","decimalPart","Number","addThousandsSeparatorToValueIntegerPart$1","valueIntegerPartWithLeadingZerosAndWithoutSign","digitGroupingStyle","thousandsSeparator","restDigitGrouping","groupingSubIteration","shift","applyAbbreviationLocalizedUnitToPatternMask$1","abbreviationLocalizedUnit","hasAbbreviationInPatternMask","numberToFormattedNumber$1","resolvedValue","localizedAbbreviationUnit","scaledValueLocalizedUnit","rescaledValue","rescaledValueLocalizedUnit","scaleAndRoundValue","signedZero","valueAsStringWithoutSign","valueIntegerPartWithLeadingZeros","valueIntegerPartWithThousandsSeparator","numeralSystemFromLocale","integerPartWithNumeralSystem","decimalPartWithNumeralSystem","fullNumberWithNumeralSystem","patternMaskWithNumber","cleanPatternMask","bpsFormatter$1","regexps","unformat","patternWithEscapedBPS","timeFormatter$1","absoluteValue","sign","hours","minutes","seconds","isNegative","timeArray","reverse","decimalSuffixes","binarySuffixes","unformatRegex","concat","bytesDecimalScale","unitIndex","pow","bytesBinaryScale","currencySymbolsMap","EUR","USD","XCD","AUD","INR","BRL","CAD","XAF","CNY","NZD","XPF","GBP","HKD","ILS","JPY","KRW","XOF","MXN","TWD","VND","BUILT_IN_FORMATTERS$1","hasNotScalePercentageSymbolInPattern","scalePercentage","patternWithEscapedPercentage","currencyFromOptions","localizedCurrencySymbol","patternWithEscapedCurrencySymbol","_b","localizedOrdinal","patternWithEscapedOrdinal","scaledValueUnit","patternWithEscapedBytes","exponential","toExponential","patternWithoutExponential","roundHalfAwayFromZero$1","resolveFormatOptions$1","formatOptions","_c","roundingOption","resolveRoundingOption","resolvedLocale","optionsLocale","defaultLocale","resolveOptionsLocale","resolvedFormatters","optionsFormatters","formatters","defaultPattern","nanFormat","nonBreakingSpace","parse$1$1","inputStringWithNormalSpaces","unformatFunctionFromFormatters","formatter","matcher","getUnformatFunctionIfMatch","parse$1","round$1","format$1$1","resolvedPattern","resolvedValueAsNumber","formatFunctionFromFormatters","getFormatFunctionIfMatch","_errorFormat","arg2","arg3","withOptions","baseOptions","optionsFromArguments","unique$1","rtlDirCheck","appendLeftToRightMarkIfIsRTL","isRTL","languagesWith4DigitsGroupingStyle","getAbbreviations","languageTag","digits","intlFormatOptions","notation","useGrouping","compactDisplay","digitOfZero","digitOfOne","digitOfTwo","abbreviationResultForOne","toLocaleString","abbreviationResultForTwo","abbreviationOne","abbreviationTwo","resultIndex","_err","getLocaleFromPlatform$1$1","resolvedLanguageTag","localizedNumber","lookupObject","repeatedChar","digitsAsArray","getNumeralSystemDigits","resolvedDigits","localizedNumberWithoutDigits","groupingDelimiter","fractionDelimiter","getGroupingAndFractionDelimiters","groupingStyle","subIterationIndex","digitOrGroupingDelimiter","getGroupingStyle","shortAbbreviations","_abbreviationsLong","numerable"],"mappings":"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","sourcesContent":["/*!\n * JavaScript for PHPMaker v2022.12.0\n * Copyright (c) e.World Technology Limited. All rights reserved.\n */\n(function (ew$1, $$1, luxon) {\n  'use strict';\n\n  function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\n  var ew__default = /*#__PURE__*/_interopDefaultLegacy(ew$1);\n  var $__default = /*#__PURE__*/_interopDefaultLegacy($$1);\n  var luxon__default = /*#__PURE__*/_interopDefaultLegacy(luxon);\n\n  function MultiPage(formid) {\r\n    var self = this;\r\n    this.$form = null;\r\n    this.formID = formid;\r\n    this.pageIndex = 1;\r\n    this.maxPageIndex = 0;\r\n    this.minPageIndex = 0;\r\n    this.pageIndexes = [];\r\n    this.$pages = null;\r\n    this.$collapses = null;\r\n    this.isTab = false; // Is tabs\r\n\r\n    this.isCollapse = false; // Is collapses (accordion)\r\n\r\n    this.lastPageSubmit = false; // Enable submit button for the last page only\r\n\r\n    this.hideDisabledButton = false; // Hide disabled submit button\r\n\r\n    this.hideInactivePages = false; // Hide inactive pages\r\n\r\n    this.lockTabs = false; // Set inactive tabs as disabled\r\n\r\n    this.hideTabs = false; // Hide all tabs\r\n\r\n    this.showPagerTop = false; // Show pager at top\r\n\r\n    this.showPagerBottom = false; // Show pager at bottom\r\n\r\n    this.pagerTemplate = '<nav><ul class=\"pagination\"><li class=\"page-item previous ew-prev\"><a href=\"#\" class=\"page-link\"><span class=\"icon-prev\"></span> {Prev}</a></li><li class=\"page-item next ew-next\"><a href=\"#\" class=\"page-link\">{Next} <span class=\"icon-next\"></span></a></li></ul></nav>'; // Pager template\r\n    // \"show\" handler (for disabled tabs)\r\n\r\n    var _show = function (e) {\r\n      e.preventDefault();\r\n    }; // Set properties\r\n\r\n    var _properties = [\"lastPageSubmit\", \"hideDisabledButton\", \"hideInactivePages\", \"lockTabs\", \"hideTabs\", \"showPagerTop\", \"showPagerBottom\", \"pagerTemplate\"];\r\n\r\n    this.set = function () {\r\n      if (arguments.length == 1 && $__default[\"default\"].isObject(arguments[0])) {\r\n        var obj = arguments[0];\r\n\r\n        for (var i in obj) {\r\n          var p = i[0].toLowerCase() + i.substr(1); // Camel case\r\n\r\n          if (_properties.includes(p)) this[p] = obj[i];\r\n        }\r\n      }\r\n    }; // DOM loaded\r\n\r\n    this.init = function () {\r\n      var tpl = this.pagerTemplate.replace(/\\{prev\\}/i, ew.language.phrase(\"Prev\")).replace(/\\{next\\}/i, ew.language.phrase(\"Next\"));\r\n\r\n      if (this.isTab) {\r\n        if (this.showPagerTop) this.$pages.closest(\".ew-nav\").before(tpl);\r\n        if (this.showPagerBottom) this.$pages.closest(\".ew-nav\").after(tpl);\r\n        this.$form.find(\".ew-prev\").click(function (e) {\r\n          self.$pages.off(\"show.bs.tab\", _show).filter(\".active\").parent().prev(\":has([data-bs-toggle=tab]:not(.ew-hidden):not(.ew-disabled))\").find(\"[data-bs-toggle=tab]\").toggleClass(\"disabled d-none\", false).click();\r\n          return false;\r\n        });\r\n        this.$form.find(\".ew-next\").click(function (e) {\r\n          self.$pages.off(\"show.bs.tab\", _show).filter(\".active\").parent().next(\":has([data-bs-toggle=tab]:not(.ew-hidden):not(.ew-disabled))\").find(\"[data-bs-toggle=tab]\").toggleClass(\"disabled d-none\", false).click();\r\n          return false;\r\n        });\r\n        if (this.hideTabs) this.$form.find(\".ew-multi-page > .ew-nav > .nav-tabs\").hide();\r\n      } else if (this.isCollapse) {\r\n        if (this.showPagerTop) this.$collapses.closest(\".ew-accordion\").before(tpl);\r\n        if (this.showPagerBottom) this.$collapses.closest(\".ew-accordion\").after(tpl);\r\n        this.$form.find(\".ew-prev\").click(function (e) {\r\n          self.$pages.closest(\".accordion-item\").filter(\":has(.collapse.show)\").prev(\":has([data-bs-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))\").toggleClass(\"disabled d-none\", false).find(\"[data-bs-toggle=collapse]\").click();\r\n          return false;\r\n        });\r\n        this.$form.find(\".ew-next\").click(function (e) {\r\n          self.$pages.closest(\".accordion-item\").filter(\":has(.collapse.show)\").next(\":has([data-bs-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))\").toggleClass(\"disabled d-none\", false).find(\"[data-bs-toggle=collapse]\").click();\r\n          return false;\r\n        });\r\n      }\r\n\r\n      this.pageShow();\r\n    }; // Page show\r\n\r\n    this.pageShow = function () {\r\n      if (this.isTab) {\r\n        if (this.lockTabs) this.$pages.on(\"show.bs.tab\", _show);\r\n        this.$pages.each(function () {\r\n          var $this = $__default[\"default\"](this);\r\n          if (self.hideInactivePages) $this.toggleClass(\"d-none\", !$this.hasClass(\"active\"));\r\n          if (self.lockTabs) $this.toggleClass(\"disabled\", !$this.hasClass(\"active\"));\r\n        });\r\n      } else if (this.isCollapse) {\r\n        this.$pages.closest(\".accordion-item\").each(function () {\r\n          var $this = $__default[\"default\"](this);\r\n          if (self.hideInactivePages) $this.toggleClass(\"d-none\", !$this.find(\".collapse.show\")[0]);\r\n        });\r\n      }\r\n\r\n      var disabled = this.lastPageSubmit && this.pageIndex != this.maxPageIndex;\r\n      var $btn = this.$form.closest(\".content, .modal-content\").find(\"#btn-action, button.ew-submit\").prop(\"disabled\", disabled).toggle(!this.hideDisabledButton || !disabled);\r\n      $__default[\"default\"](\".ew-captcha\").toggle($btn.is(\":visible:not(:disabled)\")); // Re-captcha uses class \"disabled\", not \"disabled\" property.\r\n\r\n      disabled = this.pageIndex <= this.minPageIndex;\r\n      this.$form.find(\".ew-prev\").toggleClass(\"disabled\", disabled);\r\n      disabled = this.pageIndex >= this.maxPageIndex;\r\n      this.$form.find(\".ew-next\").toggleClass(\"disabled\", disabled);\r\n    }; // Go to page by index\r\n\r\n    this.gotoPage = function (i) {\r\n      if (i <= 0 || i < this.minPageIndex || i > this.maxPageIndex) return;\r\n\r\n      if (this.pageIndex != i) {\r\n        var $page = this.$pages.eq(i - 1);\r\n\r\n        if (this.isTab) {\r\n          if ($page.is(\":not(.d-none):not(.disabled)\")) $page.click();else $page.parent().next(\":has([data-bs-toggle=tab]):not(.d-none):not(.disabled)\").find(\"[data-bs-toggle=tab]\").toggleClass(\"disabled\", false).click();\r\n        } else if (this.isCollapse) {\r\n          var $p = $page.closest(\".accordion-item\");\r\n          if ($p.is(\":not(.d-none)\")) $page.click();else $p.next(\":has([data-bs-toggle=collapse]):not(.d-none)\").find(\"[data-bs-toggle=collapse]\").click();\r\n        }\r\n\r\n        this.pageIndex = i;\r\n      }\r\n    };\r\n\r\n    this.gotoPageByIndex = this.gotoPage; // Go to page by element\r\n\r\n    this.gotoPageByElement = function (el) {\r\n      this.gotoPage(parseInt($__default[\"default\"](el).data(\"page\"), 10) || -1);\r\n    }; // Go to page by element's id or name or data-field attribute\r\n\r\n    this.gotoPageByElementId = function (id) {\r\n      var $el = this.$form.find(\"[data-page]\").filter(\"[id='\" + id + \"'],[name='\" + id + \"'],[data-field='\" + id + \"']\");\r\n      this.gotoPageByElement($el);\r\n    }; // Toggle page\r\n\r\n    this.togglePage = function (i, show) {\r\n      if (this.isTab) {\r\n        this.$pages.eq(i - 1).toggleClass(\"d-none\", !show);\r\n      } else if (this.isCollapse) {\r\n        this.$pages.eq(i - 1).closest(\".accordion-item\").toggle(\"d-none\", !show);\r\n      }\r\n    }; // Render\r\n\r\n    this.render = function () {\r\n      this.$form = $__default[\"default\"](\"#\" + formid);\r\n      this.pageIndexes = this.$form.find(\"[data-page]\").map(function () {\r\n        var index = parseInt(this.dataset.page, 10);\r\n        return index > 0 ? index : null;\r\n      }).get();\r\n      this.pageIndexes.sort(function (a, b) {\r\n        return a - b;\r\n      });\r\n      this.minPageIndex = this.pageIndexes[0];\r\n      this.maxPageIndex = this.pageIndexes[this.pageIndexes.length - 1];\r\n      var $tabs = this.$form.find(\"[data-bs-toggle=tab]\");\r\n\r\n      if ($tabs[0]) {\r\n        this.$pages = $tabs;\r\n        this.isTab = true;\r\n        $tabs.on(\"shown.bs.tab\", function (e) {\r\n          self.pageIndex = $tabs.index(e.target) + 1;\r\n          self.pageShow();\r\n          $__default[\"default\"]($__default[\"default\"](this).attr(\"href\")).find(\".ew-map\").each(function () {\r\n            var m = ew.maps[this.id];\r\n\r\n            if (m != null && m[\"map\"]) {\r\n              google.maps.event.trigger(m[\"map\"], \"resize\");\r\n              m[\"map\"].setCenter(m[\"latlng\"]);\r\n            }\r\n          });\r\n        });\r\n        this.pageIndex = $tabs.index($tabs.parent(\".active\")) + 1;\r\n      } else {\r\n        this.$collapses = this.$form.find(\"[data-bs-toggle=collapse]\");\r\n\r\n        if (this.$collapses[0]) {\r\n          this.$pages = this.$collapses;\r\n          this.isCollapse = true;\r\n          var $bodies = this.$collapses;\r\n          $bodies.on(\"shown.bs.collapse\", function (e) {\r\n            self.pageIndex = $bodies.index(e.target) + 1;\r\n            self.pageShow();\r\n            $__default[\"default\"](this).find(\".ew-map\").each(function () {\r\n              var m = ew.maps[this.id];\r\n\r\n              if (m != null && m[\"map\"]) {\r\n                google.maps.event.trigger(m[\"map\"], \"resize\");\r\n                m[\"map\"].setCenter(m[\"latlng\"]);\r\n              }\r\n            });\r\n          });\r\n          this.pageIndex = $bodies.index($bodies.hasClass(\"show\")) + 1;\r\n        }\r\n      }\r\n\r\n      $__default[\"default\"](function () {\r\n        self.init();\r\n      });\r\n    };\r\n  }\n\n  /**\r\n   * User level ID validator\r\n   */\r\n\r\n  function userLevelId(el) {\r\n    if (el && !ew.checkInteger(el.value)) return {\r\n      userLevelId: ew.language.phrase(\"UserLevelIDInteger\")\r\n    };\r\n    var level = parseInt(el.value, 10);\r\n    if (level < 1) return {\r\n      userLevelId: ew.language.phrase(\"UserLevelIDIncorrect\")\r\n    };\r\n    return false;\r\n  }\r\n  /**\r\n   * User level name validator\r\n   * @param {string} id User ID Field input element ID\r\n   */\r\n\r\n  function userLevelName(id) {\r\n    return function (el) {\r\n      let elId = document.getElementById(\"x_\" + id);\r\n\r\n      if (elId && el) {\r\n        let name = el.value.trim(),\r\n            level = parseInt(elId.value.trim(), 10);\r\n\r\n        if (level === 0 && !ew.sameText(name, \"Default\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelDefaultName\")\r\n          };\r\n        } else if (level === -1 && !ew.sameText(name, \"Administrator\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelAdministratorName\")\r\n          };\r\n        } else if (level === -2 && !ew.sameText(name, \"Anonymous\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelAnonymousName\")\r\n          };\r\n        } else if (level > 0 && [\"anonymous\", \"administrator\", \"default\"].includes(name.toLowerCase())) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelNameIncorrect\")\r\n          };\r\n        }\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Required validator\r\n   */\r\n\r\n  function required(fieldName) {\r\n    return function (el) {\r\n      var _$el$data;\r\n\r\n      let $el = $__default[\"default\"](el),\r\n          $p = $el.closest(\"#r_\" + ((_$el$data = $el.data(\"field\")) == null ? void 0 : _$el$data.substr(2))); // Find the row\r\n\r\n      if (!$p[0]) $p = $el.closest(\"[id^=el]\"); // Find the span\r\n\r\n      if ($p.css(\"display\") == \"none\") {\r\n        // Hidden by .visible()\r\n        return false;\r\n      }\r\n\r\n      if (el && !ew.hasValue(el)) {\r\n        return {\r\n          required: ew.language.phrase(\"EnterRequiredField\").replace(\"%s\", fieldName)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * File required validator\r\n   */\r\n\r\n  function fileRequired(fieldName) {\r\n    return function (el) {\r\n      let elFn = document.getElementById(\"fn_\" + el.id);\r\n\r\n      if (elFn && !ew.hasValue(elFn)) {\r\n        return {\r\n          fileRequired: ew.language.phrase(\"EnterRequiredField\").replace(\"%s\", fieldName)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Mismatch password validator\r\n   */\r\n\r\n  function mismatchPassword(el) {\r\n    let id;\r\n    if (el.id.startsWith(\"c_\")) // Confirm Password field in Register page\r\n      id = el.id.replace(/^c_/, \"x_\");else if (el.id == \"cpwd\") // Change Password page\r\n      id = \"npwd\";\r\n    let elPwd = document.getElementById(id);\r\n\r\n    if (el.value !== elPwd.value) {\r\n      return {\r\n        mismatchPassword: ew.language.phrase(\"MismatchPassword\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Between validator\r\n   */\r\n\r\n  function between(el) {\r\n    let x, z;\r\n\r\n    if (el.id.startsWith(\"y_\")) {\r\n      x = document.getElementById(el.id.replace(/^y_/, \"x_\"));\r\n      z = document.getElementById(el.id.replace(/^y_/, \"z_\"));\r\n    }\r\n\r\n    if (ew.hasValue(x) && $__default[\"default\"](z).val() == \"BETWEEN\" && !ew.hasValue(el)) {\r\n      return {\r\n        between: ew.language.phrase(\"EnterValue2\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Password strength validator\r\n   */\r\n\r\n  function passwordStrength(el) {\r\n    let $el = $__default[\"default\"](el);\r\n\r\n    if (!ew.isMaskedPassword(el) && $el.hasClass(\"ew-password-strength\") && !$el.data(\"validated\")) {\r\n      return {\r\n        passwordStrength: ew.language.phrase(\"PasswordTooSimple\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * User name validator\r\n   */\r\n\r\n  function username(raw) {\r\n    return function (el) {\r\n      if (!raw && el.value.match(new RegExp('[' + ew.escapeRegExChars(ew.INVALID_USERNAME_CHARACTERS) + ']'))) return {\r\n        username: ew.language.phrase(\"InvalidUsernameChars\")\r\n      };\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Password validator\r\n   */\r\n\r\n  function password(raw) {\r\n    return function (el) {\r\n      if (!raw && !ew.ENCRYPTED_PASSWORD && el.value.match(new RegExp('[' + ew.escapeRegExChars(ew.INVALID_PASSWORD_CHARACTERS) + ']'))) return {\r\n        password: ew.language.phrase(\"InvalidPasswordChars\")\r\n      };\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Email validator\r\n   */\r\n\r\n  function email(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkEmail(value)) {\r\n      return {\r\n        email: ew.language.phrase(\"IncorrectEmail\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Emails validator\r\n   */\r\n\r\n  function emails(cnt, err) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n\r\n      if (!ew.checkEmails(value, cnt)) {\r\n        return {\r\n          email: err\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * DateTime validator\r\n   * @param {string} format DateTime format\r\n   */\r\n\r\n  function datetime(format) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n\r\n      if (!ew.checkDate(value, format)) {\r\n        return {\r\n          datetime: ew.language.phrase(\"IncorrectDate\").replace(/%s/g, format)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Time validator\r\n   * @param {string} format Time format\r\n   */\r\n\r\n  function time(format) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n\r\n      if (!ew.checkTime(value, format)) {\r\n        return {\r\n          time: ew.language.phrase(\"IncorrectTime\").replace(/%s/g, format)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Float validator\r\n   */\r\n\r\n  function float(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkNumber(value)) {\r\n      return {\r\n        time: ew.language.phrase(\"IncorrectFloat\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Range validator\r\n   * @param {number} min Min value\r\n   * @param {number} max Max value\r\n   */\r\n\r\n  function range(min, max) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n\r\n      if (!ew.checkRange(value, min, max)) {\r\n        return {\r\n          range: ew.language.phrase(\"IncorrectRange\").replace(\"%1\", min).replace(\"%2\", max)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Integer validator\r\n   */\r\n\r\n  function integer(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkInteger(value)) {\r\n      return {\r\n        integer: ew.language.phrase(\"IncorrectInteger\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * US phone validator\r\n   */\r\n\r\n  function phone(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkPhone(value)) {\r\n      return {\r\n        phone: ew.language.phrase(\"IncorrectPhone\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * US ZIP validator\r\n   */\r\n\r\n  function zip(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkZip(value)) {\r\n      return {\r\n        zip: ew.language.phrase(\"IncorrectZip\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Credit card validator\r\n   */\r\n\r\n  function creditCard(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkCreditCard(value)) {\r\n      return {\r\n        creditCard: ew.language.phrase(\"IncorrectCreditCard\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * US SSN validator\r\n   */\r\n\r\n  function ssn(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkSsn(value)) {\r\n      return {\r\n        ssn: ew.language.phrase(\"IncorrectSSN\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * GUID validator\r\n   */\r\n\r\n  function guid(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkGuid(value)) {\r\n      return {\r\n        guid: ew.language.phrase(\"IncorrectGUID\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Regular expression validator\r\n   * @param {string} pattern Regular expression pattern\r\n   */\r\n\r\n  function regex(pattern) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n\r\n      if (!ew.checkByRegEx(value, pattern)) {\r\n        return {\r\n          regex: ew.language.phrase(\"IncorrectField\")\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * URL validator\r\n   */\r\n\r\n  function url(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkUrl(value)) {\r\n      return {\r\n        url: ew.language.phrase(\"IncorrectUrl\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n    * Custom validator\r\n    * @param {*} fn Function(value, ...args)\r\n    * @param  {...any} args Additional arguments for the function\r\n    */\r\n\r\n  function custom(fn, ...args) {\r\n    return function (el) {\r\n      if (typeof fn == \"function\") {\r\n        let value = ew.getValue(el);\r\n        if (fn(value, ...args)) return {\r\n          custom: ew.language.phrase(\"IncorrectField\")\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Captcha validator\r\n   */\r\n\r\n  function captcha(el) {\r\n    if (el && !ew.hasValue(el)) {\r\n      return {\r\n        captcha: ew.language.phrase(\"EnterValidateCode\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * reCaptcha validator\r\n   * @param {number} id reCaptcha ID\r\n   */\r\n\r\n  function recaptcha(el) {\r\n    var _grecaptcha;\r\n\r\n    if (el && !ew.hasValue(el) && ((_grecaptcha = grecaptcha) == null ? void 0 : _grecaptcha.getResponse(el.dataset.id)) === \"\") {\r\n      return {\r\n        recaptcha: ew.language.phrase(\"ClickReCaptcha\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\n\n  var Validators = {\n    __proto__: null,\n    userLevelId: userLevelId,\n    userLevelName: userLevelName,\n    required: required,\n    fileRequired: fileRequired,\n    mismatchPassword: mismatchPassword,\n    between: between,\n    passwordStrength: passwordStrength,\n    username: username,\n    password: password,\n    email: email,\n    emails: emails,\n    datetime: datetime,\n    time: time,\n    float: float,\n    range: range,\n    integer: integer,\n    phone: phone,\n    zip: zip,\n    creditCard: creditCard,\n    ssn: ssn,\n    guid: guid,\n    regex: regex,\n    url: url,\n    custom: custom,\n    captcha: captcha,\n    recaptcha: recaptcha\n  };\n\n  function _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n      var descriptor = props[i];\r\n      descriptor.enumerable = descriptor.enumerable || false;\r\n      descriptor.configurable = true;\r\n      if (\"value\" in descriptor) descriptor.writable = true;\r\n      Object.defineProperty(target, descriptor.key, descriptor);\r\n    }\r\n  }\r\n\r\n  function _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\r\n    if (staticProps) _defineProperties(Constructor, staticProps);\r\n    return Constructor;\r\n  }\n\n  function _assertThisInitialized(self) {\r\n    if (self === void 0) {\r\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\r\n    }\r\n\r\n    return self;\r\n  }\n\n  function _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\r\n      o.__proto__ = p;\r\n      return o;\r\n    };\r\n\r\n    return _setPrototypeOf(o, p);\r\n  }\n\n  function _inheritsLoose(subClass, superClass) {\r\n    subClass.prototype = Object.create(superClass.prototype);\r\n    subClass.prototype.constructor = subClass;\r\n    _setPrototypeOf(subClass, superClass);\r\n  }\n\n  function _defineProperty(obj, key, value) {\r\n    if (key in obj) {\r\n      Object.defineProperty(obj, key, {\r\n        value: value,\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true\r\n      });\r\n    } else {\r\n      obj[key] = value;\r\n    }\r\n\r\n    return obj;\r\n  }\n\n  /*\r\n   * Based on: jquery.batch v0.1.0\r\n   * Copyright 2013, Matt Morgan (@mlmorg)\r\n   * MIT license\r\n   */\r\n  // Global batch settings\r\n\r\n  $__default[\"default\"].batchSettings = {\r\n    type: 'POST',\r\n    contentType: 'application/json',\r\n    processData: false,\r\n    dataType: 'json',\r\n    toJSON: JSON.stringify,\r\n    parse: data => data\r\n  }; // Setup method\r\n\r\n  $__default[\"default\"].batchSetup = function (options) {\r\n    return $__default[\"default\"].extend($__default[\"default\"].batchSettings, options);\r\n  }; // $.batch class\r\n  // -------------\r\n\r\n  var Batch = $__default[\"default\"].batch = function (func, options) {\r\n    // Always instantiate a Batch class even if called without \"new\"\r\n    if (!(this instanceof Batch)) {\r\n      return new Batch(func, options);\r\n    } // Shift arguments if func is an object\r\n\r\n    if (typeof func === 'object') {\r\n      options = func;\r\n      func = undefined;\r\n    } // Default options\r\n\r\n    this.options = $__default[\"default\"].extend({}, $__default[\"default\"].batchSettings, options); // Find a parent batch object, if we're nested\r\n\r\n    this.parent = $__default[\"default\"].ajaxSetup()._batch; // Requests storage\r\n\r\n    this.requests = []; // Add any requests\r\n\r\n    if (func) {\r\n      this.add(func);\r\n    }\r\n\r\n    return this;\r\n  }; // Our methods\r\n\r\n  $__default[\"default\"].extend(Batch.prototype, {\r\n    // Method for adding requests to the batch\r\n    add: function (func) {\r\n      var _func$name;\r\n\r\n      // Set global _batch variable in jQuery.ajaxSettings\r\n      $__default[\"default\"].ajaxSetup({\r\n        _batch: this.parent || this\r\n      }); // Call the user's function\r\n\r\n      if ((_func$name = func.name) != null && _func$name.startsWith('bound ')) {\r\n        // Bound function\r\n        func();\r\n      } else {\r\n        func.call($__default[\"default\"].ajaxSetup()._batch);\r\n      } // Remove the global _batch variable when we're not nested\r\n\r\n      if (!this.parent) {\r\n        $__default[\"default\"].ajaxSetup({\r\n          _batch: null\r\n        });\r\n      }\r\n\r\n      return this;\r\n    },\r\n    // Clear requests storage\r\n    clear: function () {\r\n      this.requests = [];\r\n    },\r\n    // Method for running the batch request\r\n    send: function (options) {\r\n      options = options || {};\r\n      var instance = this; // When we're handling a child batch object, wrap any success functions\r\n      // and add them to the parent batch success\r\n\r\n      if (this.parent && options.success) {\r\n        var parentSuccess = this.parent.options.success;\r\n\r\n        this.parent.options.success = function (data, status, xhr) {\r\n          options.success(data, status, xhr);\r\n\r\n          if (parentSuccess) {\r\n            parentSuccess(data, status, xhr);\r\n          }\r\n        };\r\n      } // When we're handling the top-most batch, send the request\r\n      else if (this.requests.length) {\r\n        // Map an array of requests\r\n        var requests = $__default[\"default\"].map(this.requests, function (request) {\r\n          return request.settings.data;\r\n        }); // Override the success callback\r\n\r\n        var success = options.success;\r\n        var childSuccess = this.options.success;\r\n\r\n        options.success = function (data, statusText, xhr) {\r\n          // Call our _deliver method to handle each individual batch request response\r\n          instance._deliver.call(instance, data, statusText); // Child batch success functions\r\n\r\n          if (childSuccess) {\r\n            childSuccess(data, statusText, xhr);\r\n          } // User's success function\r\n\r\n          if (success) {\r\n            success(data, statusText, xhr);\r\n          }\r\n        }; // Build the Ajax request options\r\n\r\n        options = $__default[\"default\"].extend({}, this.options, options); // Create hash of requests to pass as the data in the Ajax request\r\n\r\n        if (!options.data) {\r\n          options.data = $__default[\"default\"].batchSettings.toJSON(requests);\r\n        } // Call the request\r\n\r\n        return $__default[\"default\"].ajax(options);\r\n      }\r\n    },\r\n    // Private method to add a request to the batch requests array\r\n    _addRequest: function (xhr, settings) {\r\n      this.requests.push({\r\n        xhr: xhr,\r\n        settings: settings\r\n      });\r\n    },\r\n    // Delivers each batch request response to its intended xhr success/complete function\r\n    _deliver: function (data, statusText) {\r\n      var _responses$error;\r\n\r\n      var instance = this; // Pass the response off to the user to parse out the responses\r\n\r\n      var responses = $__default[\"default\"].batchSettings.parse(data);\r\n\r\n      if (responses != null && (_responses$error = responses.error) != null && _responses$error.description) {\r\n        var _responses$error2;\r\n\r\n        ew__default[\"default\"].alert(responses == null ? void 0 : (_responses$error2 = responses.error) == null ? void 0 : _responses$error2.description);\r\n        return;\r\n      } // Loop through the responses\r\n\r\n      $__default[\"default\"].each(responses, function (i, response) {\r\n        var _request$settings$com;\r\n\r\n        // Only work with batch requests that we have stored\r\n        if (!instance.requests[i]) {\r\n          return;\r\n        } // Grab the stored request data\r\n\r\n        var request = instance.requests[i]; // Build statusText a la jQuery based on status code\r\n\r\n        request.xhr.statusText = statusText; // Call the user/success function, if it exists. Pass the response body, status text and xhr.\r\n\r\n        if (statusText === 'success') {\r\n          var _request$settings$suc;\r\n\r\n          (_request$settings$suc = request.settings.success) == null ? void 0 : _request$settings$suc.call(request.xhr, response, statusText);\r\n        } // Call complete\r\n\r\n        (_request$settings$com = request.settings.complete) == null ? void 0 : _request$settings$com.call(request.xhr, statusText);\r\n      });\r\n    }\r\n  });\r\n  // ---------------\r\n  // Override jQuery.ajax to cancel any outgoing requests called within\r\n  // a $.batch() function and add them to the batch requests array for\r\n  // that batch instance\r\n\r\n  var $ajax = $__default[\"default\"].ajax;\r\n\r\n  $__default[\"default\"].ajax = function (url, options) {\r\n    // Shift arguments when options are passed as first argument\r\n    if (typeof url === 'object') {\r\n      options = url;\r\n      url = undefined;\r\n    } // Set options object\r\n\r\n    options = options || {}; // Override the jQuery beforeSend method\r\n\r\n    var beforeSend = options.beforeSend;\r\n\r\n    options.beforeSend = function (xhr, settings) {\r\n      // Call the user's beforeSend function, if passed\r\n      if (beforeSend) {\r\n        var before = beforeSend(xhr, settings); // Cancel request if user's beforeSend function returns false\r\n\r\n        if (before === false) {\r\n          return before;\r\n        }\r\n      } // We're only worried about requests made within a $.batch function\r\n      // (aka they have a _batch object)\r\n\r\n      if (settings._batch) {\r\n        // Add request to batch\r\n        settings._batch._addRequest(xhr, settings); // Cancel this request\r\n\r\n        return false;\r\n      }\r\n    }; // Run original $.ajax method for all other requests\r\n\r\n    return $ajax.call(this, url, options);\r\n  };\n\n  function FormBase(id, pageId) {\r\n    var self = this,\r\n        $self = $__default[\"default\"](self);\r\n    this._initiated = false;\r\n    this.id = id; // Same ID as the form\r\n\r\n    this.element = document.getElementById(id); // HTML form or div\r\n\r\n    this.$element = $__default[\"default\"](this.element); // jQuery object of the form or div\r\n\r\n    this.pageId = pageId;\r\n    this.htmlForm = null; // HTML form element\r\n\r\n    this.initSearchPanel = false; // Expanded by default\r\n\r\n    this.modified = false;\r\n    this.emptyRow = null; // Check empty row\r\n\r\n    this.multiPage = null; // Multi-page\r\n\r\n    this.autoSuggests = {}; // AutoSuggests\r\n\r\n    this.lists = {}; // Dynamic selection lists\r\n\r\n    this.batch = new Batch(); // For batch lookup\r\n\r\n    this.formKeyCountName = \"\"; // For list/grid pages\r\n\r\n    this.submitReturnsPromise = false; // Submit form and returns Promise\r\n    // Disable form\r\n\r\n    this.disableForm = function () {\r\n      var form = this.getForm();\r\n      $__default[\"default\"](form).find(\":submit:not(.dropdown-toggle)\").prop(\"disabled\", true).addClass(\"disabled\");\r\n      this.trigger(\"disabled\");\r\n    }; // Disable form\r\n\r\n    this.disableForm = function () {\r\n      let form = this.getForm();\r\n      $__default[\"default\"](form.elements).filter(\":submit:not(.dropdown-toggle), .ew-submit\").prop(\"disabled\", true).addClass(\"disabled\");\r\n      this.trigger(\"disabled\");\r\n    }; // Enable form\r\n\r\n    this.enableForm = function () {\r\n      let form = this.getForm(),\r\n          $elements = $__default[\"default\"](form.elements);\r\n      $elements.filter(\".ew-disabled-element\").removeClass(\"ew-disabled-element\").prop(\"disabled\", false);\r\n      $elements.filter(\".ew-enabled-element\").removeClass(\"ew-enabled-element\").prop(\"disabled\", true);\r\n      $elements.filter(\":submit:not(.dropdown-toggle), .ew-submit\").not(\".ew-disabled\") // Exclude submit buttons with .ew-disabled (disabled purposely)\r\n      .prop(\"disabled\", false).removeClass(\"disabled\");\r\n      this.trigger(\"enabled\");\r\n    }; // Append hidden element with form name\r\n\r\n    this.appendHidden = function (el) {\r\n      var form = this.getForm(),\r\n          $form = $__default[\"default\"](form),\r\n          $dp = $__default[\"default\"](el).closest(\".ew-form\"),\r\n          name = $dp.attr(\"id\") + \"$\" + el.name;\r\n      if ($form.find(\"input:hidden[name='\" + name + \"']\")[0]) // Already appended\r\n        return;\r\n      var ar = $dp.find('[name=\"' + el.name + '\"]').serializeArray();\r\n\r\n      if (ar.length) {\r\n        ar.forEach(function (o, i) {\r\n          $__default[\"default\"]('<input type=\"hidden\" name=\"' + name + '\">').val(o.value).appendTo($form);\r\n        });\r\n      } else {\r\n        $__default[\"default\"]('<input type=\"hidden\" name=\"' + name + '\">').val(\"\").appendTo($form);\r\n      }\r\n    }; // Can submit\r\n\r\n    this.canSubmit = async function (e) {\r\n      var form = this.getForm(),\r\n          $form = $__default[\"default\"](form);\r\n      this.disableForm();\r\n      this.updateTextArea();\r\n\r\n      if (!this.validate || this.validate() && !$form.find(\".is-invalid\")[0]) {\r\n        $form.find(\"input[name^=sv_], input[name^=p_], .ew-template input, .ew-custom-option\") // Do not submit these values\r\n        .prop(\"disabled\", true).addClass(\"ew-disabled-element\");\r\n        $form.find(\"[data-readonly=1][disabled]\").prop(\"disabled\", false).addClass(\"ew-enabled-element\"); // Submit readonly values\r\n\r\n        var $dps = $form.find(\"input[name=detailpage]\").map(function (i, el) {\r\n          return $form.find(\"#\" + el.value)[0];\r\n        });\r\n\r\n        if ($dps.length > 1) {\r\n          // Multiple Master/Detail, check element names\r\n          $dps.each(function (i, dp) {\r\n            $__default[\"default\"](dp).find(\":input\").each(function (j, el) {\r\n              if (/^(fn_)?(x|o)\\d*_/.test(el.name)) {\r\n                var $els = $dps.not(dp).find(\":input[name='\" + el.name + \"']\");\r\n\r\n                if ($els.length) {\r\n                  // Elements with same name found\r\n                  self.appendHidden(el); // Append element with form name\r\n\r\n                  $els.each(function () {\r\n                    self.appendHidden(this); // Append elements with same name and form name\r\n                  });\r\n                }\r\n              }\r\n            });\r\n          });\r\n        }\r\n\r\n        let args = {\r\n          form: form,\r\n          result: true\r\n        },\r\n            evt = $__default[\"default\"].Event(\"beforesubmit\", {\r\n          originalEvent: e\r\n        });\r\n        $form.trigger(evt, [args]);\r\n        let result = await args.result; // Support Promise<boolean|Object>\r\n\r\n        if (!evt.isDefaultPrevented() && (result === true || $__default[\"default\"].isObject(result) && result.value)) // Support Swal.fire()\r\n          return true;\r\n      } else {\r\n        this.enableForm();\r\n      }\r\n\r\n      return false;\r\n    }; // Submit\r\n\r\n    this.submit = async function (e) {\r\n      var _e$originalEvent, _e$originalEvent$subm;\r\n\r\n      let form = this.getForm(),\r\n          formAction = e == null ? void 0 : (_e$originalEvent = e.originalEvent) == null ? void 0 : (_e$originalEvent$subm = _e$originalEvent.submitter) == null ? void 0 : _e$originalEvent$subm.formAction;\r\n      if (formAction) form.setAttribute(\"action\", formAction);\r\n\r\n      if (await this.canSubmit(e)) {\r\n        if (this.submitReturnsPromise) {\r\n          let url = form.getAttribute(\"action\").split(\"#\")[0].split(\"?\")[0],\r\n              method = form.method.toUpperCase(),\r\n              body = $__default[\"default\"](form).serialize();\r\n          return ew.fetch(url, {\r\n            method,\r\n            body\r\n          }).finally(() => this.enableForm()); // Return Promise\r\n        } else {\r\n          form.submit();\r\n        }\r\n      } else {\r\n        this.enableForm();\r\n      }\r\n    }; // Get dynamic selection list by element name or id\r\n\r\n    this.getList = function (name) {\r\n      name = name.replace(/^(sv_)?[xy](\\d*|\\$rowindex\\$)_|\\[\\]$/g, \"\"); // Remove element name prefix/suffix\r\n\r\n      return this.lists[name];\r\n    }; // Compile templates\r\n\r\n    this.compileTemplates = function () {\r\n      let lists = Object.values(this.lists);\r\n\r\n      for (let list of lists) {\r\n        if (list.template && $__default[\"default\"].isString(list.template)) list.template = $__default[\"default\"].templates(list.template);\r\n      }\r\n    }; // Get the HTML form element\r\n\r\n    this.getForm = function () {\r\n      if (!this.htmlForm) {\r\n        var _this$element, _this$element2;\r\n\r\n        if (((_this$element = this.element) == null ? void 0 : _this$element.tagName) == \"FORM\") {\r\n          // HTML form\r\n          this.htmlForm = this.element;\r\n        } else if (((_this$element2 = this.element) == null ? void 0 : _this$element2.tagName) == \"DIV\") {\r\n          // HTML div => Grid page\r\n          this.htmlForm = this.element.closest(\"form\");\r\n        }\r\n      }\r\n\r\n      return this.htmlForm;\r\n    }; // Get form element as single element\r\n\r\n    this.getElement = function (name) {\r\n      return name ? ew.getElement(name, this.$element) : this.$element[0];\r\n    }; // Get form element(s) as single element or array of radio/checkbox\r\n\r\n    this.getElements = function (name) {\r\n      var selector = \"[name='\" + name + \"']\";\r\n      selector = \"input\" + selector + \",selection-list\" + selector + \",select\" + selector + \",textarea\" + selector + \",button\" + selector;\r\n      var $els = this.$element.find(selector);\r\n      if ($els.length == 0) return null;\r\n      if ($els.length == 1 && $els.is(\"[type=checkbox]\")) // Single checkbox (boolean field)\r\n        return $els[0];\r\n      if ($els.length == 1 && $els.is(\":not([type=checkbox]):not([type=radio])\")) return $els[0];\r\n      if ($els.length == 2 && $els.eq(0).is(\"selection-list\") && $els.eq(1).is(\"input[type=hidden]\")) // Polyfill for the ElementInternals\r\n        return $els[0];\r\n      return $els.get();\r\n    };\r\n    /**\r\n     * Update selection lists\r\n     * @param {(null|undefined|number)*} rowindex - Row index\r\n     * @param {bool} [immediate] - Send request immediately\r\n     * @returns\r\n     */\r\n\r\n    this.updateLists = function (rowindex, immediate) {\r\n      var _form$querySelector;\r\n\r\n      if (rowindex === null) // rowindex == $rowindex$ == null\r\n        return;\r\n      if (this.pageId == \"grid\" && !$__default[\"default\"].isNumber(rowindex) && !$__default[\"default\"].isUndefined(rowindex)) return;\r\n      var form = this.getForm(); // Set up $element and htmlForm\r\n\r\n      if ((form == null ? void 0 : (_form$querySelector = form.querySelector(\"input#confirm\")) == null ? void 0 : _form$querySelector.value) == \"confirm\") // Confirm page\r\n        return;\r\n\r\n      var fixId = (id, multiple) => {\r\n        var t = \"\",\r\n            i = rowindex,\r\n            ar = id.split(\" \");\r\n\r\n        if (ar.length > 1) {\r\n          t = ar[0];\r\n          i = \"\";\r\n          id = ar[1];\r\n        }\r\n\r\n        let prefix = $__default[\"default\"].isNumber(i) ? \"x\" + i + \"_\" : \"x_\"; // Add row index\r\n\r\n        if (id.startsWith(\"x_\")) // Field element name\r\n          id = id.replace(/^x_/, prefix);else // Field var\r\n          id = prefix + id;\r\n        if (multiple && !id.endsWith(\"[]\")) // Add [] if select-multiple\r\n          id += \"[]\";\r\n        return t ? t + \" \" + id : id;\r\n      };\r\n\r\n      var selector = Object.entries(this.lists).map(([id, list]) => {\r\n        return \"[name='\" + fixId(id, list.multiple) + \"']\";\r\n      }).join();\r\n\r\n      if (selector && form.querySelector(selector)) {\r\n        // Lists found\r\n        this.compileTemplates(); // For grid where updateList() called before init()\r\n\r\n        var requests = [];\r\n\r\n        for (let [id, list] of Object.entries(this.lists)) {\r\n          let parents = list.parentFields.slice().map(parent => fixId(parent)),\r\n              // Clone and fix index\r\n          ajax = list.ajax && !list.lookupOptions.length; // Has link table and no lookup cache\r\n\r\n          id = fixId(id, list.multiple);\r\n\r\n          if (ajax) {\r\n            // Ajax (async)\r\n            let pvalues = parents.map(parent => ew.getOptionValues(parent, form));\r\n            requests.push([id, pvalues, ajax, false]);\r\n          } else {\r\n            // Non-Ajax (lookup cache or user values)\r\n            ew.updateOptions.call(this, id, parents, false, false);\r\n          }\r\n        }\r\n\r\n        requests.forEach(request => this.batch.add(ew.updateOptions.bind(this, ...request)));\r\n      } // Update the Ajax lists\r\n\r\n      if (this.batch.requests.length) {\r\n        if (rowindex === undefined || immediate) {\r\n          // Called by form or update immediately (add blank row)\r\n          let deferreds = [],\r\n              batchSize = ew.ajaxBatchSize > 0 ? ew.ajaxBatchSize : 1;\r\n\r\n          while (this.batch.requests.length > batchSize) {\r\n            let b = new Batch();\r\n            b.requests = this.batch.requests.splice(0, batchSize);\r\n            deferreds.push(b.send({\r\n              url: ew.getApiUrl(ew.API_LOOKUP_ACTION)\r\n            }));\r\n          }\r\n\r\n          if (this.batch.requests.length > 0) deferreds.push(this.batch.send({\r\n            url: ew.getApiUrl(ew.API_LOOKUP_ACTION)\r\n          }));\r\n          $__default[\"default\"].when(...deferreds).then(() => $__default[\"default\"](document).trigger(\"updatedone\", [{\r\n            source: self,\r\n            target: form\r\n          }])).fail(error => console.log(error)).always(() => this.batch.clear());\r\n        }\r\n      } else {\r\n        $__default[\"default\"](document).trigger(\"updatedone\", [{\r\n          source: self,\r\n          target: form\r\n        }]);\r\n      }\r\n    }; // Create AutoSuggest\r\n\r\n    this.createAutoSuggest = function (settings) {\r\n      var options = Object.assign({\r\n        limit: ew.AUTO_SUGGEST_MAX_ENTRIES,\r\n        form: this\r\n      }, ew.autoSuggestSettings, settings); // Global settings + field specific settings\r\n\r\n      self.autoSuggests[settings.id] = new ew.AutoSuggest(options);\r\n    }; // Init editors\r\n\r\n    this.initEditors = function () {\r\n      var form = this.getForm();\r\n      $__default[\"default\"](form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $__default[\"default\"](el).data(\"editor\");\r\n        if (ed && !ed.active && !ed.name.includes(\"$rowindex$\")) ed.create();\r\n      });\r\n    }; // Update textareas\r\n\r\n    this.updateTextArea = function (name) {\r\n      var form = this.getForm();\r\n      $__default[\"default\"](form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $__default[\"default\"](el).data(\"editor\");\r\n        if (!ed || name && ed.name != name) return true; // Continue\r\n\r\n        ed.save();\r\n        if (name) return false; // Break\r\n      });\r\n    }; // Destroy editor(s)\r\n\r\n    this.destroyEditor = function (name) {\r\n      var form = this.getForm();\r\n      $__default[\"default\"](form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $__default[\"default\"](el).data(\"editor\");\r\n        if (!ed || name && ed.name != name) return true; // Continue\r\n\r\n        ed.destroy();\r\n        if (name) return false; // Break\r\n      });\r\n    }; // Show error message\r\n\r\n    this.onError = function (el, msg) {\r\n      return ew.onError(this, el, msg);\r\n    }; // Init file upload\r\n\r\n    this.initUpload = function () {\r\n      var form = this.getForm();\r\n      $__default[\"default\"](form.elements).filter(\"input:file:not([name*='$rowindex$'])\").each(function (index) {\r\n        $__default[\"default\"].later(ew.AJAX_DELAY * index, null, ew.upload, this); // Delay a little in case of large number of upload fields\r\n      });\r\n    }; // Set up filters\r\n\r\n    this.setupFilters = function (e, filters) {\r\n      var id = this.id,\r\n          data = this.filterList ? this.filterList.data : null,\r\n          $sf = $__default[\"default\"](\".ew-save-filter[data-form=\" + id + \"]\").toggleClass(\"disabled\", !data),\r\n          $df = $__default[\"default\"](\".ew-delete-filter[data-form=\" + id + \"]\").toggleClass(\"disabled\", !filters.length).toggleClass(\"dropdown-toggle\", !!filters.length),\r\n          $delete = $df.parent(\"li\").toggleClass(\"dropdown-submenu dropdown-hover\", !!filters.length).toggleClass(\"disabled\", !filters.length),\r\n          $save = $sf.parent(\"li\").toggleClass(\"disabled\", !data);\r\n\r\n      var saveFilters = function (id, filters) {\r\n        if (ew.SEARCH_FILTER_OPTION == \"Client\") {\r\n          localStorage.setItem(ew.PROJECT_NAME + \"_\" + id + \"_filters\", JSON.stringify(filters));\r\n        } else if (ew.SEARCH_FILTER_OPTION == \"Server\") {\r\n          var $body = $__default[\"default\"](\"body\").css(\"cursor\", \"wait\");\r\n          $__default[\"default\"].ajax(ew.currentPage(), {\r\n            type: \"POST\",\r\n            dataType: \"json\",\r\n            data: {\r\n              \"ajax\": \"savefilters\",\r\n              \"filters\": JSON.stringify(filters)\r\n            }\r\n          }).done(function (result) {\r\n            if (result[0] && result[0].success) self.filterList.filters = filters; // Save filters\r\n          }).always(function () {\r\n            $body.css(\"cursor\", \"default\");\r\n          });\r\n        }\r\n      };\r\n\r\n      $save.off(\"click.ew\").on(\"click.ew\", function (e) {\r\n        // Save filter\r\n        if ($save.hasClass(\"disabled\")) return false;\r\n        ew.prompt({\r\n          input: \"text\",\r\n          html: ew.language.phrase(\"EnterFilterName\")\r\n        }, name => {\r\n          name = ew.sanitize(name);\r\n\r\n          if (name) {\r\n            filters.push([name, data]);\r\n            saveFilters(id, filters);\r\n          }\r\n        }, true);\r\n      }).prevAll().remove();\r\n      $df.next(\"ul.dropdown-menu\").remove();\r\n\r\n      if (filters.length) {\r\n        var $submenu = $__default[\"default\"](\"<ul class='dropdown-menu'></ul>\");\r\n\r\n        for (var i in filters) {\r\n          if (!Array.isArray(filters[i])) continue;\r\n          $__default[\"default\"]('<li><a class=\"dropdown-item\" data-index=\"' + i + '\" data-ew-action=\"none\">' + filters[i][0] + '</a></li>').on(\"click\", function (e) {\r\n            // Delete\r\n            var i = $__default[\"default\"](this).find(\"a[data-index]\").data(\"index\");\r\n            ew.prompt(ew.language.phrase(\"DeleteFilterConfirm\").replace(\"%s\", filters[i][0]), result => {\r\n              if (result) {\r\n                filters.splice(i, 1);\r\n                saveFilters(id, filters);\r\n              }\r\n            });\r\n          }).appendTo($submenu);\r\n          $__default[\"default\"]('<li><a class=\"dropdown-item ew-filter-list\" data-index=\"' + i + '\" data-ew-action=\"none\">' + filters[i][0] + '</a></li>').insertBefore($save).on(\"click\", function (e) {\r\n            var i = $__default[\"default\"](this).find(\"a[data-index]\").data(\"index\");\r\n            $__default[\"default\"](\"<form>\").attr({\r\n              method: \"post\",\r\n              action: ew.currentPage()\r\n            }).append($__default[\"default\"](\"<input type='hidden'>\").attr({\r\n              name: \"cmd\",\r\n              value: \"resetfilter\"\r\n            }), $__default[\"default\"](\"<input type='hidden'>\").attr({\r\n              name: ew.TOKEN_NAME_KEY,\r\n              value: ew.TOKEN_NAME\r\n            }), // PHP\r\n            $__default[\"default\"](\"<input type='hidden'>\").attr({\r\n              name: ew.ANTIFORGERY_TOKEN_KEY,\r\n              value: ew.ANTIFORGERY_TOKEN\r\n            }), // PHP\r\n            $__default[\"default\"](\"<input type='hidden'>\").attr({\r\n              name: \"filter\",\r\n              value: JSON.stringify(filters[i][1])\r\n            })).appendTo(\"body\").trigger(\"submit\");\r\n          });\r\n        }\r\n\r\n        $__default[\"default\"](\"<li class='dropdown-divider'></li>\").insertBefore($save);\r\n        $delete.append($submenu);\r\n      }\r\n    }; // Add event handler\r\n\r\n    this.on = function () {\r\n      $self.on(...arguments);\r\n    }; // Add event handler\r\n\r\n    this.one = function () {\r\n      $self.one(...arguments);\r\n    }; // Remove event handler\r\n\r\n    this.off = function () {\r\n      $self.off(...arguments);\r\n    }; // Trigger event\r\n\r\n    this.trigger = function () {\r\n      $self.trigger(...arguments);\r\n    }; // Init form\r\n\r\n    this.init = function () {\r\n      if (this._initiated) return; // Check form\r\n\r\n      var form = this.getForm();\r\n      if (!form) return;\r\n      var $form = $__default[\"default\"](form); // Filters button\r\n\r\n      if (ew.SEARCH_FILTER_OPTION == \"Client\" || ew.SEARCH_FILTER_OPTION == \"Server\" && ew.IS_LOGGEDIN && !ew.IS_SYS_ADMIN && ew.CURRENT_USER_NAME != \"\") {\r\n        $__default[\"default\"](\".ew-filter-option .ew-btn-dropdown\").on(\"show.bs.dropdown\", function (e) {\r\n          var _self$filterList$filt, _self$filterList;\r\n\r\n          var filters = [];\r\n\r\n          if (ew.SEARCH_FILTER_OPTION == \"Client\") {\r\n            var item = localStorage.getItem(ew.PROJECT_NAME + \"_\" + self.id + \"_filters\");\r\n            if (item) filters = ew.parseJson(item) || [];\r\n          } else if (ew.SEARCH_FILTER_OPTION == \"Server\") filters = (_self$filterList$filt = (_self$filterList = self.filterList) == null ? void 0 : _self$filterList.filters) != null ? _self$filterList$filt : [];\r\n\r\n          var ar = $__default[\"default\"].grep(filters, function (val) {\r\n            if (Array.isArray(val) && val.length == 2) return val;\r\n          });\r\n          self.setupFilters(e, ar);\r\n        }).removeClass(\"d-none\").show();\r\n      } else {\r\n        $__default[\"default\"](\".ew-filter-option\").addClass(\"d-none\").hide();\r\n      } // Compile templates\r\n\r\n      this.compileTemplates(); // Search form\r\n\r\n      if (/s(ea)?rch$/.test(this.id)) {\r\n        // Search panel\r\n        if (this.initSearchPanel && !ew.hasFormData(form)) $__default[\"default\"](\"#\" + this.id + \"_search_panel\").removeClass(\"show\"); // Hide search operator column\r\n\r\n        if (!$__default[\"default\"](\".ew-table .ew-search-operator\").text().trim()) $__default[\"default\"](\".ew-table .ew-search-operator\").parent(\"td\").hide(); // Search operators\r\n\r\n        $form.find(\"select[id^=z_]\").each(function () {\r\n          var $this = $__default[\"default\"](this).trigger(\"change\");\r\n          if ($this.val() != \"BETWEEN\") $form.find(\"#w_\" + this.id.substring(2)).trigger(\"change\");\r\n        });\r\n      } // Multi-page\r\n\r\n      if (this.multiPage) this.multiPage.render(); // HTML editors\r\n\r\n      loadjs.ready([\"editor\"], () => setTimeout(this.initEditors.bind(this), 0)); // Delay for custom template to apply first\r\n      // Dynamic selection lists\r\n\r\n      this.updateLists(); // Init file upload\r\n\r\n      this.initUpload(); // Submit/Cancel\r\n\r\n      if (this.$element.is(\"form\")) {\r\n        // Not Grid page\r\n        // Detail pages\r\n        this.$element.find(\".ew-detail-pages .ew-nav a[data-bs-toggle=tab]\").on(\"shown.bs.tab\", function (e) {\r\n          var $tab = $__default[\"default\"](e.target.getAttribute(\"href\")),\r\n              $panel = $tab.find(\".table-responsive.ew-grid-middle-panel\"),\r\n              $container = $tab.closest(\".container-fluid\");\r\n          if ($panel.width() >= $container.width()) $panel.width($container.width() + \"px\");else $panel.width(\"auto\");\r\n        });\r\n        $form.on(\"submit\", function (e) {\r\n          // Bind submit event\r\n          let args = {\r\n            form: form,\r\n            result: self.submit(e)\r\n          },\r\n              evt = $__default[\"default\"].Event(\"aftersubmit\", {\r\n            originalEvent: e\r\n          });\r\n          self.trigger(evt, [args]);\r\n          return false; // Disable normal submission\r\n        });\r\n        $form.find(\"[data-field], .ew-priv\").on(\"change\", function () {\r\n          if (ew.CONFIRM_CANCEL) self.modified = true;\r\n        });\r\n        $form.find(\"#btn-cancel[data-href]\").on(\"click\", function () {\r\n          // Cancel\r\n          self.updateTextArea();\r\n          var href = this.dataset.href;\r\n\r\n          if (self.modified && ew.hasFormData(form)) {\r\n            ew.prompt(ew.language.phrase(\"ConfirmCancel\"), result => {\r\n              if (result) {\r\n                $form.find(\"#btn-action\").prop(\"disabled\", true); // Disable the save button\r\n\r\n                window.location = href;\r\n              }\r\n            });\r\n          } else {\r\n            $form.find(\"#btn-action\").prop(\"disabled\", true); // Disable the save button\r\n\r\n            window.location = href;\r\n          }\r\n        });\r\n      }\r\n\r\n      this._initiated = true; // Store form object as data\r\n\r\n      this.$element.data(\"form\", this); // Trigger listeners\r\n\r\n      this.trigger(\"initiated\");\r\n    }; // Add to the global forms object\r\n\r\n    ew.forms.add(this);\r\n  }\n\n  /**\r\n   * Class Field\r\n   */\r\n  let Field = /*#__PURE__*/function () {\r\n    /**\r\n     * Constructor\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Function[]|Function} validators Validators\r\n     * @param {bool} invalid Initial valid status (e.g. server side)\r\n     */\r\n    function Field(fldvar, validators, invalid) {\r\n      _defineProperty(this, \"name\", \"\");\r\n\r\n      _defineProperty(this, \"validators\", []);\r\n\r\n      _defineProperty(this, \"_validate\", true);\r\n\r\n      this.name = fldvar;\r\n\r\n      if (Array.isArray(validators)) {\r\n        for (let validator of validators) this.addValidator(validator);\r\n      } else if (typeof validators === \"function\") {\r\n        this.addValidator(validators);\r\n      }\r\n\r\n      this.invalid = invalid;\r\n    }\r\n    /**\r\n     * Add validator\r\n     * @param {Function} validator Validator function\r\n     */\r\n\r\n    var _proto = Field.prototype;\r\n\r\n    _proto.addValidator = function addValidator(validator) {\r\n      if (typeof validator === \"function\") this.validators.push(validator);\r\n    }\r\n    /**\r\n     * Get error\r\n     * @returns {Object}\r\n     */\r\n    ;\r\n\r\n    /**\r\n     * Add error\r\n     * @param {Object} err Error\r\n     */\r\n    _proto.addError = function addError(err) {\r\n      if (err) {\r\n        var _this$_error;\r\n\r\n        let error = (_this$_error = this._error) != null ? _this$_error : {};\r\n        this._error = { ...error,\r\n          ...err\r\n        };\r\n        this.invalid = true;\r\n      }\r\n    }\r\n    /**\r\n     * Clear all errors\r\n     */\r\n    ;\r\n\r\n    _proto.clearErrors = function clearErrors() {\r\n      this._error = null;\r\n      this.invalid = false;\r\n    }\r\n    /**\r\n     * Clear all validators\r\n     */\r\n    ;\r\n\r\n    _proto.clearValidators = function clearValidators() {\r\n      this.validators = [];\r\n    }\r\n    /**\r\n     * Get error message\r\n     * @returns {string} HTML\r\n     */\r\n    ;\r\n\r\n    /**\r\n     * Validate field value\r\n     * @returns {boolean}\r\n     */\r\n    _proto.validate = function validate() {\r\n      let result = true;\r\n      this.clearErrors(); // Reset error\r\n\r\n      if (this._element && this.shouldValidate) {\r\n        if (Array.isArray(this.validators)) {\r\n          for (let validator of this.validators) {\r\n            let err = validator(this._element);\r\n\r\n            if (err !== false) {\r\n              this.addError(err);\r\n              result = false;\r\n            }\r\n          }\r\n\r\n          this.updateFeedback();\r\n        }\r\n      }\r\n\r\n      return result;\r\n    }\r\n    /**\r\n     * Reset invalid property (on page load for Grid-Add/Edit)\r\n     */\r\n    ;\r\n\r\n    _proto.resetInvalid = function resetInvalid() {\r\n      var _this$_element, _this$_element$classL, _this$_element$closes, _this$_element$closes2;\r\n\r\n      this.clearErrors();\r\n      if ((_this$_element = this._element) != null && (_this$_element$classL = _this$_element.classList) != null && _this$_element$classL.contains(\"is-invalid\") && !this._error) this.addError({\r\n        server: (_this$_element$closes = this._element.closest(ew.fieldContainerSelector)) == null ? void 0 : (_this$_element$closes2 = _this$_element$closes.querySelector(\".invalid-feedback\")) == null ? void 0 : _this$_element$closes2.innerHTML\r\n      }); // Server side error\r\n    }\r\n    /**\r\n     * Update the error message to feedback element\r\n     */\r\n    ;\r\n\r\n    _proto.updateFeedback = function updateFeedback() {\r\n      let err = this.errorMessage;\r\n\r\n      if (this._element && err) {\r\n        var _this$_element$closes3;\r\n\r\n        let feedback = (_this$_element$closes3 = this._element.closest(ew.fieldContainerSelector)) == null ? void 0 : _this$_element$closes3.querySelector(\".invalid-feedback\");\r\n        if (feedback) feedback.innerHTML = err;\r\n        ew.setInvalid(this._element);\r\n      }\r\n    }\r\n    /**\r\n     * Set focus\r\n     * @param {Object} options - Focus options\r\n     */\r\n    ;\r\n\r\n    _proto.focus = function focus(options) {\r\n      if (this._element) ew.setFocus(this._element, options);\r\n    }\r\n    /**\r\n     * Check if the field can be focused\r\n     */\r\n    ;\r\n\r\n    _proto.canFocus = function canFocus() {\r\n      var _el$style, _el$classList;\r\n\r\n      let el = this._element;\r\n      return el && !(el.hidden && !el.tagName == \"SELECTION-LIST\" || el.readonly || el.disabled || el.type == \"hidden\" || ((_el$style = el.style) == null ? void 0 : _el$style.display) == \"none\" || (_el$classList = el.classList) != null && _el$classList.contains(\"d-none\"));\r\n    }\r\n    /**\r\n     * Check if focused\r\n     */\r\n    ;\r\n\r\n    _createClass(Field, [{\r\n      key: \"error\",\r\n      get: function () {\r\n        return this._error;\r\n      }\r\n    }, {\r\n      key: \"errorMessage\",\r\n      get: function () {\r\n        if (this._error) {\r\n          return Array.from(Object.values(this._error)).join(\"<br>\");\r\n        }\r\n\r\n        return \"\";\r\n      }\r\n      /**\r\n       * Check if the field should be validated\r\n       */\r\n\r\n    }, {\r\n      key: \"shouldValidate\",\r\n      get: function () {\r\n        return !this._checkbox || this._checkbox.checked;\r\n      }\r\n      /**\r\n       * Set form element\r\n       */\r\n\r\n    }, {\r\n      key: \"element\",\r\n      get:\r\n      /**\r\n       * Get form element\r\n       * @returns {HTMLElement|HTMLElement[]}\r\n       */\r\n      function () {\r\n        return this._element;\r\n      }\r\n      /**\r\n       * Get field value from form element\r\n       * @returns {string|Array}\r\n       */\r\n      ,\r\n      set: function (el) {\r\n        var _this$_element2, _this$_element2$id;\r\n\r\n        this._element = el;\r\n        this._checkbox = (_this$_element2 = this._element) != null && (_this$_element2$id = _this$_element2.id) != null && _this$_element2$id.match(/^[xy]_/) ? document.getElementById(this._element.id.replace(/^[xy]_/, \"u_\")) : null; // Find the checkbox for the field in Update page\r\n      }\r\n    }, {\r\n      key: \"value\",\r\n      get: function () {\r\n        return this._element ? ew.getValue(this._element) : \"\";\r\n      }\r\n    }, {\r\n      key: \"focused\",\r\n      get: function () {\r\n        return this._element && this._element == document.activeElement;\r\n      }\r\n    }]);\r\n\r\n    return Field;\r\n  }();\n\n  /**\r\n   * Class Form\r\n   */\r\n\r\n  let Form = /*#__PURE__*/function (_FormBase) {\r\n    _inheritsLoose(Form, _FormBase);\r\n\r\n    /**\r\n     * Constructor\r\n     * @param {string} id Form ID\r\n     * @param {string} pageId Page ID\r\n     */\r\n    function Form(id, pageId) {\r\n      var _this;\r\n\r\n      _this = _FormBase.call(this, id, pageId) || this;\r\n\r\n      _defineProperty(_assertThisInitialized(_this), \"row\", {});\r\n\r\n      _defineProperty(_assertThisInitialized(_this), \"fields\", {});\r\n\r\n      _defineProperty(_assertThisInitialized(_this), \"validateRequired\", true);\r\n\r\n      _defineProperty(_assertThisInitialized(_this), \"autoFocus\", true);\r\n\r\n      _defineProperty(_assertThisInitialized(_this), \"autoFocusPreventScroll\", true);\r\n\r\n      _this.on(\"initiated\", function () {\r\n        let form = this.getForm();\r\n\r\n        if (form.classList.contains(\"ew-wait\")) {\r\n          this.one(\"enabled\", function () {\r\n            this.setInvalid();\r\n            this.tryFocus();\r\n          });\r\n          return;\r\n        }\r\n\r\n        this.setInvalid();\r\n        this.tryFocus();\r\n      });\r\n\r\n      return _this;\r\n    }\r\n    /**\r\n     * Add field\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Function[]} validators Validators\r\n     * @param {bool} invalid Invalid\r\n     */\r\n\r\n    var _proto = Form.prototype;\r\n\r\n    _proto.addField = function addField(fldvar, validators, invalid) {\r\n      if (!(fldvar in this.fields)) this.fields[fldvar] = new Field(fldvar, validators, invalid);\r\n    }\r\n    /**\r\n     * Get field\r\n     * @param {string} fldvar Field variable name\r\n     * @returns Field\r\n     */\r\n    ;\r\n\r\n    _proto.getField = function getField(fldvar) {\r\n      return this.fields[fldvar];\r\n    }\r\n    /**\r\n     * Add fields by field definitions\r\n     * @param {Array} fields\r\n     */\r\n    ;\r\n\r\n    _proto.addFields = function addFields(fields) {\r\n      if (Array.isArray(fields)) {\r\n        for (let field of fields) {\r\n          if (Array.isArray(field)) {\r\n            this.addField.apply(this, field);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * Add error\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Object} err Error\r\n     */\r\n    ;\r\n\r\n    _proto.addError = function addError(fldvar, err) {\r\n      if (err) {\r\n        var _this$_error;\r\n\r\n        this._error = (_this$_error = this._error) != null ? _this$_error : {};\r\n        this._error[fldvar] = err;\r\n      }\r\n    }\r\n    /**\r\n     * Add custom error\r\n     * @param {string} fldvar Field variable name\r\n     * @param {string} msg Error message\r\n     */\r\n    ;\r\n\r\n    _proto.addCustomError = function addCustomError(fldvar, msg) {\r\n      if (fldvar in this.fields) {\r\n        let field = this.fields[fldvar],\r\n            err = {\r\n          custom: msg\r\n        };\r\n        field.addError(err);\r\n        field.updateFeedback();\r\n        this.addError(fldvar, err);\r\n      }\r\n\r\n      return false;\r\n    }\r\n    /**\r\n     * Get error\r\n     */\r\n    ;\r\n\r\n    /**\r\n     * Get HTML elements for a field\r\n     * @param {string} name - Field name\r\n     * @param {number} rowIndex [undefined] - Row index\r\n     * @returns HTMLElement|HTMLElement[]|null\r\n     */\r\n    _proto.getFieldElements = function getFieldElements(name, rowIndex) {\r\n      return this.getElements(\"x\" + (rowIndex != null ? rowIndex : \"\") + \"_\" + name) || // Set element\r\n      this.getElements(\"x\" + (rowIndex != null ? rowIndex : \"\") + \"_\" + name + \"[]\") || // Field with []\r\n      this.getElements(name); // Field by name directly (e.g. email form)\r\n    }\r\n    /**\r\n     * Set focus to a HTML element\r\n     * @param {HTMLElement} el - HTML element to be focused\r\n     */\r\n    ;\r\n\r\n    _proto.setFocus = function setFocus(el) {\r\n      let delay = this.makeVisible(el) ? Form.focusDelay : 0;\r\n\r\n      if (el != document.activeElement && el.focus) {\r\n        let preventScroll = !el.closest(\".modal-body\") && Form.autoFocusPreventScroll && this.autoFocusPreventScroll;\r\n        setTimeout(() => {\r\n          el.focus({\r\n            preventScroll\r\n          });\r\n        }, delay); // Focus after tab transition\r\n\r\n        this._focused = true;\r\n      }\r\n    }\r\n    /**\r\n     * Set focus to the first field with error\r\n     */\r\n    ;\r\n\r\n    _proto.focus = function focus() {\r\n      if (!this.canFocus()) return;\r\n\r\n      for (let [fldvar, field] of Object.entries(this.fields)) {\r\n        var _this$_error2;\r\n\r\n        if (field.invalid || (_this$_error2 = this._error) != null && _this$_error2[fldvar]) {\r\n          this.getFocusable(field);\r\n\r\n          if (field.canFocus()) {\r\n            this.setFocus(field.element);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * Get focuable field element\r\n     * @param {Field} field - Field object\r\n     */\r\n    ;\r\n\r\n    _proto.getFocusable = function getFocusable(field) {\r\n      var _field$element;\r\n\r\n      (_field$element = field.element) != null ? _field$element : field.element = this.getFieldElements(field.name);\r\n      if (!field.canFocus()) field.element = this.getFieldElements(field.name, 0); // Inline-Add\r\n\r\n      if (!field.canFocus()) field.element = this.getFieldElements(field.name, 1); // Inline-Edit or Grid-Add/Edit\r\n    }\r\n    /**\r\n     * Try set focus to a field\r\n     * @param {string|undefined|true} fieldName [undefined] - Field variable name. If undefined, find the first field. If true, always try to focus.\r\n     */\r\n    ;\r\n\r\n    _proto.tryFocus = function tryFocus(fieldName) {\r\n      if (!this.canFocus()) return;\r\n      if (!fieldName && (!Form.autoFocus || !this.autoFocus || this._focused)) return;\r\n\r\n      if (!fieldName && this.invalid) {\r\n        // Has error\r\n        this.focus();\r\n        return;\r\n      }\r\n\r\n      if ([\"add\", \"edit\"].includes(this.pageId)) {\r\n        // Process detail forms\r\n        let form = this.getForm(),\r\n            detailpage = Array.from(form.querySelectorAll(\"input[name=detailpage]\")).find(dp => {\r\n          var _ew$forms$get;\r\n\r\n          return (_ew$forms$get = ew.forms.get(dp.value)) == null ? void 0 : _ew$forms$get.invalid;\r\n        });\r\n\r\n        if (detailpage) {\r\n          detailpage.focus();\r\n          return;\r\n        }\r\n      }\r\n\r\n      for (let [fldvar, field] of Object.entries(this.fields)) {\r\n        if (fieldName && fieldName !== fldvar) continue;\r\n        field.element = null; // Reset field element first so that it will get the first element\r\n\r\n        this.getFocusable(field);\r\n\r\n        if (field.canFocus()) {\r\n          this.setFocus(field.element);\r\n          return;\r\n        }\r\n      }\r\n\r\n      if (this.id.endsWith(\"srch\") && this.element.psearch && this.element.psearch != document.activeElement) {\r\n        // Extended Search\r\n        this.element.psearch.focus({\r\n          preventScroll: Form.autoFocusPreventScroll && this.autoFocusPreventScroll\r\n        }); // Focus the Quick Search input\r\n\r\n        this._focused = true;\r\n      }\r\n    }\r\n    /**\r\n     * Check if the form can be focused\r\n     */\r\n    ;\r\n\r\n    _proto.canFocus = function canFocus() {\r\n      var _el$style, _el$classList;\r\n\r\n      let el = this.element;\r\n      return el && !(el.hidden || el.type == \"hidden\" || ((_el$style = el.style) == null ? void 0 : _el$style.display) == \"none\" || (_el$classList = el.classList) != null && _el$classList.contains(\"d-none\"));\r\n    }\r\n    /**\r\n     * Make the form visible\r\n     * @param {HTMLElement} el - Focused element\r\n     */\r\n    ;\r\n\r\n    _proto.makeVisible = function makeVisible(el) {\r\n      if (this.multiPage) {\r\n        // Multi-page\r\n        this.multiPage.gotoPageByElement(el);\r\n        return true;\r\n      } else if (this.$element.is(\"div\")) {\r\n        // Multiple Master/Detail\r\n        let $pane = this.$element.closest(\".tab-pane\");\r\n\r\n        if ($pane[0] && !$pane.hasClass(\"active\")) {\r\n          $pane.closest(\".ew-nav\").find(\"a[data-bs-toggle=tab][href='#\" + $pane.attr(\"id\") + \"']\").trigger(\"click\");\r\n          return true;\r\n        }\r\n      }\r\n\r\n      return false;\r\n    }\r\n    /**\r\n     * Validate all fields of the specified row\r\n     * @param {number} rowIndex - Row index\r\n     */\r\n    ;\r\n\r\n    _proto.validateFields = function validateFields(rowIndex) {\r\n      var _rowIndex;\r\n\r\n      (_rowIndex = rowIndex) != null ? _rowIndex : rowIndex = \"\";\r\n      if (rowIndex < 2) // Regular pages (\"\"), Inline-Add (\"0\") or first row (\"1\")\r\n        this.value = null; // Reset\r\n\r\n      this.row = {};\r\n      this._error = null; // Reset\r\n\r\n      let result = true;\r\n\r\n      for (let field of Object.values(this.fields)) {\r\n        field.element = this.getFieldElements(field.name, rowIndex);\r\n        this.row[field.name] = field.value; // Get field value\r\n\r\n        if (field.element && !field.validate()) {\r\n          // Invalid field value\r\n          this.addError(field.name, field.error);\r\n          result = false;\r\n        }\r\n      } // Save the field values of the row\r\n\r\n      if (!this.value) {\r\n        this.value = { ...this.row\r\n        };\r\n      } else {\r\n        if (!Array.isArray(this.value)) this.value = [this.value];\r\n        let index = parseInt(rowIndex, 10) || 0;\r\n        index = index > 1 ? index - 1 : 0;\r\n        this.value[index] = { ...this.row\r\n        };\r\n      }\r\n\r\n      this.focus();\r\n      return result;\r\n    } // Validate\r\n    ;\r\n\r\n    _proto.validate = function validate() {\r\n      var _form$querySelector, _form$querySelector2, _form$querySelector3;\r\n\r\n      if (!this.validateRequired) return true; // Ignore validation\r\n\r\n      let form = this.getForm();\r\n      if (((_form$querySelector = form.querySelector(\"#confirm\")) == null ? void 0 : _form$querySelector.value) == \"confirm\") return true;\r\n\r\n      if (this.pageId == \"update\" && !ew.updateSelected(form)) {\r\n        ew.alert(ew.language.phrase(\"NoFieldSelected\"));\r\n        return false;\r\n      }\r\n\r\n      let addcnt = 0,\r\n          action = (_form$querySelector2 = form.querySelector(\"#action\")) == null ? void 0 : _form$querySelector2.value,\r\n          keycnt = this.formKeyCountName ? (_form$querySelector3 = form.querySelector(\"#\" + this.formKeyCountName)) == null ? void 0 : _form$querySelector3.value : null,\r\n          // Get key_count\r\n      detailpages = form.querySelectorAll(\"input[name=detailpage]\"),\r\n          gridinsert = action == \"gridinsert\" || action == \"insert\" && Array.from(detailpages).some(dp => dp.value == this.id),\r\n          // Master/Detail-Add or Grid-Add\r\n      insert = action == \"insert\" && !gridinsert,\r\n          // Inline-Add\r\n      startcnt = insert ? 0 : 1,\r\n          rowcnt = insert ? 0 : parseInt(keycnt, 10) || 1;\r\n\r\n      for (let i = startcnt; i <= rowcnt; i++) {\r\n        let rowIndex = keycnt ? String(i) : \"\";\r\n        form.dataset.rowindex = rowIndex;\r\n\r\n        if ([\"list\", \"grid\"].includes(this.pageId)) {\r\n          if (gridinsert ? !this.emptyRow(rowIndex) : true) addcnt++;else continue;\r\n        } // Validate fields\r\n\r\n        if (!this.validateFields(rowIndex)) return false; // Call customValidate event\r\n\r\n        if (this.customValidate && !this.customValidate(form)) {\r\n          this.focus();\r\n          return false;\r\n        }\r\n      }\r\n\r\n      if (this.pageId == \"list\" && gridinsert && addcnt == 0) {\r\n        // No row added\r\n        ew.alert(ew.language.phrase(\"NoAddRecord\"));\r\n        return false;\r\n      } // Process detail forms\r\n\r\n      if ([\"add\", \"edit\"].includes(this.pageId)) {\r\n        detailpages.forEach(dp => {\r\n          let frm = ew.forms.get(dp.value);\r\n          if (frm && !frm.validate()) return false;\r\n        });\r\n      }\r\n\r\n      return true;\r\n    }\r\n    /**\r\n     * Get field values of the specified row\r\n     * @param {number} rowIndex - Row index\r\n     */\r\n    ;\r\n\r\n    _proto.getValue = function getValue(rowIndex) {\r\n      var _rowIndex2;\r\n\r\n      rowIndex = (_rowIndex2 = rowIndex) != null ? _rowIndex2 : \"\";\r\n      let value = {};\r\n\r\n      for (let field of Object.values(this.fields)) {\r\n        var _field$element2;\r\n\r\n        (_field$element2 = field.element) != null ? _field$element2 : field.element = this.getFieldElements(field.name, rowIndex);\r\n        value[field.name] = field.value; // Get field value\r\n      }\r\n\r\n      return value;\r\n    }\r\n    /**\r\n     * Set invalid fields of the specified row\r\n     * @param {number} rowIndex - Row index. If undefined, set for the whole form.\r\n     */\r\n    ;\r\n\r\n    _proto.setInvalid = function setInvalid(rowIndex) {\r\n      let form = this.getForm(); // Get HTML form\r\n\r\n      if (typeof rowIndex === \"undefined\" && this.formKeyCountName) {\r\n        let k = form.querySelector(\"#\" + this.formKeyCountName),\r\n            // Get key_count\r\n        rowcnt = parseInt(k == null ? void 0 : k.value, 10) || 1,\r\n            startcnt = rowcnt === 0 ? 0 : 1; // Check rowcnt === 0 => Inline-Add\r\n\r\n        for (let i = startcnt; i <= rowcnt; i++) {\r\n          let rowIndex = k ? String(i) : \"\";\r\n          this.setInvalid(rowIndex);\r\n        }\r\n      } else {\r\n        var _rowIndex3;\r\n\r\n        rowIndex = (_rowIndex3 = rowIndex) != null ? _rowIndex3 : \"\";\r\n\r\n        for (let field of Object.values(this.fields)) {\r\n          field.element = this.getFieldElements(field.name, rowIndex); // Always get element in case Grid-Add/Edit\r\n\r\n          if (rowIndex) field.resetInvalid(); // For Grid-Add/Edit\r\n\r\n          if (field.invalid) {\r\n            this.addError(field.name, field.error);\r\n            if (!this._focused) this.focus(); // Focus at the current row\r\n          } else {\r\n            continue;\r\n          }\r\n\r\n          ew.setInvalid(field.element);\r\n        } // Process detail forms\r\n\r\n        if ([\"add\", \"edit\"].includes(this.pageId)) form.querySelectorAll(\"input[name=detailpage]\").forEach(dp => {\r\n          var _ew$forms$get2;\r\n\r\n          return (_ew$forms$get2 = ew.forms.get(dp.value)) == null ? void 0 : _ew$forms$get2.setInvalid();\r\n        });\r\n      }\r\n    };\r\n\r\n    _createClass(Form, [{\r\n      key: \"error\",\r\n      get: function () {\r\n        return this._error;\r\n      }\r\n      /**\r\n       * Check if invalid\r\n       */\r\n\r\n    }, {\r\n      key: \"invalid\",\r\n      get: function () {\r\n        return this._error || Object.values(this.fields).some(field => field.invalid);\r\n      }\r\n    }]);\r\n\r\n    return Form;\r\n  }(FormBase);\r\n\r\n  _defineProperty(Form, \"autoFocus\", true);\r\n\r\n  _defineProperty(Form, \"autoFocusPreventScroll\", true);\r\n\r\n  _defineProperty(Form, \"focusDelay\", 200);\n\n  let AjaxLookup = /*#__PURE__*/function () {\r\n    /**\r\n     * Constructor\r\n     * @param {Object} settings Settings\r\n     * @param {string} settings.id - Input element ID\r\n     * @param {string|Form} settings.form - Form of the input element\r\n     * @param {Number} settings.limit - Options per page\r\n     * @param {Object} settings.data - Data submitted by Ajax\r\n     * @param {string} settings.action - Ajax action: \"autosuggest\" or \"modal\"\r\n     */\r\n    function AjaxLookup(settings) {\r\n      _defineProperty(this, \"_isAutoSuggest\", null);\r\n\r\n      this.elementId = settings.id; // Id\r\n\r\n      this.form = settings.form; // Form\r\n\r\n      if ($__default[\"default\"].isString(this.form)) // Form is string => Form id\r\n        this.form = ew.forms.get(this.form);\r\n      this.element = this.form.getElement(this.elementId); // Actual HTML element\r\n\r\n      this.formElement = this.form.getElement(); // HTML form or DIV\r\n\r\n      this.list = this.form.getList(this.elementId);\r\n      let m = this.elementId.match(/^[xy](\\d*|\\$rowindex\\$)_/),\r\n          rowindex = m ? m[1] : \"\";\r\n      this.parentFields = this.list.parentFields.slice() // Clone\r\n      .map(pf => pf.split(\" \").length == 1 ? pf.replace(/^x_/, \"x\" + rowindex + \"_\") : pf); // Parent field in the same table, add row index\r\n\r\n      this.limit = settings.limit;\r\n      this.debounce = settings.debounce;\r\n      this.data = settings.data;\r\n      this.recordCount = 0;\r\n      this.action = settings.action || \"autosuggest\";\r\n    }\r\n    /**\r\n     * Is AutoSuggest\r\n     */\r\n\r\n    var _proto = AjaxLookup.prototype;\r\n\r\n    /**\r\n     * Format display value\r\n     * @param {Array} opt Option\r\n     */\r\n    _proto.formatResult = function formatResult(opt) {\r\n      this.form.compileTemplates();\r\n\r\n      if (this.list.template && !this.isAutoSuggest) {\r\n        return this.list.template.render(opt, ew.jsRenderHelpers);\r\n      } else {\r\n        return ew.displayValue(opt, this.element) || opt[0];\r\n      }\r\n    }\r\n    /**\r\n     * Generate request\r\n     */\r\n    ;\r\n\r\n    _proto.generateRequest = function generateRequest() {\r\n      var _data$ajax;\r\n\r\n      var data = Object.assign({}, this.data, {\r\n        name: this.element.name,\r\n        page: this.list.page,\r\n        field: this.list.field,\r\n        language: ew.LANGUAGE_ID\r\n      }, ew.getUserParams(\"#p_\" + this.elementId, this.formElement));\r\n      (_data$ajax = data.ajax) != null ? _data$ajax : data.ajax = this.action;\r\n\r\n      if (this.parentFields.length > 0) {\r\n        this.parentFields.forEach((pf, i) => {\r\n          let arp = ew.getOptionValues(pf, this.formElement);\r\n          data[\"v\" + (i + 1)] = arp.join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n        });\r\n      }\r\n\r\n      return data;\r\n    }\r\n    /**\r\n     * Get URL\r\n     */\r\n    ;\r\n\r\n    _proto.getUrl = function getUrl(query, start) {\r\n      let params = new URLSearchParams({\r\n        q: query || \"\",\r\n        n: this.limit,\r\n        rnd: ew.random(),\r\n        start: $__default[\"default\"].isNumber(start) ? start : -1\r\n      });\r\n      return ew.getApiUrl(ew.API_LOOKUP_ACTION, params.toString());\r\n    }\r\n    /**\r\n     * Prepare URL and data for sending request\r\n     * @param {string} query Search term\r\n     * @param {Number} start Start page\r\n     */\r\n    ;\r\n\r\n    _proto.prepare = function prepare(query, start) {\r\n      return {\r\n        url: this.getUrl(query, start),\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: this.generateRequest()\r\n      };\r\n    }\r\n    /**\r\n     * Transform options (virtual)\r\n     * @param {Object[]} data Data from server\r\n     */\r\n    ;\r\n\r\n    _proto.transform = function transform(data) {\r\n      let results = [];\r\n\r\n      if ((data == null ? void 0 : data.result) == \"OK\") {\r\n        this.recordCount = data.totalRecordCount;\r\n        results = data.records;\r\n      }\r\n\r\n      return results;\r\n    };\r\n\r\n    _createClass(AjaxLookup, [{\r\n      key: \"isAutoSuggest\",\r\n      get: function () {\r\n        if (this._isAutoSuggest === null) this._isAutoSuggest = ew.isAutoSuggest(this.element);\r\n        return this._isAutoSuggest;\r\n      }\r\n      /**\r\n       * Lookup options\r\n       */\r\n\r\n    }, {\r\n      key: \"options\",\r\n      get: function () {\r\n        return this.list.lookupOptions;\r\n      }\r\n    }]);\r\n\r\n    return AjaxLookup;\r\n  }();\n\n  /**\r\n   * Class selection list option\r\n   */\r\n  let SelectionListOption =\r\n  /**\r\n   * Constructor\r\n   */\r\n  function SelectionListOption(value, text, selected) {\r\n    this.value = String(value);\r\n    this.text = String(text);\r\n    this.selected = !!selected;\r\n  };\n\n  let AutoSuggest = /*#__PURE__*/function (_AjaxLookup) {\r\n    _inheritsLoose(AutoSuggest, _AjaxLookup);\r\n\r\n    function AutoSuggest(settings) {\r\n      var _this;\r\n\r\n      _this = _AjaxLookup.call(this, settings) || this;\r\n      _this.input = _this.form.getElement(\"sv_\" + _this.elementId); // User input\r\n\r\n      if (!_this.input || _this.elementId.includes(\"$rowindex$\")) return _assertThisInitialized(_this);\r\n\r\n      let self = _assertThisInitialized(_this),\r\n          $input = $__default[\"default\"](_this.input),\r\n          $element = $__default[\"default\"](_this.element); // Properties\r\n\r\n      _this.minWidth = settings.minWidth;\r\n      _this.maxHeight = settings.maxHeight;\r\n      _this.highlight = settings.highlight;\r\n      _this.hint = settings.hint;\r\n      _this.minLength = settings.minLength;\r\n      _this.templates = Object.assign({}, settings.templates);\r\n      _this.classNames = Object.assign({}, settings.classNames);\r\n      _this.delay = settings.delay; // For loading more results\r\n\r\n      _this.debounce = settings.debounce;\r\n      _this.display = settings.display || \"text\";\r\n      _this.forceSelection = settings.forceSelect;\r\n      _this.lineHeight = settings.lineHeight;\r\n      _this.paddingY = settings.paddingY;\r\n      _this.$input = $input;\r\n      _this.$element = $element; // Save instance\r\n\r\n      $element.data(\"autosuggest\", _assertThisInitialized(_this)); // Save initial option\r\n\r\n      if ($input.val() && $element.val()) _this.element.add($element.val(), $input.val(), true); // Add events\r\n\r\n      $input.on(\"typeahead:select\", (e, d) => {\r\n        self.setValue(d[self.display]);\r\n      }).on(\"change\", () => {\r\n        let ta = $input.data(\"tt-typeahead\");\r\n\r\n        if (ta != null && ta.isOpen() && !ta.menu.empty()) {\r\n          let $item = ta.menu.getActiveSelectable();\r\n\r\n          if ($item) {\r\n            // A suggestion is highlighted\r\n            let i = $item.index(),\r\n                val = self.element.options[i].text;\r\n            $input.typeahead(\"val\", val);\r\n          }\r\n        }\r\n\r\n        self.setValue();\r\n      }).on(\"blur\", () => {\r\n        // \"change\" fires before blur\r\n        let ta = $input.data(\"tt-typeahead\");\r\n        if (ta != null && ta.isOpen()) ta.menu.close();\r\n      }).on(\"focus\", () => {\r\n        $input.attr(\"placeholder\", $input.data(\"placeholder\")).removeClass(\"is-invalid\");\r\n        $element.removeClass(\"is-invalid\");\r\n      }); // Get suggestions\r\n\r\n      let async = !_this.options.length,\r\n          loadingMore = false,\r\n          timer; // Option template (\"suggestion\" template)\r\n\r\n      let tpl = self.list.template || self.templates.suggestion;\r\n      if (tpl && $__default[\"default\"].isString(tpl)) tpl = $__default[\"default\"].templates(tpl);\r\n      if (tpl) self.templates.suggestion = tpl.render.bind(tpl);\r\n      if (async && !self.templates.footer) self.templates.footer = '<div class=\"tt-footer dropdown-item\">' + ew.language.phrase(\"LoadingMore\") + '</div>'; // \"footer\" template\r\n\r\n      let source = (query, syncResults, asyncResults) => {\r\n        if (async) {\r\n          if (timer) timer.cancel();\r\n          timer = $__default[\"default\"].later(_this.debounce, null, () => {\r\n            _this.recordCount = 0; // Reset\r\n\r\n            $__default[\"default\"].ajax(_this.prepare(query)).done(data => asyncResults(_this.transform(data)));\r\n          });\r\n        } else {\r\n          let records = _this.getSyncResults(query);\r\n\r\n          syncResults(_this.transform({\r\n            result: \"OK\",\r\n            totalRecordCount: records.length,\r\n            records\r\n          }));\r\n        }\r\n      }; // Create Typeahead\r\n\r\n      $__default[\"default\"](function () {\r\n        // Typeahead options and dataset\r\n        let options = {\r\n          highlight: self.highlight,\r\n          minLength: self.minLength,\r\n          hint: self.hint,\r\n          classNames: self.classNames\r\n        };\r\n        let dataset = {\r\n          name: self.form.id + \"-\" + self.elementId,\r\n          source,\r\n          async,\r\n          templates: self.templates,\r\n          display: self.display,\r\n          limit: async ? self.limit : Infinity\r\n        };\r\n        let args = [options, dataset]; // Trigger \"typeahead\" event\r\n\r\n        $element.trigger(\"typeahead\", [args]); // Create Typeahead\r\n\r\n        self.typeahead = $input.typeahead.apply($input, args).off(\"blur.tt\").data(\"tt-typeahead\");\r\n\r\n        let menu = self.typeahead.menu,\r\n            $menu = menu.$node,\r\n            $dataset = $menu.find(\".tt-dataset\"),\r\n            suggestionHeight = () => $menu.find(\".tt-suggestion\").outerHeight(false);\r\n\r\n        if (self.minWidth) $menu.css(\"min-width\", self.minWidth);\r\n        $input.on(\"typeahead:rendered\", (e, suggestions) => {\r\n          let rendered = suggestions.length,\r\n              count = self.count;\r\n\r\n          if (count >= self.limit) {\r\n            let h = suggestionHeight();\r\n            if (h) $dataset.css(\"max-height\", h * self.limit);\r\n          }\r\n\r\n          if (rendered > 0) $dataset.scrollTop(suggestionHeight() * (count - rendered)); // Scroll to the first suggestion\r\n\r\n          if (async) $menu.find(\".tt-footer\").toggle(self.recordCount > count);\r\n        });\r\n\r\n        if (async) {\r\n          let loadingMoreTimer;\r\n          $dataset.on(\"scroll\", () => {\r\n            var _loadingMoreTimer;\r\n\r\n            (_loadingMoreTimer = loadingMoreTimer) == null ? void 0 : _loadingMoreTimer.cancel();\r\n            loadingMoreTimer = $__default[\"default\"].later(self.delay, null, () => {\r\n              let $footer = $menu.find(\".tt-footer\");\r\n\r\n              if (!$footer.is(\":hidden\") && !loadingMore) {\r\n                let currentOffset = $dataset.offset().top + $dataset.outerHeight(false),\r\n                    loadingMoreOffset = $footer.offset().top + $footer.outerHeight(false);\r\n\r\n                if (currentOffset + 20 > loadingMoreOffset) {\r\n                  // $footer shows more than 20px\r\n                  loadingMore = true;\r\n                  self.getMore().always(() => loadingMore = false);\r\n                } else {\r\n                  var _loadingMoreTimer2;\r\n\r\n                  (_loadingMoreTimer2 = loadingMoreTimer) == null ? void 0 : _loadingMoreTimer2.cancel();\r\n                }\r\n              }\r\n            });\r\n          });\r\n        }\r\n      });\r\n      return _this;\r\n    } // Set the selected item to the actual field\r\n\r\n    var _proto = AutoSuggest.prototype;\r\n\r\n    _proto.setValue = function setValue(v) {\r\n      v || (v = this.$input.val());\r\n      let index = this.element.options.findIndex(option => option.text == v);\r\n\r\n      if (index < 0) {\r\n        // Not found in results\r\n        if (this.forceSelection && v) {\r\n          // Force selection and query not empty => error\r\n          this.$input.typeahead(\"val\", \"\").addClass(\"is-invalid\");\r\n          this.$element.next(\".invalid-feedback\").html(ew.language.phrase(\"ValueNotExist\"));\r\n          this.$element.addClass(\"is-invalid\").val(\"\").trigger(\"change\");\r\n          return;\r\n        }\r\n      } else {\r\n        // Found in results\r\n        this.element.options[index].selected = true;\r\n        if (!/s(ea)?rch$/.test(this.formElement.id) || this.forceSelection) // Force selection or not search form\r\n          v = this.element.options[index].value; // Replace the display value by Link Field value\r\n      }\r\n\r\n      if (v !== this.$element.attr(\"value\")) this.$element.attr(\"value\", v).trigger(\"change\"); // Set value to the actual field\r\n    } // Transform suggestion\r\n    ;\r\n\r\n    _proto.transform = function transform(data) {\r\n      let results = _AjaxLookup.prototype.transform.call(this, data).map(item => Object.assign({}, item, {\r\n        text: _AjaxLookup.prototype.formatResult.call(this, item)\r\n      }));\r\n\r\n      this.element.options = results.map(item => new SelectionListOption(item.lf || item[0], item.text));\r\n      return results;\r\n    } // Get current suggestion count\r\n    ;\r\n\r\n    // Get suggestions from lookup cache\r\n    _proto.getSyncResults = function getSyncResults(query) {\r\n      if (this.options.length) {\r\n        let results = this.options.filter(item => {\r\n          if (ew.LOOKUP_ALL_DISPLAY_FIELDS) {\r\n            let v = [item.df, item.df2, item.df3, item.df4].map(df => String(df).toLowerCase()).join(\" \");\r\n            return query.toLowerCase().split(\" \").filter(q => q !== \"\").every(q => v.includes(q));\r\n          } else {\r\n            return String(item.df).toLowerCase().startsWith(query);\r\n          }\r\n        });\r\n        this.recordCount = results.length;\r\n        return results;\r\n      }\r\n\r\n      return [];\r\n    } // Get more suggestions by Ajax\r\n    ;\r\n\r\n    _proto.getMore = function getMore() {\r\n      let menu = this.typeahead.menu,\r\n          start = this.count,\r\n          settings = this.prepare(menu.query, start);\r\n      return $__default[\"default\"].ajax(settings).done(data => menu.datasets[0]._append(menu.query, this.transform(data)));\r\n    };\r\n\r\n    _createClass(AutoSuggest, [{\r\n      key: \"count\",\r\n      get: function () {\r\n        return this.typeahead.menu.$node.find(\".tt-suggestion.tt-selectable\").length || 0;\r\n      }\r\n    }]);\r\n\r\n    return AutoSuggest;\r\n  }(AjaxLookup);\n\n  /**\r\n   * Class Forms\r\n   */\r\n\r\n  let Forms = /*#__PURE__*/function () {\r\n    function Forms() {\r\n      _defineProperty(this, \"_forms\", {});\r\n    }\r\n\r\n    var _proto = Forms.prototype;\r\n\r\n    /**\r\n     * Get form by element or id\r\n     * @param {HTMLElement|string} el Element or id\r\n     */\r\n    _proto.get = function get(el) {\r\n      var _ew$getForm;\r\n\r\n      if (!el) return null;\r\n      let id = $__default[\"default\"].isString(el) ? el : (_ew$getForm = ew.getForm(el)) == null ? void 0 : _ew$getForm.id;\r\n      return this._forms[id];\r\n    }\r\n    /**\r\n     * Add form\r\n     * @param {Form} f Form\r\n     */\r\n    ;\r\n\r\n    _proto.add = function add(f) {\r\n      if (this._forms[f.id] && this._forms[f.id] !== f) delete this._forms[f.id];\r\n      this._forms[f.id] = f;\r\n    }\r\n    /**\r\n     * Get all ids\r\n     * @returns {string[]}\r\n     */\r\n    ;\r\n\r\n    _proto.ids = function ids() {\r\n      return Object.keys(this._forms);\r\n    };\r\n\r\n    return Forms;\r\n  }();\n\n  var Select2Language = {\r\n    errorLoading: function () {\r\n      return ew.language.phrase(\"ErrorLoading\");\r\n    },\r\n    inputTooLong: function (args) {\r\n      var overChars = args.input.length - args.maximum;\r\n      return ew.language.phrase(\"InputTooLong\").replace(\"%s\", overChars);\r\n    },\r\n    inputTooShort: function (args) {\r\n      var remainingChars = args.minimum - args.input.length;\r\n      return ew.language.phrase(\"InputTooShort\").replace(\"%s\", remainingChars);\r\n    },\r\n    loadingMore: function () {\r\n      return ew.language.phrase(\"LoadingMore\");\r\n    },\r\n    maximumSelected: function (args) {\r\n      return ew.language.phrase(\"MaximumSelected\").replace(\"%s\", args.maximum);\r\n    },\r\n    noResults: function () {\r\n      return ew.language.phrase(\"NoResults\");\r\n    },\r\n    searching: function () {\r\n      return ew.language.phrase(\"Searching\");\r\n    },\r\n    removeAllItems: function () {\r\n      return ew.language.phrase(\"RemoveAllItems\");\r\n    },\r\n    removeItem: function () {\r\n      return ew.language.phrase(\"RemoveItem\");\r\n    },\r\n    search: function () {\r\n      return ew.language.phrase(\"Search\");\r\n    }\r\n  };\n\n  let _defined$3 = $__default[\"default\"].fn.select2.amd.require._defined,\r\n      Utils$3 = _defined$3['select2/utils'];\r\n  /**\r\n   * Select2 decorator for Results\r\n   */\r\n\r\n  let Select2ResultsDecorator = /*#__PURE__*/function () {\r\n    function Select2ResultsDecorator() {}\r\n\r\n    var _proto = Select2ResultsDecorator.prototype;\r\n\r\n    _proto.render = function render(decorated) {\r\n      var $results = $__default[\"default\"]('<div class=\"select2-results__options ' + this.options.get('containerClass') + '\" role=\"listbox\"></div>'); //***\r\n\r\n      if (this.options.get('multiple')) {\r\n        $results.attr('aria-multiselectable', 'true');\r\n      }\r\n\r\n      this.$results = $results;\r\n      return $results;\r\n    };\r\n\r\n    _proto.displayMessage = function displayMessage(decorated, params) {\r\n      var escapeMarkup = this.options.get('escapeMarkup');\r\n      this.clear();\r\n      this.hideLoading();\r\n      var $message = $__default[\"default\"]('<div role=\"alert\" aria-live=\"assertive\"' + ' class=\"select2-results__option\"></div>'); //***\r\n\r\n      if (params.message.includes(\"<\") && params.message.includes(\">\")) {\r\n        // HTML //***\r\n        $message.append(params.message);\r\n      } else {\r\n        var message = this.options.get('translations').get(params.message);\r\n        $message.append(escapeMarkup(message(params.args)));\r\n      }\r\n\r\n      $message[0].className += ' select2-results__message';\r\n      this.$results.append($message);\r\n    };\r\n\r\n    _proto.append = function append(decorated, data) {\r\n      this.hideLoading();\r\n\r\n      if (data.results == null || data.results.length === 0) {\r\n        if (this.$results.children().length === 0) {\r\n          if (this.$element.data(\"updating\") && data.pagination.more) {\r\n            this.trigger('results:message', {\r\n              message: '<div class=\"spinner-border spinner-border-sm text-primary ew-select-spinner\" role=\"status\"><span class=\"visually-hidden\">' + ew.language.phrase('Loading') + '</span></div> ' + ew.language.phrase('Loading')\r\n            });\r\n            this.$element.one(\"updated\", () => this.$element.select2(\"close\").select2(\"open\"));\r\n          } else {\r\n            this.trigger('results:message', {\r\n              message: 'noResults'\r\n            });\r\n          }\r\n        }\r\n\r\n        return;\r\n      }\r\n\r\n      data.results = this.sort(data.results); //***\r\n\r\n      var cols = this.options.get('columns'),\r\n          len = data.results.length,\r\n          $row = this.$results.find(\".\" + this.options.get('rowClass')).last();\r\n\r\n      for (var d = 0; d < data.results.length; d++) {\r\n        var item = data.results[d];\r\n        var $option = this.option(item);\r\n\r\n        if (!$row.length || $row.children().length == cols) {\r\n          // Add new row\r\n          $row = $__default[\"default\"]('<div class=\"' + this.options.get('rowClass') + '\"></div>');\r\n          this.$results.append($row);\r\n        }\r\n\r\n        $row.append($option);\r\n\r\n        if (d == len - 1) {\r\n          // Last\r\n          var cnt = cols - $row.children().length;\r\n\r\n          for (var i = 0; i < cnt; i++) $row.append('<div class=\"' + this.options.get('cellClass') + '\"></div>');\r\n        }\r\n      }\r\n    };\r\n\r\n    _proto.option = function option(decorated, data) {\r\n      // var option = document.createElement('li');\r\n      var option = document.createElement('div'); //***\r\n\r\n      option.classList.add('select2-results__option');\r\n      option.classList.add('select2-results__option--selectable');\r\n      this.options.get('cellClass').split(\" \").forEach(c => option.classList.add(c)); //***\r\n\r\n      var attrs = {\r\n        'role': 'option',\r\n        'aria-selected': 'false'\r\n      };\r\n      var matches = window.Element.prototype.matches || window.Element.prototype.msMatchesSelector || window.Element.prototype.webkitMatchesSelector;\r\n\r\n      if (data.element != null && matches.call(data.element, ':disabled') || data.element == null && data.disabled) {\r\n        attrs['aria-disabled'] = 'true';\r\n        option.classList.remove('select2-results__option--selectable');\r\n        option.classList.add('select2-results__option--disabled');\r\n      }\r\n\r\n      if (data.id == null) {\r\n        option.classList.remove('select2-results__option--selectable');\r\n      }\r\n\r\n      if (data._resultId != null) {\r\n        option.id = data._resultId;\r\n      }\r\n\r\n      if (data.title) {\r\n        option.title = data.title;\r\n      } // if (data.children) { //***\r\n      //   attrs.role = 'group';\r\n      //   attrs['aria-label'] = data.text;\r\n      //   option.classList.remove('select2-results__option--selectable');\r\n      //   option.classList.add('select2-results__option--group');\r\n      // }\r\n\r\n      for (var attr in attrs) {\r\n        var val = attrs[attr];\r\n        option.setAttribute(attr, val);\r\n      } // if (data.children) { //***\r\n      //   var $option = $(option);\r\n      //   var label = document.createElement('strong');\r\n      //   label.className = 'select2-results__group';\r\n      //   this.template(data, label);\r\n      //   var $children = [];\r\n      //   for (var c = 0; c < data.children.length; c++) {\r\n      //     var child = data.children[c];\r\n      //     var $child = this.option(child);\r\n      //     $children.push($child);\r\n      //   }\r\n      //   var $childrenContainer = $('<ul></ul>', {\r\n      //     'class': 'select2-results__options select2-results__options--nested',\r\n      //     'role': 'none'\r\n      //   });\r\n      //   $childrenContainer.append($children);\r\n      //   $option.append(label);\r\n      //   $option.append($childrenContainer);\r\n      // } else {\r\n\r\n      this.template(data, option); // }\r\n\r\n      Utils$3.StoreData(option, 'data', data);\r\n      return option;\r\n    };\r\n\r\n    return Select2ResultsDecorator;\r\n  }();\n\n  let _defined$2 = $__default[\"default\"].fn.select2.amd.require._defined,\r\n      Utils$2 = _defined$2['select2/utils'];\r\n  /**\r\n   * Results for modal lookup\r\n   */\r\n\r\n  let ModalResults = /*#__PURE__*/function () {\r\n    function ModalResults() {}\r\n\r\n    var _proto = ModalResults.prototype;\r\n\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var _container$listeners$;\r\n\r\n      var self = this;\r\n      decorated.call(this, container, $container); // Remove handlers\r\n\r\n      (_container$listeners$ = container.listeners['results:select']) == null ? void 0 : _container$listeners$.pop();\r\n      this.$results.off('mouseup');\r\n      container.on('results:select', function (evt) {\r\n        var $highlighted = self.getHighlightedResults();\r\n\r\n        if ($highlighted.length === 0) {\r\n          return;\r\n        }\r\n\r\n        var data = Utils$2.GetData($highlighted[0], 'data');\r\n\r\n        if ($highlighted.hasClass('select2-results__option--selected')) {\r\n          self.trigger('unselect', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n        } else {\r\n          self.trigger('select', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n        }\r\n      });\r\n      this.$results.on('mousedown', '.select2-results__option--selectable', function (evt) {\r\n        this._mousedown = true;\r\n      });\r\n      this.$results.on('mouseup', '.select2-results__option--selectable', function (evt) {\r\n        if (!this._mousedown) return;\r\n        var $this = $__default[\"default\"](this);\r\n        var data = Utils$2.GetData(this, 'data');\r\n\r\n        if ($this.hasClass('select2-results__option--selected')) {\r\n          self.trigger('unselect', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n          return;\r\n        }\r\n\r\n        self.trigger('select', {\r\n          originalEvent: evt,\r\n          data: data\r\n        });\r\n      });\r\n    };\r\n\r\n    return ModalResults;\r\n  }();\n\n  /**\r\n   * Search box for modal lookup\r\n   */\r\n  let ModalSearch = /*#__PURE__*/function () {\r\n    function ModalSearch() {}\r\n\r\n    var _proto = ModalSearch.prototype;\r\n\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var _container$listeners$;\r\n\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n      (_container$listeners$ = container.listeners['close']) == null ? void 0 : _container$listeners$.pop(); // Remove handler from Search\r\n\r\n      container.on('close', function () {\r\n        self.$search.attr('tabindex', -1).removeAttr('aria-controls').removeAttr('aria-activedescendant');\r\n      });\r\n    };\r\n\r\n    return ModalSearch;\r\n  }();\n\n  /**\r\n   * Dropdown search decorator\r\n   */\r\n  let KEYS = $.fn.select2.amd.require._defined['select2/keys'];\r\n  KEYS.PRINT_SCREEN = 44;\r\n\r\n  let DropdownSearchDecorator = /*#__PURE__*/function () {\r\n    function DropdownSearchDecorator() {}\r\n\r\n    var _proto = DropdownSearchDecorator.prototype;\r\n\r\n    _proto.handleSearch = function handleSearch(decorated, evt) {\r\n      var key = evt.which; // Ignore events from modifier keys\r\n\r\n      if ([KEYS.TAB, KEYS.SHIFT, KEYS.CTRL, KEYS.ALT, KEYS.PRINT_SCREEN].includes(key)) {\r\n        return;\r\n      }\r\n\r\n      if (!this._keyUpPrevented) {\r\n        var input = this.$search.val();\r\n        this.trigger('query', {\r\n          term: input\r\n        });\r\n      }\r\n\r\n      this._keyUpPrevented = false;\r\n    };\r\n\r\n    return DropdownSearchDecorator;\r\n  }();\n\n  let AttachBody$2 = $__default[\"default\"].fn.select2.amd.require._defined['select2/dropdown/attachBody'];\r\n  /**\r\n   * Select2 AttachBody with popper\r\n   */\r\n\r\n  let Select2AttachBody = /*#__PURE__*/function (_AttachBody) {\r\n    _inheritsLoose(Select2AttachBody, _AttachBody);\r\n\r\n    // Constructor\r\n    function Select2AttachBody(decorated, $element, options) {\r\n      return _AttachBody.call(this, decorated, $element, options) || this;\r\n    } // Override _attachPositioningHandler\r\n\r\n    var _proto = Select2AttachBody.prototype;\r\n\r\n    _proto._attachPositioningHandler = function _attachPositioningHandler(decorated, container) {\r\n      var self = this;\r\n      var events = ['scroll.select2.' + container.id, 'resize.select2.' + container.id, 'orientationchange.select2.' + container.id];\r\n\r\n      var handler = () => {\r\n        self._positionDropdown();\r\n\r\n        self._resizeDropdown();\r\n      };\r\n\r\n      $__default[\"default\"](window).on(events.join(' '), handler);\r\n      container.$element.closest('.modal').on('scroll.select2.' + container.id, handler);\r\n    };\r\n\r\n    // Override _detachPositioningHandler\r\n    _proto._detachPositioningHandler = function _detachPositioningHandler(decorated, container) {\r\n      var events = ['scroll.select2.' + container.id, 'resize.select2.' + container.id, 'orientationchange.select2.' + container.id];\r\n      $__default[\"default\"](window).off(events.join(' '));\r\n      container.$element.closest('.modal').off('scroll.select2.' + container.id);\r\n    };\r\n\r\n    // Override _showDropdown\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _this$_popper;\r\n\r\n      this.$dropdownContainer.appendTo(this.$dropdownParent);\r\n      (_this$_popper = this._popper) != null ? _this$_popper : this._popper = Popper.createPopper(this.$container[0], this.$dropdownContainer[0], {\r\n        placement: ew.IS_RTL ? 'bottom-end' : 'bottom-start',\r\n        modifiers: [{\r\n          name: 'flip',\r\n          enabled: true\r\n        }, {\r\n          name: 'preventOverflow',\r\n          enabled: true\r\n        }]\r\n      });\r\n\r\n      this._positionDropdown();\r\n\r\n      this._resizeDropdown();\r\n    };\r\n\r\n    // Override _positionDropdown()\r\n    _proto._positionDropdown = function _positionDropdown() {\r\n      var _this$_popper2;\r\n\r\n      (_this$_popper2 = this._popper) == null ? void 0 : _this$_popper2.update();\r\n    } // Override destroy()\r\n    ;\r\n\r\n    _proto.destroy = function destroy(decorated) {\r\n      var _this$_popper3;\r\n\r\n      _AttachBody.prototype.destroy.call(this, decorated);\r\n\r\n      (_this$_popper3 = this._popper) == null ? void 0 : _this$_popper3.destroy();\r\n      this._popper = null;\r\n    };\r\n\r\n    return Select2AttachBody;\r\n  }(AttachBody$2);\n\n  /**\r\n   * Select2 AttachBody decorator for modal lookup\r\n   */\r\n\r\n  let ModalAttachBody = /*#__PURE__*/function () {\r\n    function ModalAttachBody(decorated, $element, options) {\r\n      _defineProperty(this, \"$modal\", null);\r\n\r\n      options.set('dropdownParent', $__default[\"default\"](document.body));\r\n      decorated.call(this, $element, options);\r\n    }\r\n\r\n    var _proto = ModalAttachBody.prototype;\r\n\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      let self = this;\r\n      decorated.call(this, container, $container);\r\n      container.on('open', function () {\r\n        self._showDropdown(); // Must bind after the results handlers to ensure correct sizing\r\n\r\n        self._bindContainerResultHandlers(container);\r\n      });\r\n      this.$dropdownContainer.on('mousedown', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    };\r\n\r\n    _proto.position = function position(decorated, $dropdown, $container) {\r\n      // Clone all of the container classes\r\n      $dropdown.attr('class', $container.attr('class'));\r\n      $dropdown.removeClass('select2');\r\n      this.$container = $container;\r\n    };\r\n\r\n    _proto.render = function render(decorated) {\r\n      let $container = $__default[\"default\"]('<span></span>');\r\n      let $dropdown = decorated.call(this);\r\n      $container.append($dropdown);\r\n      this.$dropdownContainer = $container;\r\n      return $container;\r\n    };\r\n\r\n    _proto._bindContainerResultHandlers = function _bindContainerResultHandlers(decorated, container) {\r\n      // These should only be bound once\r\n      if (this._containerResultsHandlersBound) {\r\n        return;\r\n      }\r\n\r\n      let self = this;\r\n      container.$modal = this.$modal;\r\n      container.on('results:all', function () {\r\n        var _self$$search$;\r\n\r\n        self._updateDropdown();\r\n\r\n        (_self$$search$ = self.$search[0]) == null ? void 0 : _self$$search$.focus();\r\n      });\r\n      container.on('results:append', function () {\r\n        self._updateDropdown();\r\n      });\r\n      container.on('results:message', function () {\r\n        self._updateDropdown();\r\n      });\r\n      container.on('select', function (e) {\r\n        var _e$originalEvent;\r\n\r\n        let target = (_e$originalEvent = e.originalEvent) == null ? void 0 : _e$originalEvent.currentTarget;\r\n        target == null ? void 0 : target.classList.add('select2-results__option--selected');\r\n\r\n        self._updateDropdown();\r\n      });\r\n      container.on('unselect', function (e) {\r\n        var _e$originalEvent2;\r\n\r\n        let target = (_e$originalEvent2 = e.originalEvent) == null ? void 0 : _e$originalEvent2.currentTarget;\r\n        target == null ? void 0 : target.classList.remove('select2-results__option--selected');\r\n\r\n        self._updateDropdown();\r\n      });\r\n      this._containerResultsHandlersBound = true;\r\n    };\r\n\r\n    _proto._updateDropdown = function _updateDropdown() {\r\n      if (!this.$modal.find(this.$dropdownContainer)[0]) this.$modal.find('.modal-body').children().detach().end().append(this.$dropdownContainer);\r\n    };\r\n\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _this$$modal;\r\n\r\n      let self = this,\r\n          oldValue = this.$element.val();\r\n      this.$dropdownContainer.appendTo(this.options.get('dropdownParent'));\r\n      (_this$$modal = this.$modal) != null ? _this$$modal : this.$modal = $__default[\"default\"]('#ew-modal-lookup-dialog');\r\n\r\n      this._updateDropdown();\r\n\r\n      this.$modal.find('.modal-title').empty().append(ew.language.phrase('LookupTitle').replace('%s', this.$element.data('caption')));\r\n      this.$modal.find('.modal-footer button[data-value]').off().on('click', function () {\r\n        if (!$__default[\"default\"](this).data('value')) // Cancel\r\n          self.$element.val(oldValue).trigger('change');\r\n      });\r\n      this.$modal.modal('show').on('hidden.bs.modal', function (event) {\r\n        self.$container.removeClass('select2-container--open');\r\n      }).draggable(this.options.get('draggableOptions'));\r\n    };\r\n\r\n    return ModalAttachBody;\r\n  }();\n\n  let AttachBody$1 = $__default[\"default\"].fn.select2.amd.require._defined['select2/dropdown/attachBody'];\r\n  /**\r\n   * Select2 AttachBody for table header filter\r\n   */\r\n\r\n  let FilterAttachBody = /*#__PURE__*/function (_AttachBody) {\r\n    _inheritsLoose(FilterAttachBody, _AttachBody);\r\n\r\n    // Constructor\r\n    function FilterAttachBody(decorated, $element, options) {\r\n      return _AttachBody.call(this, decorated, $element, options) || this;\r\n    } // Override bind()\r\n\r\n    var _proto = FilterAttachBody.prototype;\r\n\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n      container.on('open', function () {\r\n        self._showDropdown(); // Must bind after the results handlers to ensure correct sizing\r\n\r\n        self._bindContainerResultHandlers(container);\r\n      });\r\n      container.on('close', function () {\r\n        self._hideDropdown();\r\n      });\r\n      this.$dropdownContainer.on('mousedown', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    } // Override _positionDropdown()\r\n    ;\r\n\r\n    _proto._positionDropdown = function _positionDropdown() {\r\n      var _this$_popper;\r\n\r\n      (_this$_popper = this._popper) == null ? void 0 : _this$_popper.update();\r\n    } // Override _resizeDropdown()\r\n    ;\r\n\r\n    _proto._resizeDropdown = function _resizeDropdown() {\r\n      var css = {\r\n        width: this.$container.outerWidth(false) + 'px'\r\n      };\r\n\r\n      if (this.options.get('dropdownAutoWidth')) {\r\n        css.minWidth = css.width;\r\n        css.position = 'relative';\r\n        css.width = 'auto';\r\n      }\r\n\r\n      this.$dropdown.css(css);\r\n    } // Override _showDropdown()\r\n    ;\r\n\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _dropdownButton$close, _this$_popper2;\r\n\r\n      this.$dropdownContainer.appendTo(this.$dropdownParent); // Footer\r\n\r\n      let self = this,\r\n          oldValue = this.$element.val(),\r\n          $footer = $__default[\"default\"]('#ew-filter-dropdown-footer').contents().clone();\r\n      $footer.find('.ew-filter-btn[data-value]').off().on('click', function (e) {\r\n        let value = $__default[\"default\"](this).data('value');\r\n\r\n        if (value) {\r\n          // OK\r\n          ew.forms.get(self.$element[0].form).submit();\r\n        } else {\r\n          // Cancel\r\n          self.$element.val(oldValue).trigger('change');\r\n        }\r\n\r\n        self.$element.select2('close');\r\n      });\r\n      $footer.find('.ew-filter-clear').off().on('click', e => self.$element.data('select2').selection._handleClear(e));\r\n      let $filterDropdown = this.$dropdownContainer.find('.ew-filter-dropdown');\r\n      if (!$filterDropdown.find('.ew-filter-btn')[0]) $filterDropdown.append($footer); // Popper\r\n\r\n      var dropdownButton = document.querySelector('.ew-filter-dropdown-btn[data-table=' + this.$element.data('table') + '][data-field=' + this.$element.data('field') + ']'),\r\n          reference = (_dropdownButton$close = dropdownButton.closest(\".ew-table-header-cell\")) != null ? _dropdownButton$close : dropdownButton.closest(\".ew-table-header-btn\");\r\n      (_this$_popper2 = this._popper) != null ? _this$_popper2 : this._popper = Popper.createPopper(reference, this.$dropdownContainer[0], {\r\n        placement: ew.IS_RTL ? 'bottom-end' : 'bottom-start',\r\n        modifiers: [{\r\n          name: 'flip',\r\n          enabled: true\r\n        }, {\r\n          name: 'preventOverflow',\r\n          enabled: true\r\n        }]\r\n      });\r\n\r\n      this._positionDropdown();\r\n\r\n      this._resizeDropdown();\r\n    } // Override position()\r\n    ;\r\n\r\n    _proto.position = function position(decorated, $dropdown, $container) {\r\n      // Clone all of the container classes\r\n      $dropdown.attr('class', $container.attr('class'));\r\n      $dropdown[0].classList.remove('select2');\r\n      $dropdown[0].classList.add('select2-container--open');\r\n      this.$container = $container;\r\n    };\r\n\r\n    // Override destroy()\r\n    _proto.destroy = function destroy(decorated) {\r\n      var _this$_popper3;\r\n\r\n      _AttachBody.prototype.destroy.call(this, decorated);\r\n\r\n      (_this$_popper3 = this._popper) == null ? void 0 : _this$_popper3.destroy();\r\n      this._popper = null;\r\n    };\r\n\r\n    return FilterAttachBody;\r\n  }(AttachBody$1);\n\n  let AttachBody = $__default[\"default\"].fn.select2.amd.require._defined['select2/dropdown/attachBody'];\r\n  /**\r\n   * Select2 AttachBody for dropdown\r\n   */\r\n\r\n  let DropdownAttachBody = /*#__PURE__*/function (_AttachBody) {\r\n    _inheritsLoose(DropdownAttachBody, _AttachBody);\r\n\r\n    // Constructor\r\n    function DropdownAttachBody(decorated, $element, options) {\r\n      return _AttachBody.call(this, decorated, $element, options) || this;\r\n    } // Override bind()\r\n\r\n    var _proto = DropdownAttachBody.prototype;\r\n\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n      container.on('open', function () {\r\n        self._showDropdown(); // Must bind after the results handlers to ensure correct sizing\r\n\r\n        self._bindContainerResultHandlers(container);\r\n      });\r\n      container.on('close', function () {\r\n        self._hideDropdown();\r\n      });\r\n      this.$dropdownContainer.on('mousedown', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    } // Override _showDropdown()\r\n    ;\r\n\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _this$_popper;\r\n\r\n      this.$dropdownContainer.appendTo(this.$dropdownParent);\r\n      (_this$_popper = this._popper) != null ? _this$_popper : this._popper = Popper.createPopper(this.$element.parent().find('.select2-container')[0], this.$dropdownContainer[0], {\r\n        placement: ew.IS_RTL ? 'bottom-end' : 'bottom-start',\r\n        modifiers: [{\r\n          name: 'flip',\r\n          enabled: true\r\n        }, {\r\n          name: 'preventOverflow',\r\n          enabled: true\r\n        }]\r\n      });\r\n\r\n      this._positionDropdown();\r\n\r\n      this._resizeDropdown();\r\n    } // Override _positionDropdown()\r\n    ;\r\n\r\n    _proto._positionDropdown = function _positionDropdown() {\r\n      var _this$_popper2;\r\n\r\n      (_this$_popper2 = this._popper) == null ? void 0 : _this$_popper2.update();\r\n    } // Override position()\r\n    ;\r\n\r\n    _proto.position = function position(decorated, $dropdown, $container) {\r\n      // Clone all of the container classes\r\n      $dropdown.attr('class', $container.attr('class'));\r\n      $dropdown[0].classList.remove('select2');\r\n      $dropdown[0].classList.add('select2-container--open');\r\n      this.$container = $container;\r\n    };\r\n\r\n    // Override destroy()\r\n    _proto.destroy = function destroy(decorated) {\r\n      var _this$_popper3;\r\n\r\n      _AttachBody.prototype.destroy.call(this, decorated);\r\n\r\n      (_this$_popper3 = this._popper) == null ? void 0 : _this$_popper3.destroy();\r\n      this._popper = null;\r\n    };\r\n\r\n    return DropdownAttachBody;\r\n  }(AttachBody);\n\n  let _defined$1 = $__default[\"default\"].fn.select2.amd.require._defined,\r\n      AllowClear$1 = _defined$1['select2/selection/allowClear'],\r\n      Utils$1 = _defined$1['select2/utils'];\r\n  /**\r\n   * Select2 AttachBody for table header filter\r\n   */\r\n\r\n  let FilterAllowClear = /*#__PURE__*/function (_AllowClear) {\r\n    _inheritsLoose(FilterAllowClear, _AllowClear);\r\n\r\n    function FilterAllowClear() {\r\n      return _AllowClear.apply(this, arguments) || this;\r\n    }\r\n\r\n    var _proto = FilterAllowClear.prototype;\r\n\r\n    // Override _handleClear\r\n    _proto._handleClear = function _handleClear(_, evt) {\r\n      // Ignore the event if it is disabled\r\n      if (this.isDisabled()) {\r\n        return;\r\n      }\r\n\r\n      var $clear = this.$selection.find('.select2-selection__clear'); // Ignore the event if nothing has been selected\r\n\r\n      if ($clear.length === 0) {\r\n        return;\r\n      }\r\n\r\n      evt.stopPropagation();\r\n      var data = Utils$1.GetData($clear[0], 'data');\r\n      var previousVal = this.$element.val();\r\n      this.$element.val(this.placeholder.id);\r\n      var unselectData = {\r\n        data: data\r\n      };\r\n      this.trigger('clear', unselectData);\r\n\r\n      if (unselectData.prevented) {\r\n        this.$element.val(previousVal);\r\n        return;\r\n      }\r\n\r\n      for (var d = 0; d < data.length; d++) {\r\n        unselectData = {\r\n          data: data[d]\r\n        }; // Trigger the `unselect` event, so people can prevent it from being\r\n        // cleared.\r\n\r\n        this.trigger('unselect', unselectData); // If the event was prevented, don't clear it out.\r\n\r\n        if (unselectData.prevented) {\r\n          this.$element.val(previousVal);\r\n          return;\r\n        }\r\n      }\r\n\r\n      this.$element.trigger('input').trigger('change'); //***this.trigger('toggle', {});\r\n    };\r\n\r\n    return FilterAllowClear;\r\n  }(AllowClear$1);\n\n  /**\r\n   * Select2 decorator for MultipleSelection\r\n   */\r\n  let Select2MultipleSelectionDecorator = /*#__PURE__*/function () {\r\n    function Select2MultipleSelectionDecorator() {}\r\n\r\n    var _proto = Select2MultipleSelectionDecorator.prototype;\r\n\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      decorated.call(this, container, $container);\r\n      this.$selection.on('click', '.select2-selection__choice__remove', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    };\r\n\r\n    return Select2MultipleSelectionDecorator;\r\n  }();\n\n  /**\r\n   * Select2 decorator for SelectAdapter\r\n   */\r\n  let Select2DataAdapterDecorator = /*#__PURE__*/function () {\r\n    function Select2DataAdapterDecorator() {}\r\n\r\n    var _proto = Select2DataAdapterDecorator.prototype;\r\n\r\n    _proto.option = function option(decorated, data) {\r\n      var _data$element;\r\n\r\n      var text = data.text,\r\n          html = (_data$element = data.element) == null ? void 0 : _data$element.innerHTML,\r\n          $option = decorated.call(this, data); // Check HTML\r\n\r\n      if (text.startsWith('<') && text.endsWith('>')) $option.html(text);else if (html && html != text) $option.html(html);\r\n      return $option;\r\n    };\r\n\r\n    return Select2DataAdapterDecorator;\r\n  }();\n\n  let _defined = $.fn.select2.amd.require._defined,\r\n      ResultsList = _defined['select2/results'],\r\n      SingleSelection = _defined['select2/selection/single'],\r\n      MultipleSelection = _defined['select2/selection/multiple'],\r\n      Placeholder = _defined['select2/selection/placeholder'],\r\n      AllowClear = _defined['select2/selection/allowClear'],\r\n      SelectionSearch = _defined['select2/selection/search'],\r\n      EventRelay = _defined['select2/selection/eventRelay'],\r\n      Utils = _defined['select2/utils'],\r\n      Translation = _defined['select2/translation'],\r\n      SelectData = _defined['select2/data/select'],\r\n      ArrayData = _defined['select2/data/array'],\r\n      AjaxData = _defined['select2/data/ajax'],\r\n      Tags = _defined['select2/data/tags'],\r\n      Tokenizer = _defined['select2/data/tokenizer'],\r\n      MinimumInputLength = _defined['select2/data/minimumInputLength'],\r\n      MaximumInputLength = _defined['select2/data/maximumInputLength'],\r\n      MaximumSelectionLength = _defined['select2/data/maximumSelectionLength'],\r\n      Dropdown = _defined['select2/dropdown'],\r\n      DropdownSearch = _defined['select2/dropdown/search'],\r\n      HidePlaceholder = _defined['select2/dropdown/hidePlaceholder'],\r\n      InfiniteScroll = _defined['select2/dropdown/infiniteScroll'],\r\n      // AttachBody = _defined['select2/dropdown/attachBody'],\r\n  MinimumResultsForSearch = _defined['select2/dropdown/minimumResultsForSearch'],\r\n      SelectOnClose = _defined['select2/dropdown/selectOnClose'],\r\n      CloseOnSelect = _defined['select2/dropdown/closeOnSelect'],\r\n      DropdownCSS = _defined['select2/dropdown/dropdownCss'],\r\n      TagsSearchHighlight = _defined['select2/dropdown/tagsSearchHighlight'],\r\n      Defaults = _defined['select2/defaults']; // Override select2 Defaults\r\n\r\n  Defaults.apply = function (options) {\r\n    options = $.extend(true, {}, this.defaults, options);\r\n\r\n    if (options.dataAdapter == null) {\r\n      if (options.ajax != null) {\r\n        options.dataAdapter = AjaxData;\r\n      } else if (options.data != null) {\r\n        options.dataAdapter = ArrayData;\r\n      } else {\r\n        options.dataAdapter = SelectData;\r\n      }\r\n\r\n      options.dataAdapter = Utils.Decorate( // Override\r\n      options.dataAdapter, Select2DataAdapterDecorator);\r\n\r\n      if (options.minimumInputLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, MinimumInputLength);\r\n      }\r\n\r\n      if (options.maximumInputLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, MaximumInputLength);\r\n      }\r\n\r\n      if (options.maximumSelectionLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, MaximumSelectionLength);\r\n      }\r\n\r\n      if (options.tags) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, Tags);\r\n      }\r\n\r\n      if (options.tokenSeparators != null || options.tokenizer != null) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, Tokenizer);\r\n      }\r\n    }\r\n\r\n    if (options.resultsAdapter == null) {\r\n      options.resultsAdapter = ResultsList; // Override\r\n\r\n      if (options.columns > 0 && options.customOption) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, Select2ResultsDecorator);\r\n\r\n        if (options.iconClass && options.multiple && options.templateResult == ew.selectOptions.templateResult) {\r\n          options._templateResult = options.templateResult;\r\n\r\n          options.templateResult = result => result.loading ? result.text : '<div class=\"form-check-input ew-dropdown-check-input\"></div><label class=\"' + options.iconClass + ' ew-dropdown-check-label\">' + options._templateResult(result) + '</label>';\r\n        }\r\n      } else if (options.modal || options.filter) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, ModalResults);\r\n      }\r\n\r\n      if (options.ajax != null) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, InfiniteScroll);\r\n      }\r\n\r\n      if (options.placeholder != null) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, HidePlaceholder);\r\n      }\r\n\r\n      if (options.selectOnClose) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, SelectOnClose);\r\n      }\r\n\r\n      if (options.tags) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, TagsSearchHighlight);\r\n      }\r\n    }\r\n\r\n    if (options.dropdownAdapter == null) {\r\n      if (options.modal || options.filter) {\r\n        options.dropdownAdapter = Utils.Decorate(Dropdown, DropdownSearch);\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownSearchDecorator);\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, ModalSearch);\r\n      } else {\r\n        options.dropdownAdapter = Dropdown;\r\n\r\n        if (!options.multiple) {\r\n          options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownSearch);\r\n          options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownSearchDecorator);\r\n        }\r\n      }\r\n\r\n      if (options.minimumResultsForSearch !== 0) {\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, MinimumResultsForSearch);\r\n      }\r\n\r\n      if (options.closeOnSelect) {\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, CloseOnSelect);\r\n      }\r\n\r\n      if (options.dropdownCssClass != null) {\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownCSS);\r\n      }\r\n\r\n      options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, options.modal ? ModalAttachBody : options.filter ? FilterAttachBody : options.dropdown ? DropdownAttachBody : Select2AttachBody // Override\r\n      );\r\n    }\r\n\r\n    if (options.selectionAdapter == null) {\r\n      if (options.multiple) {\r\n        options.selectionAdapter = MultipleSelection;\r\n        options.selectionAdapter = Utils.Decorate( // Override\r\n        options.selectionAdapter, Select2MultipleSelectionDecorator);\r\n      } else {\r\n        options.selectionAdapter = SingleSelection;\r\n      } // Add the placeholder mixin if a placeholder was specified\r\n\r\n      if (options.placeholder != null) {\r\n        options.selectionAdapter = Utils.Decorate(options.selectionAdapter, Placeholder);\r\n      }\r\n\r\n      if (options.allowClear) {\r\n        options.selectionAdapter = Utils.Decorate(options.selectionAdapter, options.filter ? FilterAllowClear : AllowClear);\r\n      }\r\n\r\n      if (options.multiple) {\r\n        options.selectionAdapter = Utils.Decorate(options.selectionAdapter, SelectionSearch);\r\n      }\r\n\r\n      options.selectionAdapter = Utils.Decorate(options.selectionAdapter, EventRelay);\r\n    }\r\n\r\n    options.translations = new Translation(Select2Language);\r\n    options.dir = ew.IS_RTL ? \"rtl\" : \"ltr\";\r\n    return options;\r\n  };\n\n  let currentUrl = new URL(window.location);\r\n  let forms = new Forms();\r\n  let $document$1 = $__default[\"default\"](document),\r\n      $body = $__default[\"default\"](\"body\");\r\n  let fieldContainerSelector = \".row, [id^=el_], [class^=el_]\"; // Set focus\r\n\r\n  Pace.on(\"done\", () => {\r\n    var _forms$get;\r\n\r\n    let form = document.querySelector(\".modal.show form.ew-form\") || document.querySelector(\"form.ew-form\");\r\n    if (form) (_forms$get = forms.get(form.id)) == null ? void 0 : _forms$get.tryFocus();\r\n  }); // Create select2\r\n\r\n  function createSelect(options) {\r\n    if (options.selectId.includes(\"$rowindex$\")) return;\r\n\r\n    if ($__default[\"default\"].isObject(options.data)) {\r\n      let lookup = new ew.AjaxLookup(options.data);\r\n      options.data = lookup.options.map(item => {\r\n        return {\r\n          id: item.lf,\r\n          text: lookup.formatResult({\r\n            lf: item.lf,\r\n            df: item.df,\r\n            df2: item.df2,\r\n            df3: item.df3,\r\n            df4: item.df4\r\n          })\r\n        };\r\n      });\r\n    }\r\n\r\n    if ($__default[\"default\"].isObject(options.ajax)) {\r\n      let limit = options.ajax.limit,\r\n          lookup = new ew.AjaxLookup({ ...options.ajax,\r\n        ...{\r\n          action: \"modal\"\r\n        }\r\n      });\r\n      options.ajax = {\r\n        url: params => {\r\n          let start = params.page ? (params.page - 1) * limit : -1;\r\n          return lookup.getUrl(params.term, start);\r\n        },\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: lookup.generateRequest.bind(lookup),\r\n        delay: options.debounce,\r\n        processResults: function (data) {\r\n          var _data$records$length, _data$records;\r\n\r\n          let self = this;\r\n          return {\r\n            results: lookup.transform(data).map(item => {\r\n              return {\r\n                id: item.lf,\r\n                text: lookup.formatResult({\r\n                  lf: item.lf,\r\n                  df: item.df,\r\n                  df2: item.df2,\r\n                  df3: item.df3,\r\n                  df4: item.df4\r\n                })\r\n              };\r\n            }),\r\n            pagination: {\r\n              more: self.container.$results.find(\".select2-results__option:not(.select2-results__option--load-more)\").length + ((_data$records$length = (_data$records = data.records) == null ? void 0 : _data$records.length) != null ? _data$records$length : 0) < lookup.recordCount\r\n            }\r\n          };\r\n        }\r\n      };\r\n    }\r\n\r\n    let args = {\r\n      name: options.name,\r\n      options\r\n    };\r\n    $document$1.trigger(\"select2\", [args]);\r\n    let $select = $__default[\"default\"](\"select[data-select2-id='\" + options.selectId + \"']\").select2(args.options);\r\n    $select.on(\"select2:open\", function () {\r\n      var _$$data$$dropdown$fin;\r\n\r\n      (_$$data$$dropdown$fin = $__default[\"default\"](this).data(\"select2\").$dropdown.find(\".select2-search__field\")[0]) == null ? void 0 : _$$data$$dropdown$fin.focus();\r\n    });\r\n\r\n    if ($__default[\"default\"].isObject(options.ajax)) {\r\n      $select.on(\"select2:opening\", function () {\r\n        $__default[\"default\"](this).data(\"select2\").$results.find(\".select2-results__option:not(.loading-results)\").remove();\r\n      });\r\n    }\r\n\r\n    if (options.minimumResultsForSearch === Infinity) {\r\n      $select.on(\"select2:opening select2:closing\", function () {\r\n        $__default[\"default\"](this).data(\"select2\").$dropdown.find(\".select2-search--dropdown\").addClass(\"select2-search--hide\");\r\n      });\r\n    }\r\n  } // Create modal lookup\r\n\r\n  function createModalLookup(options) {\r\n    if (options.selectId.includes(\"$rowindex$\")) return;\r\n\r\n    if ($__default[\"default\"].isObject(options.data)) {\r\n      let lookup = new ew.AjaxLookup(options.data);\r\n      options.data = lookup.options.map(item => {\r\n        return {\r\n          id: item.lf,\r\n          text: lookup.formatResult({\r\n            lf: item.lf,\r\n            df: item.df,\r\n            df2: item.df2,\r\n            df3: item.df3,\r\n            df4: item.df4\r\n          })\r\n        };\r\n      });\r\n    }\r\n\r\n    if ($__default[\"default\"].isObject(options.ajax)) {\r\n      let limit = options.ajax.limit,\r\n          lookup = new ew.AjaxLookup({ ...options.ajax,\r\n        ...{\r\n          action: \"modal\"\r\n        }\r\n      });\r\n      options.ajax = {\r\n        url: params => {\r\n          let start = params.page ? (params.page - 1) * limit : -1;\r\n          return lookup.getUrl(params.term, start);\r\n        },\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: lookup.generateRequest.bind(lookup),\r\n        delay: options.debounce,\r\n        processResults: function (data) {\r\n          var _data$records$length2, _data$records2;\r\n\r\n          let self = this;\r\n          return {\r\n            results: lookup.transform(data).map(item => {\r\n              return {\r\n                id: item.lf,\r\n                text: lookup.formatResult({\r\n                  lf: item.lf,\r\n                  df: item.df,\r\n                  df2: item.df2,\r\n                  df3: item.df3,\r\n                  df4: item.df4\r\n                })\r\n              };\r\n            }),\r\n            pagination: {\r\n              more: self.container.$results.find(\".select2-results__option:not(.select2-results__option--load-more)\").length + ((_data$records$length2 = (_data$records2 = data.records) == null ? void 0 : _data$records2.length) != null ? _data$records$length2 : 0) < lookup.recordCount\r\n            }\r\n          };\r\n        }\r\n      };\r\n    }\r\n\r\n    let $select = $__default[\"default\"](\"select[data-select2-id='\" + options.selectId + \"']\").select2(options);\r\n    $select.on(\"select2:open\", function () {\r\n      var _$$data$$dropdown$fin2;\r\n\r\n      (_$$data$$dropdown$fin2 = $__default[\"default\"](this).data(\"select2\").$dropdown.find(\".select2-search__field\").addClass(\"form-control\")[0]) == null ? void 0 : _$$data$$dropdown$fin2.focus();\r\n    });\r\n\r\n    if ($__default[\"default\"].isObject(options.ajax)) {\r\n      $select.on(\"select2:opening\", function () {\r\n        $__default[\"default\"](this).data(\"select2\").$results.find(\".select2-results__option:not(.loading-results)\").remove();\r\n      });\r\n    }\r\n  } // Create table header filter\r\n\r\n  function createFilter(options) {\r\n    if (options.selectId.includes(\"$rowindex$\")) return;\r\n\r\n    if ($__default[\"default\"].isObject(options.data)) {\r\n      let lookup = new ew.AjaxLookup(options.data);\r\n      options.data = lookup.options.map(item => {\r\n        return {\r\n          id: item.lf,\r\n          text: lookup.formatResult({\r\n            lf: item.lf,\r\n            df: item.df,\r\n            df2: item.df2,\r\n            df3: item.df3,\r\n            df4: item.df4\r\n          })\r\n        };\r\n      });\r\n    }\r\n\r\n    if ($__default[\"default\"].isObject(options.ajax)) {\r\n      let limit = options.ajax.limit,\r\n          lookup = new ew.AjaxLookup({ ...options.ajax,\r\n        ...{\r\n          action: \"modal\"\r\n        }\r\n      });\r\n      options.ajax = {\r\n        url: params => {\r\n          let start = params.page ? (params.page - 1) * limit : -1;\r\n          return lookup.getUrl(params.term, start);\r\n        },\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: lookup.generateRequest.bind(lookup),\r\n        delay: options.debounce,\r\n        processResults: function (data) {\r\n          var _data$records$length3, _data$records3;\r\n\r\n          let self = this;\r\n          return {\r\n            results: lookup.transform(data).map(item => {\r\n              return {\r\n                id: item.lf,\r\n                text: lookup.formatResult({\r\n                  lf: item.lf,\r\n                  df: item.df,\r\n                  df2: item.df2,\r\n                  df3: item.df3,\r\n                  df4: item.df4\r\n                })\r\n              };\r\n            }),\r\n            pagination: {\r\n              more: self.container.$results.find(\".select2-results__option:not(.select2-results__option--load-more)\").length + ((_data$records$length3 = (_data$records3 = data.records) == null ? void 0 : _data$records3.length) != null ? _data$records$length3 : 0) < lookup.recordCount\r\n            }\r\n          };\r\n        }\r\n      };\r\n    }\r\n\r\n    let $select = $__default[\"default\"](\"select[data-select2-id='\" + options.selectId + \"']\").select2(options);\r\n    $select.on(\"select2:open\", function () {\r\n      var _$$data$$dropdown$fin3;\r\n\r\n      (_$$data$$dropdown$fin3 = $__default[\"default\"](this).data(\"select2\").$dropdown.find(\".select2-search__field\").addClass(\"form-control\")[0]) == null ? void 0 : _$$data$$dropdown$fin3.focus({\r\n        preventScroll: options.preventScroll\r\n      }); // Do not scroll on focus by default\r\n    });\r\n\r\n    if ($__default[\"default\"].isObject(options.ajax)) {\r\n      $select.on(\"select2:opening\", function () {\r\n        $__default[\"default\"](this).data(\"select2\").$results.find(\".select2-results__option:not(.loading-results)\").remove();\r\n      });\r\n    }\r\n  } // Init icon tooltip\r\n\r\n  function initIcons(e) {\r\n    var _e$target;\r\n\r\n    let el = (_e$target = e == null ? void 0 : e.target) != null ? _e$target : document,\r\n        tooltipOptions = {\r\n      container: \"body\",\r\n      trigger: ew.IS_MOBILE ? \"manual\" : \"hover\",\r\n      placement: \"bottom\",\r\n      sanitizeFn: ew.sanitizeFn\r\n    };\r\n    $__default[\"default\"](el).find(\".ew-icon\").closest(\".btn\").each(function () {\r\n      let $this = $__default[\"default\"](this);\r\n\r\n      if ($this.hasClass(\"dropdown-toggle\")) {\r\n        let $p = $this.closest(\".btn-group\");\r\n\r\n        if ($p.children(\".btn\").length == 1) {\r\n          $p.tooltip({\r\n            title: this.title,\r\n            ...tooltipOptions\r\n          }).on(\"mouseleave\", e => {\r\n            var _bootstrap$Tooltip$ge;\r\n\r\n            return (_bootstrap$Tooltip$ge = bootstrap.Tooltip.getInstance(e.currentTarget)) == null ? void 0 : _bootstrap$Tooltip$ge.hide();\r\n          });\r\n          $this.next(\".dropdown-menu\").on(\"mouseover\", e => e.stopPropagation());\r\n        }\r\n      } else {\r\n        $this.tooltip(tooltipOptions);\r\n      }\r\n    });\r\n  } // Init password options\r\n\r\n  function initPasswordOptions(e) {\r\n    var _e$target2;\r\n\r\n    var el = (_e$target2 = e == null ? void 0 : e.target) != null ? _e$target2 : document;\r\n\r\n    if ($__default[\"default\"].fn.pStrength && typeof ew.MIN_PASSWORD_STRENGTH != \"undefined\") {\r\n      $__default[\"default\"](el).find(\".ew-password-strength\").each(function () {\r\n        var $this = $__default[\"default\"](this);\r\n        if (!$this.data(\"pStrength\")) $this.pStrength({\r\n          \"changeBackground\": false,\r\n          \"backgrounds\": [],\r\n          \"passwordValidFrom\": ew.MIN_PASSWORD_STRENGTH,\r\n          \"onPasswordStrengthChanged\": function (strength, percentage) {\r\n            var $pst = $__default[\"default\"](\"[id='\" + this.attr(\"data-password-strength\") + \"']\"),\r\n                // Do not use #\r\n            $pb = $pst.find(\".progress-bar\");\r\n\r\n            if (this.val() && !ew.isMaskedPassword(this)) {\r\n              var pct = percentage + \"%\",\r\n                  min = ew.MIN_PASSWORD_STRENGTH,\r\n                  valid = percentage >= min;\r\n\r\n              if (percentage < min * 0.25) {\r\n                $pb.addClass(\"bg-danger\").removeClass(\"bg-warning bg-info bg-success\");\r\n              } else if (percentage < min * 0.5) {\r\n                $pb.addClass(\"bg-warning\").removeClass(\"bg-danger bg-info bg-success\");\r\n              } else if (percentage < min * 0.75) {\r\n                $pb.addClass(\"bg-primary\").removeClass(\"bg-danger bg-warning bg-success\");\r\n              } else {\r\n                $pb.addClass(\"bg-success\").removeClass(\"bg-danger bg-warning bg-info\");\r\n              }\r\n\r\n              $pb.css(\"width\", pct);\r\n              if (percentage > min * 0.5) pct = ew.language.phrase(\"PasswordStrength\").replace(\"%p\", pct);\r\n              $pb.html(pct);\r\n              $pst.removeClass(\"d-none\");\r\n              this.data(\"validated\", valid);\r\n              if (valid) setValid(this[0]);\r\n            } else {\r\n              $pst.addClass(\"d-none\");\r\n              this.data(\"validated\", null);\r\n            }\r\n\r\n            $pst.width(this.outerWidth());\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    if ($__default[\"default\"].fn.pGenerator) {\r\n      $__default[\"default\"](el).find(\".ew-password-generator\").each(function () {\r\n        var $this = $__default[\"default\"](this);\r\n        if (!$this.data(\"pGenerator\")) $this.pGenerator({\r\n          \"passwordLength\": ew.GENERATE_PASSWORD_LENGTH,\r\n          \"uppercase\": ew.GENERATE_PASSWORD_UPPERCASE,\r\n          \"lowercase\": ew.GENERATE_PASSWORD_LOWERCASE,\r\n          \"numbers\": ew.GENERATE_PASSWORD_NUMBER,\r\n          \"specialChars\": ew.GENERATE_PASSWORD_SPECIALCHARS,\r\n          \"onPasswordGenerated\": function (pwd) {\r\n            $__default[\"default\"](\"#\" + this.attr(\"data-password-confirm\")).val(pwd);\r\n            $__default[\"default\"](\"#\" + this.attr(\"data-password-field\")).val(pwd).trigger(\"change\").trigger(\"focus\").triggerHandler(\"click\"); // Trigger click to remove \"is-invalid\" class (Do not use $this.data)\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * Get API action URL\r\n   * @param {string|string[]} action - Route as string or array, e.g. \"foo\", [\"foo\", \"1\"]\r\n   * @param {string|string[]|object} query - Search params, e.g. \"foo=1&bar=2\", [[\"foo\", \"1\"], [\"bar\", \"2\"]], {\"foo\": \"1\", \"bar\": \"2\"}\r\n   */\r\n\r\n  function getApiUrl(action, query) {\r\n    var url = ew.PATH_BASE + ew.API_URL,\r\n        params = new URLSearchParams(query),\r\n        qs = params.toString();\r\n\r\n    if ($__default[\"default\"].isString(action)) {\r\n      // Route as string\r\n      url += action ? action : \"\";\r\n    } else if (Array.isArray(action)) {\r\n      // Route as array\r\n      var route = action.map(function (v) {\r\n        return encodeURIComponent(v);\r\n      }).join(\"/\");\r\n      url += route ? route : \"\";\r\n    }\r\n\r\n    return url + (qs ? \"?\" + qs : \"\");\r\n  } // Sanitize URL\r\n\r\n  function sanitizeUrl(url) {\r\n    var ar = url.split(\"?\"),\r\n        search = ar[1];\r\n\r\n    if (search) {\r\n      var searchParams = new URLSearchParams(search);\r\n      searchParams.forEach((value, key) => {\r\n        value = decodeURIComponent(value);\r\n        if ([\"<>\", \"<=\", \">=\", \">\", \"<\"].includes(value)) searchParams.set(key, value);else searchParams.set(key, ew.sanitize(value));\r\n      });\r\n      search = searchParams.toString();\r\n    }\r\n\r\n    return ar[0] + (search ? \"?\" + search : \"\");\r\n  } // Set session timer\r\n\r\n  function setSessionTimer() {\r\n    var timeoutTime,\r\n        timer,\r\n        keepAliveTimer,\r\n        counter,\r\n        useKeepAlive = ew.SESSION_KEEP_ALIVE_INTERVAL > 0 || ew.IS_LOGGEDIN && ew.IS_AUTOLOGIN; // Keep alive\r\n\r\n    var keepAlive = () => {\r\n      $__default[\"default\"].get(getApiUrl(ew.API_SESSION_ACTION), {\r\n        \"rnd\": random()\r\n      }, token => {\r\n        if (token && $__default[\"default\"].isObject(token)) {\r\n          // PHP\r\n          ew.TOKEN_NAME = token[ew.TOKEN_NAME_KEY];\r\n          ew.ANTIFORGERY_TOKEN = token[ew.ANTIFORGERY_TOKEN_KEY];\r\n          if (token[\"JWT\"]) ew.API_JWT_TOKEN = token[\"JWT\"];\r\n        }\r\n      });\r\n    }; // Reset timer\r\n\r\n    var resetTimer = () => {\r\n      counter = ew.SESSION_TIMEOUT_COUNTDOWN;\r\n      timeoutTime = ew.SESSION_TIMEOUT - ew.SESSION_TIMEOUT_COUNTDOWN;\r\n\r\n      if (timeoutTime < 0) {\r\n        // Timeout now\r\n        timeoutTime = 0;\r\n        counter = ew.SESSION_TIMEOUT;\r\n      }\r\n\r\n      if (timer) timer.cancel(); // Clear timer\r\n    }; // Timeout\r\n\r\n    var timeout = () => {\r\n      if (keepAliveTimer) keepAliveTimer.cancel(); // Stop keep alive\r\n\r\n      if (counter > 0) {\r\n        let timerInterval;\r\n        let message = '<p class=\"text-danger\">' + ew.language.phrase(\"SessionWillExpire\") + '</p>';\r\n\r\n        if (message.includes(\"%m\") && message.includes(\"%s\")) {\r\n          message = message.replace(\"%m\", '<span class=\"ew-session-counter-minute\">' + Math.floor(counter / 60) + '</span>');\r\n          message = message.replace(\"%s\", '<span class=\"ew-session-counter-second\">' + counter % 60 + '</span>');\r\n        } else if (message.includes(\"%s\")) {\r\n          message = message.replace(\"%s\", '<span class=\"ew-session-counter-second\">' + counter + '</span>');\r\n        }\r\n\r\n        Swal.fire({ ...ew.sweetAlertSettings,\r\n          html: message,\r\n          showConfirmButton: true,\r\n          confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n          timer: counter * 1000,\r\n          timerProgressBar: true,\r\n          allowOutsideClick: false,\r\n          allowEscapeKey: false,\r\n          willOpen: () => {\r\n            timerInterval = setInterval(() => {\r\n              let content = Swal.getHtmlContainer(),\r\n                  min = content.querySelector(\".ew-session-counter-minute\"),\r\n                  sec = content.querySelector(\".ew-session-counter-second\"),\r\n                  timeleft = Math.round(Swal.getTimerLeft() / 1000);\r\n\r\n              if (min && sec) {\r\n                min.textContent = Math.floor(timeleft / 60);\r\n                sec.textContent = timeleft % 60;\r\n              } else if (sec) {\r\n                sec.textContent = timeleft;\r\n              }\r\n            }, 1000);\r\n          },\r\n          willClose: () => {\r\n            clearInterval(timerInterval);\r\n          }\r\n        }).then(result => {\r\n          if (result.value) {\r\n            // OK button pressed\r\n            keepAlive();\r\n            if (!useKeepAlive && ew.SESSION_TIMEOUT > 0) setTimer();\r\n          } else if (result.dismiss === Swal.DismissReason.timer) {\r\n            // Timeout\r\n            resetTimer();\r\n            window.location = sanitizeUrl(ew.TIMEOUT_URL + \"?expired=1\");\r\n          }\r\n        });\r\n      }\r\n    }; // Set timer\r\n\r\n    var setTimer = () => {\r\n      resetTimer(); // Reset timer first\r\n\r\n      timer = $__default[\"default\"].later(timeoutTime * 1000, null, timeout);\r\n    };\r\n\r\n    if (useKeepAlive) {\r\n      // Keep alive\r\n      var keepAliveInterval = ew.SESSION_KEEP_ALIVE_INTERVAL > 0 ? ew.SESSION_KEEP_ALIVE_INTERVAL : ew.SESSION_TIMEOUT - ew.SESSION_TIMEOUT_COUNTDOWN;\r\n      if (keepAliveInterval <= 0) keepAliveInterval = 60;\r\n      keepAliveTimer = $__default[\"default\"].later(keepAliveInterval * 1000, null, keepAlive, null, true); // Periodic\r\n    } else {\r\n      if (ew.SESSION_TIMEOUT > 0) // Set session timeout\r\n        setTimer();\r\n    }\r\n  } // Init export links\r\n\r\n  function initExportLinks(e) {\r\n    var _e$target3;\r\n\r\n    var el = (_e$target3 = e == null ? void 0 : e.target) != null ? _e$target3 : document;\r\n    $__default[\"default\"](el).find(\"a.ew-export-link[href]:not(.ew-email):not(.ew-print):not(.ew-xml)\").on(\"click\", function (e) {\r\n      var href = this.href;\r\n      if (href && href != \"#\") fileDownload(href);\r\n      e.preventDefault();\r\n    });\r\n  } // Init multi-select checkboxes\r\n\r\n  function initMultiSelectCheckboxes(e) {\r\n    var _e$target4;\r\n\r\n    var el = (_e$target4 = e == null ? void 0 : e.target) != null ? _e$target4 : document,\r\n        $el = $__default[\"default\"](el),\r\n        $cbs = $el.find(\"input[type=checkbox].ew-multi-select\");\r\n\r\n    var _update = function (id) {\r\n      var $els = $cbs.filter(\"[name^='\" + id + \"_']\"),\r\n          cnt = $els.length,\r\n          len = $els.filter(\":checked\").length;\r\n      $__default[\"default\"](\"input[type=checkbox]#\" + id).prop(\"checked\", len == cnt).prop(\"indeterminate\", len != cnt && len != 0);\r\n    };\r\n\r\n    $cbs.on(\"click\", e => _update(e.target.name.split(\"_\")[0]));\r\n    $el.find(\"input[type=checkbox].ew-priv:not(.ew-multi-select)\").each((i, el) => _update(el.id)); // Init\r\n  } // Download file\r\n\r\n  function fileDownload(href, data) {\r\n    let isHtml = href.includes(\"export=html\");\r\n    return Swal.fire({ ...ew.sweetAlertSettings,\r\n      showConfirmButton: false,\r\n      html: \"<p>\" + ew.language.phrase(\"Exporting\") + \"</p>\",\r\n      allowOutsideClick: false,\r\n      allowEscapeKey: false,\r\n      willOpen: () => {\r\n        Swal.showLoading();\r\n        $__default[\"default\"].ajax({\r\n          url: href,\r\n          type: data ? \"POST\" : \"GET\",\r\n          cache: false,\r\n          data: data || null,\r\n          xhrFields: {\r\n            responseType: isHtml ? \"text\" : \"blob\"\r\n          }\r\n        }).done((data, textStatus, jqXHR) => {\r\n          var url = URL.createObjectURL(isHtml ? new Blob([data], {\r\n            type: \"text/html\"\r\n          }) : data),\r\n              a = document.createElement(\"a\"),\r\n              cd = jqXHR.getResponseHeader(\"Content-Disposition\"),\r\n              m = cd.match(/\\bfilename=((['\"])(.+)\\2|([^;]+))/i);\r\n          a.style.display = \"none\";\r\n          a.href = url;\r\n          if (m) a.download = m[3] || m[4];\r\n          document.body.appendChild(a);\r\n          a.click();\r\n          $document$1.trigger(\"export\", [{\r\n            \"type\": \"done\",\r\n            \"url\": href,\r\n            \"objectUrl\": url\r\n          }]);\r\n          URL.revokeObjectURL(url);\r\n          Swal.close();\r\n        }).fail((jqXHR, textStatus, errorThrown) => {\r\n          var _Swal$getActions;\r\n\r\n          Swal.hideLoading();\r\n          Swal.update({\r\n            showConfirmButton: true\r\n          });\r\n          (_Swal$getActions = Swal.getActions()) == null ? void 0 : _Swal$getActions.classList.add(\"d-flex\");\r\n          Swal.showValidationMessage(\"<div class='text-danger'>\" + (errorThrown || ew.language.phrase(\"FailedToExport\")) + \"</div>\");\r\n          $document$1.trigger(\"export\", [{\r\n            \"type\": \"fail\",\r\n            \"url\": href\r\n          }]);\r\n        }).always(() => {\r\n          $document$1.trigger(\"export\", [{\r\n            \"type\": \"always\",\r\n            \"url\": href\r\n          }]);\r\n        });\r\n      }\r\n    });\r\n  } // Lazy load images\r\n\r\n  function lazyLoad(e) {\r\n    var _e$target5;\r\n\r\n    if (!ew.LAZY_LOAD) return;\r\n    var el = (_e$target5 = e == null ? void 0 : e.target) != null ? _e$target5 : document;\r\n    el.querySelectorAll(\"img.ew-lazy\").forEach((img, i) => {\r\n      if (ew.LAZY_LOAD_DELAY > 0) setTimeout(() => img.src = img.dataset.src, i * ew.LAZY_LOAD_DELAY);else img.src = img.dataset.src;\r\n    });\r\n    $document$1.trigger(\"lazyload\"); // All images loaded\r\n  } // Update select2 dropdown position\r\n\r\n  function updateDropdownPosition() {\r\n    var select = $__default[\"default\"](\".select2-container--open\").prev(\".ew-select\").data(\"select2\");\r\n\r\n    if (select) {\r\n      select.dropdown._positionDropdown();\r\n\r\n      select.dropdown._resizeDropdown();\r\n    }\r\n  } // Colorboxes\r\n\r\n  function initLightboxes(e) {\r\n    var _e$target6;\r\n\r\n    if (!ew.USE_COLORBOX) return;\r\n    var el = (_e$target6 = e == null ? void 0 : e.target) != null ? _e$target6 : document;\r\n    var settings = Object.assign({}, ew.lightboxSettings, {\r\n      title: ew.language.phrase(\"LightboxTitle\"),\r\n      current: ew.language.phrase(\"LightboxCurrent\"),\r\n      previous: ew.language.phrase(\"LightboxPrevious\"),\r\n      next: ew.language.phrase(\"LightboxNext\"),\r\n      close: ew.language.phrase(\"LightboxClose\"),\r\n      xhrError: ew.language.phrase(\"LightboxXhrError\"),\r\n      imgError: ew.language.phrase(\"LightboxImgError\")\r\n    });\r\n    $__default[\"default\"](el).find(\".ew-lightbox\").each(function () {\r\n      var $this = $__default[\"default\"](this);\r\n      $this.colorbox(Object.assign({\r\n        rel: $this.data(\"rel\")\r\n      }, settings));\r\n    });\r\n  } // PDFObjects\r\n\r\n  function initPdfObjects(e) {\r\n    var _e$target7;\r\n\r\n    if (!ew.EMBED_PDF) return;\r\n    var el = (_e$target7 = e == null ? void 0 : e.target) != null ? _e$target7 : document,\r\n        options = Object.assign({}, ew.PDFObjectOptions);\r\n    $__default[\"default\"](el).find(\".ew-pdfobject\").not(\":has(.pdfobject)\").each(function () {\r\n      // Not already embedded\r\n      var $this = $__default[\"default\"](this),\r\n          url = $this.data(\"url\"),\r\n          html = $this.html();\r\n      if (url) PDFObject.embed(url, this, Object.assign(options, {\r\n        fallbackLink: html\r\n      }));\r\n    });\r\n  } // Tooltips and popovers\r\n\r\n  function initTooltips(e) {\r\n    var _e$target8;\r\n\r\n    var el = (_e$target8 = e == null ? void 0 : e.target) != null ? _e$target8 : document,\r\n        $el = $__default[\"default\"](el);\r\n    $el.find(\"input[data-bs-toggle=tooltip],textarea[data-bs-toggle=tooltip],select[data-bs-toggle=tooltip]\").each(function () {\r\n      var $this = $__default[\"default\"](this);\r\n      $this.tooltip(Object.assign({\r\n        html: true,\r\n        placement: \"bottom\",\r\n        sanitizeFn: ew.sanitizeFn\r\n      }, $this.data()));\r\n    });\r\n    $el.find(\"a.ew-tooltip-link\").each(tooltip); // Init tooltips\r\n\r\n    $el.find(\".ew-tooltip\").tooltip({\r\n      placement: \"bottom\",\r\n      sanitizeFn: ew.sanitizeFn\r\n    });\r\n    $el.find(\".ew-popover\").popover({\r\n      sanitizeFn: ew.sanitizeFn\r\n    });\r\n  } // Parse JSON\r\n\r\n  function parseJson(data) {\r\n    if ($__default[\"default\"].isString(data)) {\r\n      try {\r\n        return JSON.parse(data);\r\n      } catch (e) {\r\n        return undefined;\r\n      }\r\n    }\r\n\r\n    return data;\r\n  } // Change search operator\r\n\r\n  function searchOperatorChanged(el) {\r\n    var $el = $__default[\"default\"](el),\r\n        $p = $el.closest(\"[id^=r_], [id^=xs_]\"),\r\n        parm = el.id.substr(2),\r\n        $fld = $p.find(\".ew-search-field\"),\r\n        $fld2 = $p.find(\".ew-search-field2\"),\r\n        $y = $fld2.find(\"[name='y_\" + parm + \"'], [name='y_\" + parm + \"[]']\"),\r\n        hasY = $y.length,\r\n        $cond = $p.find(\".ew-search-cond\"),\r\n        hasCond = $cond.length,\r\n        // Has condition and operator 2\r\n    $and = $p.find(\".ew-search-and\"),\r\n        $opr = $p.find(\".ew-search-operator\"),\r\n        opr = $opr.find(\"[name='z_\" + parm + \"']\").val(),\r\n        $opr2 = $p.find(\".ew-search-operator2\"),\r\n        opr2 = $opr2.find(\"[name='w_\" + parm + \"']\").val(),\r\n        isBetween = opr == \"BETWEEN\",\r\n        // Can only be operator 1\r\n    isNullOpr = [\"IS NULL\", \"IS NOT NULL\"].includes(opr),\r\n        isNullOpr2 = [\"IS NULL\", \"IS NOT NULL\"].includes(opr2),\r\n        hideOpr2 = !hasY || isBetween,\r\n        hideX = isNullOpr,\r\n        hideY = !isBetween && (!hasCond || isNullOpr2);\r\n    $cond.toggleClass(\"d-none\", hideOpr2).find(\":input\").prop(\"disabled\", hideOpr2);\r\n    $and.toggleClass(\"d-none\", !isBetween);\r\n    $opr2.toggleClass(\"d-none\", hideOpr2).find(\":input\").prop(\"disabled\", hideOpr2);\r\n    $fld.toggleClass(\"d-none\", hideX).find(\":input\").prop(\"disabled\", hideX);\r\n    $fld2.toggleClass(\"d-none\", hideY).find(\":input\").prop(\"disabled\", hideY);\r\n  } // Init forms\r\n\r\n  function initForms(e) {\r\n    var _e$target9;\r\n\r\n    let el = (_e$target9 = e == null ? void 0 : e.target) != null ? _e$target9 : document,\r\n        $el = $__default[\"default\"](el),\r\n        ids = ew.forms.ids();\r\n\r\n    for (let id of ids) {\r\n      if ($el.find(\"#\" + id)) forms.get(id).init();\r\n    }\r\n  } // Is function\r\n\r\n  function isFunction$2(x) {\r\n    return typeof x === \"function\";\r\n  }\r\n  /**\r\n   * Alert (OK button only)\r\n   *\r\n   * @param {string} msg - Message\r\n   * @param {callback} [cb] - Callback function\r\n   * @param {string} [type] - CSS class (see https://getbootstrap.com/docs/5.0/utilities/colors/#color)\r\n   * @returns {Promise}\r\n   */\r\n\r\n  function _alert(msg, cb, type) {\r\n    let config = $__default[\"default\"].isObject(msg) ? msg : {};\r\n    msg = $__default[\"default\"].isString(msg) ? msg : \"\";\r\n    type = $__default[\"default\"].isString(cb) ? cb : type;\r\n    config = $__default[\"default\"].extend(true, {}, ew.sweetAlertSettings, {\r\n      html: msg,\r\n      confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n      customClass: {\r\n        htmlContainer: \"ew-swal2-html-container text-\" + (type || \"danger\")\r\n      }\r\n    }, config);\r\n    let args = {\r\n      config,\r\n      type,\r\n      show: true\r\n    };\r\n    $document$1.trigger(\"alert\", [args]);\r\n    if (args.show) return Swal.fire(args.config).then(result => isFunction$2(cb) ? cb(result.isConfirmed) : result);\r\n  }\r\n  /**\r\n   * Prompt/Confirm/Alert\r\n   *\r\n   * @param {string|Object} cfg - Message or config object\r\n   * @param {callback} [cb] - Callback function\r\n   * @returns {Promise}\r\n   */\r\n\r\n  function _prompt(cfg, cb) {\r\n    var _config, _config$inputValidato;\r\n\r\n    let config = $__default[\"default\"].isObject(cfg) ? cfg : {};\r\n    config = $__default[\"default\"].extend(true, {}, ew.sweetAlertSettings, {\r\n      html: $__default[\"default\"].isString(cfg) ? cfg : \"\",\r\n      showCancelButton: true,\r\n      confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n      cancelButtonText: ew.language.phrase(\"CancelBtn\")\r\n    }, config); // Confirm/Alert\r\n\r\n    if (config.input) // Prompt\r\n      (_config$inputValidato = (_config = config).inputValidator) != null ? _config$inputValidato : _config.inputValidator = value => {\r\n        if (!value) return ew.language.phrase(\"EnterValue\");\r\n      };\r\n    return Swal.fire(config).then(result => isFunction$2(cb) ? cb(result.value) : result);\r\n  }\r\n\r\n  function toast(options) {\r\n    options = Object.assign({}, ew.toastOptions, options);\r\n    $document$1.Toasts(\"create\", options);\r\n    var position = options.position,\r\n        $container = $__default[\"default\"](\"#toastsContainer\" + position[0].toUpperCase() + position.substring(1));\r\n    return $container.children().first();\r\n  }\r\n  /**\r\n   * Show toast\r\n   *\r\n   * @param {string} message - Message\r\n   * @param {string} type - CSS class: \"muted|primary|success|info|warning|danger\"\r\n   */\r\n\r\n  function showToast(message, type) {\r\n    if (!message) return;\r\n    type = type || \"danger\";\r\n    let args = {\r\n      message,\r\n      type,\r\n      show: true\r\n    };\r\n    $document$1.trigger(\"toast\", [args]);\r\n    if (!args.show) return;\r\n    ({\r\n      message,\r\n      type\r\n    } = args);\r\n    return toast({\r\n      class: \"ew-toast bg-\" + type,\r\n      title: ew.language.phrase(type),\r\n      body: message,\r\n      autohide: type == \"success\" ? ew.autoHideSuccessMessage : false,\r\n      // Autohide for success message\r\n      delay: type == \"success\" ? ew.autoHideSuccessMessageDelay : 500\r\n    });\r\n  } // Get form.ew-form or div.ew-form HTML element\r\n\r\n  function getForm(el) {\r\n    if (el instanceof Form) return el.$element[0];\r\n    var $el = $__default[\"default\"](el),\r\n        $f = $el.closest(\".ew-form\");\r\n    if (!$f[0]) // Element not inside form\r\n      $f = $el.closest(\".ew-grid, .ew-multi-column-grid\").find(\".ew-form\").not(\".ew-pager-form\");\r\n    return $f[0];\r\n  } // Check form data\r\n\r\n  function hasFormData(form) {\r\n    var selector = \"[name^=x_],[name^=y_],[name^=z_],[name^=w_],[name=psearch]\",\r\n        els = $__default[\"default\"](form).find(selector).filter(\":enabled\").get();\r\n\r\n    for (var i = 0, len = els.length; i < len; i++) {\r\n      var el = els[i];\r\n\r\n      if (/^(z|w)_/.test(el.name)) {\r\n        if (/^IS/.test($__default[\"default\"](el).val())) return true;\r\n      } else if (el.type == \"checkbox\" || el.type == \"radio\") {\r\n        if (el.checked) return true;\r\n      } else if (el.type == \"select-one\" || el.type == \"select-multiple\") {\r\n        if (!!$__default[\"default\"](el).val()) return true;\r\n      } else if ([\"text\", \"textarea\", \"password\", \"search\", \"color\", \"date\", \"datetime-local\", \"datetime\", \"email\", \"hidden\", \"month\", \"number\", \"range\", \"tel\", \"time\", \"url\", \"week\"].includes(el.type)) {\r\n        if (el.value) return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Set search type\r\n   *\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns false\r\n   */\r\n\r\n  function setSearchType(el) {\r\n    var val = el.dataset.searchType,\r\n        phraseId = \"Auto\";\r\n    if (val == \"=\") phraseId = \"Exact\";else if (val == \"AND\") phraseId = \"All\";else if (val == \"OR\") phraseId = \"Any\";\r\n    el.closest(\".ew-basic-search\").querySelector(\"input.ew-basic-search-type\").value = val || \"\";\r\n    el.closest(\".dropdown-menu\").querySelectorAll(\".dropdown-item\").forEach(item => item.classList.remove(\"active\"));\r\n    el.closest(\".dropdown-item\").classList.add(\"active\");\r\n    var searchType = el.closest(\".input-group\").querySelector(\"#searchtype\"),\r\n        text = ew.language.phrase(\"QuickSearch\" + phraseId + \"Short\");\r\n    searchType.innerHTML = text;\r\n    searchType.classList.toggle(\"me-2\", !!text);\r\n    return false;\r\n  }\r\n  /**\r\n   * Update a dynamic selection list\r\n   *\r\n   * @this {Form|HTMLElement} Form or parent element\r\n   * @param {(HTMLElement|HTMLElement[]|string|string[])} obj - Target HTML element(s) or the ID of the element(s)\r\n   * @param {(string[]|array[])} parentId - Parent field element names or data\r\n   * @param {(boolean|null)} async - async(true) or sync(false) or non-Ajax(null)\r\n   * @param {boolean} change - Trigger onchange event\r\n   * @returns {Promise}\r\n   */\r\n\r\n  function updateOptions(obj, parentId, async, change) {\r\n    var _batch$send;\r\n\r\n    var f = this.$element ? this.$element[0] : this.form ? this.form : null; // Get form/div element from this\r\n\r\n    if (!f) return;\r\n    var frm = this.htmlForm ? this : forms.get(f.id); // Get Form object\r\n\r\n    if (!frm) return;\r\n    if (this.form && $__default[\"default\"].isUndefined(obj)) // Target unspecified\r\n      obj = forms.get(this).getList(this.name || this.id).childFields.slice(); // Clone\r\n    else if ($__default[\"default\"].isString(obj)) obj = getElements(obj, f);\r\n    if (!obj || Array.isArray(obj) && obj.length == 0) return;\r\n    var self = this,\r\n        batch = new Batch();\r\n\r\n    if (Array.isArray(obj) && $__default[\"default\"].isString(obj[0])) {\r\n      // Array of id\r\n      var els = [];\r\n\r\n      for (var i = 0, len = obj.length; i < len; i++) {\r\n        var ar = obj[i].split(\" \");\r\n\r\n        if (ar.length == 1 && self.form) {\r\n          // Parent/Child fields in the same table\r\n          var m = getId(self, false).match(/^([xy]\\d*_)/);\r\n          if (m) obj[i] = obj[i].replace(/^([xy]\\d*_)/, m[1]);\r\n        }\r\n\r\n        var el = getElements(obj[i], f),\r\n            names = [];\r\n        if (isTextbox(el) || isFilter(el)) // Search text box or filter\r\n          continue;\r\n        els.push(el);\r\n\r\n        if (ar.length == 2 && Array.isArray(el)) {\r\n          // Check if id is \"tblvar fldvar\" and multiple inputs\r\n          var $el = $__default[\"default\"](el);\r\n          $el.each(function () {\r\n            if (!names.includes(this.name)) {\r\n              names.push(this.name);\r\n              var $elf = $el.filter(\"[name='\" + this.name + \"']\"),\r\n                  typ = $elf.attr(\"type\"),\r\n                  elf = [\"radio\", \"checkbox\"].includes(typ) ? $elf.get() : $elf[0];\r\n              batch.add(_updateOptions.bind(self, elf, parentId, async, change));\r\n            }\r\n          });\r\n        } else {\r\n          batch.add(_updateOptions.bind(self, el, parentId, async, change));\r\n        }\r\n      }\r\n\r\n      obj = els;\r\n      var list = forms.get(self).getList(self.name || self.id);\r\n      if (Array.isArray(list == null ? void 0 : list.autoFillTargetFields) && list.autoFillTargetFields[0]) // AutoFill\r\n        batch.add(autoFill.bind(null, self));\r\n    } else {\r\n      if (isTextbox(obj) || isFilter(obj)) // Search text box or filter\r\n        return;\r\n      batch.add(_updateOptions.bind(self, obj, parentId, async, change));\r\n    }\r\n\r\n    return (_batch$send = batch.send({\r\n      url: ew.getApiUrl(ew.API_LOOKUP_ACTION)\r\n    })) == null ? void 0 : _batch$send.then(function () {\r\n      $document$1.trigger(\"updatedone\", [{\r\n        source: self,\r\n        target: obj\r\n      }]); // Document \"updatedone\" event fired after all the target elements are updated\r\n    });\r\n  }\r\n  /**\r\n   * Update a dynamic selection list\r\n   *\r\n   * @param {(HTMLElement|HTMLElement[]} obj - Target HTML element(s) or the ID of the element(s)\r\n   * @param {(string[]|array[])} parentId - Parent field element names or data\r\n   * @param {(boolean|null)} async - async(true) or sync(false) or non-Ajax(null)\r\n   * @param {boolean} change - Trigger onchange event\r\n   * @returns {Promise}\r\n   */\r\n\r\n  function _updateOptions(obj, parentId, async, change) {\r\n    var id = getId(obj, false);\r\n    if (!id) return;\r\n    var fo = getForm(obj); // Get form/div element from obj\r\n\r\n    if (!fo || !fo.id) return;\r\n    var frmo = forms.get(fo.id);\r\n    if (!frmo) return;\r\n    var self = this,\r\n        args = Array.from(arguments),\r\n        ar = getOptionValues(obj),\r\n        m = id.match(/^([xy])(\\d*)_/),\r\n        prefix = m ? m[1] : \"\",\r\n        rowindex = m ? m[2] : \"\",\r\n        arp = [],\r\n        list = frmo.getList(id),\r\n        $obj = $__default[\"default\"](obj).data(\"updating\", true);\r\n    if ($obj.data(\"hidden\")) // Skip data-hidden field, e.g. detail key\r\n      return;\r\n\r\n    if ($__default[\"default\"].isUndefined(parentId)) {\r\n      // Parent IDs not specified, use default\r\n      parentId = list.parentFields.slice(); // Clone\r\n\r\n      if (rowindex != \"\") {\r\n        for (var i = 0, len = parentId.length; i < len; i++) {\r\n          var arr = parentId[i].split(\" \");\r\n          if (arr.length == 1) // Parent field in the same table, add row index\r\n            parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\r\n        }\r\n      }\r\n    }\r\n\r\n    if (Array.isArray(parentId) && parentId.length > 0) {\r\n      if (Array.isArray(parentId[0])) {\r\n        // Array of array => data\r\n        arp = parentId;\r\n      } else if ($__default[\"default\"].isString(parentId[0])) {\r\n        // Array of string => Parent IDs\r\n        for (var i = 0, len = parentId.length; i < len; i++) arp.push(getOptionValues(parentId[i], fo));\r\n      }\r\n    }\r\n\r\n    if (!isAutoSuggest(obj)) // Do not clear Auto-Suggest\r\n      clearOptions(obj);\r\n\r\n    var addOpt = function (results) {\r\n      var name = getId(obj);\r\n      results.forEach(function (result) {\r\n        let args = {\r\n          \"data\": result,\r\n          \"parents\": arp,\r\n          \"valid\": true,\r\n          \"name\": name,\r\n          \"form\": fo\r\n        };\r\n        $document$1.trigger(\"addoption\", [args]);\r\n        if (args.valid) newOption(obj, result, fo);\r\n      });\r\n      if (obj.list) obj.render();\r\n      selectOption(obj, ar);\r\n\r\n      if (change !== false) {\r\n        if (!obj.options && obj.length) $obj.first().triggerHandler(\"click\");else $obj.first().trigger(\"change\");\r\n      }\r\n    };\r\n\r\n    if ($__default[\"default\"].isUndefined(async)) // Async not specified, use default\r\n      async = list.ajax;\r\n\r\n    var _updateSibling = function () {\r\n      // Update the y_* element\r\n      if (/(s(ea)?rch|summary|crosstab)$/.test(fo.id) && prefix == \"x\" && !rowindex) {\r\n        // Search form\r\n        args[0] = id.replace(/^x_/, \"y_\");\r\n        updateOptions.apply(self, args); // args[0] is string, use updateOptions()\r\n      }\r\n    };\r\n\r\n    if (!$__default[\"default\"].isBoolean(async) || Array.isArray(list.lookupOptions) && list.lookupOptions.length > 0) {\r\n      // Non-Ajax or Options loaded\r\n      var ds = list.lookupOptions;\r\n      addOpt(ds);\r\n\r\n      _updateSibling();\r\n\r\n      return ds;\r\n    } else {\r\n      // Ajax\r\n      var name = getId(obj),\r\n          data = Object.assign({\r\n        page: list.page,\r\n        field: list.field,\r\n        ajax: \"updateoption\",\r\n        language: ew.LANGUAGE_ID,\r\n        name: name // Name of the target element\r\n\r\n      }, getUserParams(\"#p_\" + id, fo)); // Add user parameters\r\n\r\n      if (isAutoSuggest(obj) && self.htmlForm) // Auto-Suggest (init form or auto-fill)\r\n        data[\"v0\"] = ar[0] || random(); // Filter by the current value\r\n      else if (obj.options && obj.tagName != \"SELECTION-LIST\" && !obj.classList.contains(\"form-select\") || // Not <selection-list> or native <select>\r\n      isModalLookup(obj)) // Lookup\r\n        data[\"v0\"] = ar[0] ? obj.multiple ? ar.join(ew.MULTIPLE_OPTION_SEPARATOR) : ar[0] : random(); // Filter by the current value\r\n\r\n      for (var i = 0, cnt = arp.length; i < cnt; i++) // Filter by parent fields\r\n      data[\"v\" + (i + 1)] = arp[i].join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n\r\n      return $__default[\"default\"].ajax(getApiUrl(ew.API_LOOKUP_ACTION), {\r\n        method: \"POST\",\r\n        dataType: \"json\",\r\n        data: data,\r\n        async: async,\r\n        processData: false,\r\n        success: result => {\r\n          var ds = result.records || [];\r\n          addOpt(ds);\r\n\r\n          _updateSibling();\r\n\r\n          $obj.first().trigger(\"updated\", [Object.assign({}, result, {\r\n            target: obj\r\n          })]); // Object \"updated\" event fired after the object is updated\r\n\r\n          return ds;\r\n        },\r\n        complete: () => $obj.data(\"updating\", false)\r\n      });\r\n    }\r\n  } // Get user parameters from id\r\n\r\n  function getUserParams(id, root) {\r\n    var id = id.replace(/\\[\\]$/, \"\"),\r\n        o = {};\r\n    var root = !$__default[\"default\"].isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    var $els = root ? $__default[\"default\"](root).find(id) : $__default[\"default\"](id);\r\n    var val = $els.val();\r\n\r\n    if (val) {\r\n      var params = new URLSearchParams(val);\r\n      params.forEach(function (value, key) {\r\n        o[key] = value;\r\n      });\r\n    }\r\n\r\n    return o;\r\n  } // Apply client side template to a DIV\r\n\r\n  function applyTemplate(divId, tmplId, classId, exportType, data) {\r\n    // Note: classId = fileName\r\n    let args = {\r\n      \"data\": data || {},\r\n      \"id\": divId,\r\n      \"template\": tmplId,\r\n      \"class\": classId,\r\n      \"export\": exportType,\r\n      \"enabled\": true\r\n    };\r\n    $document$1.trigger(\"rendertemplate\", [args]);\r\n\r\n    if (args.enabled) {\r\n      var _document$getElementB;\r\n\r\n      let template = (_document$getElementB = document.getElementById(tmplId)) == null ? void 0 : _document$getElementB.content,\r\n          dlg = document.querySelector(\"#ew-modal-dialog.show\"); // Shown modal dialog\r\n\r\n      if (!template) return;\r\n      template.querySelectorAll(\".ew-slot\").forEach(el => {\r\n        var _dlg$querySelector;\r\n\r\n        let id = el.name || el.id,\r\n            subtmpl = (_dlg$querySelector = dlg == null ? void 0 : dlg.querySelector(\"#\" + id)) != null ? _dlg$querySelector : document.getElementById(id); // Find in shown modal dialog first in case Custom Template for modal page\r\n\r\n        if (subtmpl != null && subtmpl.content) {\r\n          if (el.dataset.rowspan > 1) Array.prototype.slice.call(subtmpl.content.childNodes).forEach(node => node.rowSpan = el.dataset.rowspan);\r\n          el.replaceWith(subtmpl.content.cloneNode(true));\r\n        } else {\r\n          el.remove();\r\n        }\r\n      });\r\n\r\n      if ($__default[\"default\"].views) {\r\n        let textContent = template.textContent,\r\n            hasTag = textContent.includes(\"{{\") && textContent.includes(\"}}\");\r\n\r\n        if (!hasTag) {\r\n          let selector = ew.jsRenderAttributes.map(attr => \"[\" + attr + \"*='{{'][\" + attr + \"*='}}']\").join(\",\");\r\n          hasTag = template.querySelector(selector);\r\n        }\r\n\r\n        if (hasTag) {\r\n          // Includes JsRender template\r\n          let scripts = Array.prototype.slice.call(template.querySelectorAll(\"script\")); // Extract scripts\r\n\r\n          scripts.forEach(item => item.remove());\r\n          let div = document.createElement(\"div\");\r\n          div.appendChild(template);\r\n          let html = div.innerHTML.replace(/{{([^}]+)}}/g, m => htmlDecode(m)),\r\n              // HTML-decode comparison operators\r\n          tmpl = $__default[\"default\"].templates(html);\r\n          document.getElementById(divId).innerHTML = tmpl.render(args.data, ew.jsRenderHelpers);\r\n          scripts.forEach(item => document.body.appendChild(item)); // Add scripts\r\n        } else {\r\n          document.getElementById(divId).appendChild(template);\r\n        }\r\n      } else {\r\n        document.getElementById(divId).appendChild(template);\r\n      }\r\n    }\r\n\r\n    if (exportType && exportType != \"print\") {\r\n      // Export custom\r\n      $__default[\"default\"](function () {\r\n        let $meta = $__default[\"default\"](\"meta[http-equiv='Content-Type']\"),\r\n            html = \"<html><head>\",\r\n            $div = $__default[\"default\"](\"#\" + divId);\r\n        if ($div.children(0).is(\"div[id^=ct_]\")) // Remove first div tag\r\n          $div = $div.children(0);\r\n        if ($meta[0]) html += \"<meta http-equiv='Content-Type' content='\" + $meta.attr(\"content\") + \"'>\";\r\n\r\n        if (exportType == \"pdf\") {\r\n          html += \"<link rel='stylesheet' href='\" + ew.PDF_STYLESHEET_FILENAME + \"'>\";\r\n        } else {\r\n          html += \"<style>\" + $__default[\"default\"].ajax({\r\n            async: false,\r\n            type: \"GET\",\r\n            url: ew.PROJECT_STYLESHEET_FILENAME\r\n          }).responseText + \"</style>\";\r\n        }\r\n\r\n        html += \"</\" + \"head><body>\";\r\n        $__default[\"default\"](\".ew-chart-top\").each(function () {\r\n          html += $__default[\"default\"](this).html();\r\n        });\r\n        html += $div.html();\r\n        $__default[\"default\"](\".ew-chart-bottom\").each(function () {\r\n          html += $__default[\"default\"](this).html();\r\n        });\r\n        html += \"</body></html>\";\r\n        let url = currentPage(),\r\n            data = {\r\n          \"customexport\": exportType,\r\n          \"data\": html,\r\n          \"filename\": args.class\r\n        };\r\n        data[ew.TOKEN_NAME] = ew.ANTIFORGERY_TOKEN;\r\n\r\n        if (exportType == \"email\") {\r\n          let str = currentUrl.searchParams.toString() + \"&\" + $__default[\"default\"].param(data); // Add data\r\n\r\n          $__default[\"default\"].post(url, str, function (result) {\r\n            showMessage(result);\r\n          });\r\n        } else {\r\n          fileDownload(url, data);\r\n        }\r\n\r\n        window.parent.jQuery(\"body\").css(\"cursor\", \"default\"); // Use window.parent in case in iframe\r\n      });\r\n    }\r\n  } // Toggle group\r\n\r\n  function toggleGroup(el) {\r\n    var $el = $__default[\"default\"](el),\r\n        $tr = $el.closest(\"tr\"),\r\n        selector = \"tr\",\r\n        level;\r\n\r\n    for (var i = 1; i <= 6; i++) {\r\n      var idx = i == 1 ? \"\" : \"-\" + i;\r\n      var data = $tr.data(\"group\" + idx);\r\n\r\n      if ($__default[\"default\"].isValue(data)) {\r\n        level = i;\r\n        if (data != \"\") selector += \"[data-group\" + idx + \"='\" + String(data).replace(/'/g, \"\\\\'\") + \"']\";\r\n      }\r\n    }\r\n\r\n    if ($el.hasClass(\"ew-rpt-grp-hide\")) {\r\n      // Show\r\n      $__default[\"default\"](selector).slice(1).removeClass(\"ew-rpt-grp-hide-\" + level);\r\n      $el.removeClass(\"ew-rpt-grp-hide\");\r\n    } else {\r\n      // Hide\r\n      $__default[\"default\"](selector).slice(1).addClass(\"ew-rpt-grp-hide-\" + level);\r\n      $el.addClass(\"ew-rpt-grp-hide\");\r\n    }\r\n  } // Check if boolean value is true\r\n\r\n  function convertToBool(value) {\r\n    return value && [\"1\", \"y\", \"t\", \"true\"].includes(value.toLowerCase());\r\n  } // Check if element value changed\r\n\r\n  function valueChanged(fobj, infix, fld, bool) {\r\n    var nelm = getElements(\"x\" + infix + \"_\" + fld, fobj);\r\n    var oelm = getElement(\"o\" + infix + \"_\" + fld, fobj); // Hidden element\r\n\r\n    var fnelm = getElement(\"fn_x\" + infix + \"_\" + fld, fobj); // Hidden element\r\n\r\n    if ((nelm == null ? void 0 : nelm.type) == \"hidden\" && !oelm) // For example, detail key\r\n      return false;\r\n    if (!oelm && (!nelm || Array.isArray(nelm) && nelm.length == 0)) return false;\r\n\r\n    var getValue = obj => getOptionValues(obj).join();\r\n\r\n    if (oelm && nelm) {\r\n      if (bool) {\r\n        if (convertToBool(getValue(oelm)) === convertToBool(getValue(nelm))) return false;\r\n      } else {\r\n        var oldvalue = getValue(oelm);\r\n        var newvalue = fnelm ? getValue(fnelm) : getValue(nelm);\r\n        if (oldvalue == newvalue) return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  } // Set language\r\n\r\n  function setLanguage(el) {\r\n    var $el = $__default[\"default\"](el),\r\n        val = $el.val() || $el.data(\"language\");\r\n    if (!val) return false;\r\n    currentUrl.searchParams.set(\"language\", val);\r\n    window.location = sanitizeUrl(currentUrl.toString());\r\n    return false;\r\n  }\r\n  /**\r\n   * Submit action\r\n   *\r\n   * @param {MouseEvent} e - Mouse event\r\n   * @param {Object} args - Arguments\r\n   * @param {HTMLElement} args.f - HTML form (default is the form of the source element) (for backward compatibility only)\r\n   * @param {string} args.url - URL to which the request is sent (default is current page) (for backward compatibility only)\r\n   * @param {Object} args.key - Key as object (for single record only)\r\n   * @param {string|Object} args.msg - Message or Swal config\r\n   * @param {string} args.action - Custom action name\r\n   * @param {string} args.select - \"single\"|\"s\" (single record) or \"multiple\"|\"m\" (multiple records, default)\r\n   * @param {string} args.method - \"ajax\"|\"a\" (Ajax by HTTP POST) or \"post\"|\"p\" (HTTP POST by HTML form, default)\r\n   * @param {Object} args.data - Object of user data that is sent to the server\r\n   * @param {string|callback|Object} success - Function to be called if the request succeeds, or settings for jQuery.ajax() (for Ajax only)\r\n   * @returns\r\n   */\r\n\r\n  function submitAction(e, args) {\r\n    var _window$msg;\r\n\r\n    var el = e.currentTarget,\r\n        f = args.f || el.form || el.closest(\"form\"),\r\n        $f = $__default[\"default\"](f),\r\n        key = args.key,\r\n        action = args.action,\r\n        url = args.url || currentPage(),\r\n        msg = args.msg,\r\n        data = args.data,\r\n        success = args.success,\r\n        isPost = !args.method || sameText(args.method[0], \"p\"),\r\n        isMultiple = !args.select && !args.key || args.select && sameText(args.select[0], \"m\");\r\n\r\n    if ((isMultiple || isPost) && !f) {\r\n      _alert(ew.language.phrase(\"NoHtmlForm\"));\r\n\r\n      return false;\r\n    }\r\n\r\n    if (isMultiple && !keySelected(f)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n\r\n      return false;\r\n    }\r\n\r\n    var _success = function (result) {\r\n      showMessage(result);\r\n    };\r\n\r\n    var _submit = function (value) {\r\n      if (isPost && f) {\r\n        // Post back by form\r\n        if (action) // Action\r\n          $__default[\"default\"](\"<input>\").attr({\r\n            type: \"hidden\",\r\n            name: \"useraction\",\r\n            value: action\r\n          }).appendTo($f);\r\n        if (!$__default[\"default\"].isUndefined(value)) $__default[\"default\"](\"<input>\").attr({\r\n          type: \"hidden\",\r\n          name: \"actionvalue\",\r\n          value: value\r\n        }).appendTo($f);\r\n\r\n        if ($__default[\"default\"].isObject(data)) {\r\n          // User data\r\n          for (var k in data) {\r\n            var $input = $f.find(\"input[type=hidden][name='\" + k + \"']\");\r\n            if ($input[0]) $input.val(data[k]);else $__default[\"default\"](\"<input>\").attr({\r\n              type: \"hidden\",\r\n              name: k,\r\n              value: data[k]\r\n            }).appendTo($f);\r\n          }\r\n        }\r\n\r\n        if (!isMultiple && $__default[\"default\"].isObject(key)) {\r\n          // Key\r\n          for (var k in key) $__default[\"default\"](\"<input>\").attr({\r\n            type: \"hidden\",\r\n            name: k,\r\n            value: key[k]\r\n          }).appendTo($f);\r\n        }\r\n\r\n        $f.prop({\r\n          action: url,\r\n          method: \"post\"\r\n        }).trigger(\"submit\"); // if (action) // Action\r\n        //     $f.find(\"input[type=hidden][name=useraction]\").remove(); // Remove the \"useraction\" element\r\n      } else {\r\n        // Ajax\r\n        data = $__default[\"default\"].isObject(data) ? $__default[\"default\"].param(data) : $__default[\"default\"].isString(data) ? data : \"\"; // User data\r\n\r\n        if (action) data += \"&useraction=\" + action + \"&ajax=\" + action; // Action\r\n\r\n        if (!$__default[\"default\"].isUndefined(value)) data += \"&actionvalue=\" + encodeURIComponent(value); // User input value\r\n\r\n        if (isMultiple) // Multiple records\r\n          data += \"&\" + $f.find(\"input[name='key_m[]']:checked\").serialize(); // Keys\r\n        else if (key) // Single record\r\n          data += \"&\" + ($__default[\"default\"].isObject(key) ? $__default[\"default\"].param(key) : key); // Key\r\n\r\n        if (success && $__default[\"default\"].isString(success)) success = window[success];\r\n\r\n        if (isFunction$2(success)) {\r\n          $__default[\"default\"].post(url, data, success);\r\n        } else if ($__default[\"default\"].isObject(success)) {\r\n          // \"success\" is Ajax settings\r\n          success.data = data;\r\n          success.method = success.method || \"POST\";\r\n          success.success = success.success || _success;\r\n          $__default[\"default\"].ajax(url, success);\r\n        } else {\r\n          $__default[\"default\"].post(url, data, _success);\r\n        }\r\n      }\r\n    };\r\n\r\n    msg = $__default[\"default\"].isString(msg) ? (_window$msg = window[msg]) != null ? _window$msg : msg : msg; // Get config object if available\r\n\r\n    if (msg) {\r\n      _prompt(msg, value => {\r\n        if (value) _submit(value);\r\n      });\r\n    } else {\r\n      _submit();\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Export with selected records and/or Custom Template\r\n   *\r\n   * @param {MouseEvent|HTMLFormElement} e - Event or HTML form\r\n   * @param {string} url - Form action\r\n   * @param {string} type - Export type\r\n   * @param {boolean} custom - Using Custom Template\r\n   * @param {boolean} sel - Selected records only\r\n   * @param {HTMLFormElement} fobj - email form object\r\n   * @returns false\r\n   */\r\n\r\n  function _export(e, url, type, custom, sel, fobj) {\r\n    var f = e.currentTarget.form;\r\n    if (!f) return false;\r\n    var $f = $__default[\"default\"](f),\r\n        target = $f.attr(\"target\"),\r\n        action = $f.attr(\"action\"),\r\n        cb = sel && f.querySelector(\"input[type=checkbox][name='key_m[]']\");\r\n\r\n    if (cb && !keySelected(f)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n\r\n      return false;\r\n    }\r\n\r\n    if (custom) {\r\n      // Use Custom Template\r\n      $__default[\"default\"](\"iframe.ew-export\").remove();\r\n      if (type == \"email\" && fobj) url += \"&\" + $__default[\"default\"](fobj).serialize().replace(/&export=email/, \"\"); // Remove duplicate export=email\r\n\r\n      if (cb) {\r\n        $__default[\"default\"](\"<iframe>\").attr(\"name\", \"ew-export-frame\").addClass(\"ew-export d-none\").appendTo($body);\r\n\r\n        try {\r\n          $f.append($__default[\"default\"](\"<input type='hidden'>\").attr({\r\n            name: \"custom\",\r\n            value: \"1\"\r\n          })).attr({\r\n            action: url,\r\n            target: \"ew-export-frame\"\r\n          }).find(\"input[name=exporttype]\").val(type).end().trigger(\"submit\");\r\n        } finally {\r\n          // Reset\r\n          $f.attr({\r\n            \"target\": target || \"\",\r\n            \"action\": action\r\n          }).find(\"input[name=custom]\").remove();\r\n        }\r\n      } else {\r\n        $__default[\"default\"](\"<iframe>\").attr({\r\n          name: \"ew-export-frame\",\r\n          src: url\r\n        }).addClass(\"ew-export d-none\").appendTo($body);\r\n      }\r\n    } else {\r\n      // No Custom Template\r\n      $f.find(\"input[name=exporttype]\").val(type);\r\n      if ([\"xml\", \"print\"].includes(type)) $f.trigger(\"submit\"); // Submit the form directly\r\n      else fileDownload(action, $f.serialize());\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Remove spaces\r\n   * @param {string} value - Value\r\n   * @returns {string}\r\n   */\r\n\r\n  function removeSpaces(value) {\r\n    return /^(<(p|br)\\/?>(&nbsp;)?(<\\/p>)?)?$/i.test(value.replace(/\\s/g, \"\")) ? \"\" : value;\r\n  }\r\n  /**\r\n   * Check if hidden text area (HTML editor)\r\n   * @param {HTMLElement|jQuery} el - HTML element or jQuery object\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isHiddenTextArea(el) {\r\n    var $el = $__default[\"default\"](el);\r\n    return $el.is(\":hidden\") && $el.data(\"editor\");\r\n  }\r\n  /**\r\n   * Check if modal lookup\r\n   * @param {HTMLElement|jQuery} el - HTML element or jQuery object\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isModalLookup(el) {\r\n    var _el$dataset;\r\n\r\n    return el == null ? void 0 : (_el$dataset = el.dataset) == null ? void 0 : _el$dataset.modalLookup;\r\n  }\r\n  /**\r\n   * Check if filter\r\n   * @param {HTMLElement|jQuery} el - HTML element or jQuery object\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isFilter(el) {\r\n    var _el$dataset2;\r\n\r\n    return el == null ? void 0 : (_el$dataset2 = el.dataset) == null ? void 0 : _el$dataset2.filter;\r\n  }\r\n  /**\r\n   * Check if hidden textbox (Auto-Suggest)\r\n   * @param {HTMLElement|jQuery} el - HTML element or jQuery object\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isAutoSuggest(el) {\r\n    var $el = $__default[\"default\"](el);\r\n    return $el.is(\":hidden\") && $el.data(\"autosuggest\");\r\n  }\r\n  /**\r\n   * Check if textbox\r\n   * @param {HTMLElement|jQuery} el - HTML element or jQuery object\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isTextbox(el) {\r\n    var $el = $__default[\"default\"](el);\r\n    return $el.is(\"input[type!=checkbox][type!=radio]\") && !isAutoSuggest($el);\r\n  }\r\n  /**\r\n   * Clear error message\r\n   * @param {HTMLElement|HTMLElement[]|jQuery} el - HTML element(s) or jQuery\r\n   */\r\n\r\n  function clearError(el) {\r\n    if (el.jquery) {\r\n      // el is jQuery object\r\n      let typ = el.attr(\"type\");\r\n      el = typ == \"checkbox\" || typ == \"radio\" ? el.get() : el[0];\r\n    }\r\n\r\n    $__default[\"default\"](el).closest(fieldContainerSelector).find(\".invalid-feedback\").html(\"\");\r\n  }\r\n  /**\r\n   * Show error message\r\n   * @param {Form} frm Form object\r\n   * @param {HTMLElement|HTMLElement[]|jQuery} el - HTML element(s) or jQuery\r\n   * @param {string} msg - Error message\r\n   * @param {boolean} focus - Set focus\r\n   */\r\n\r\n  function onError(frm, el, msg, focus) {\r\n    if (el.jquery) {\r\n      // el is jQuery object\r\n      let typ = el.attr(\"type\");\r\n      el = typ == \"checkbox\" || typ == \"radio\" ? el.get() : el[0];\r\n    } else if (el instanceof Field) {\r\n      // el is Field object\r\n      el = el.element;\r\n    }\r\n\r\n    $__default[\"default\"](el).closest(fieldContainerSelector).find(\".invalid-feedback\").append(\"<p>\" + msg + \"</p>\");\r\n    if (focus) setFocus(el);\r\n    frm == null ? void 0 : frm.makeVisible(el);\r\n    return false;\r\n  }\r\n  /**\r\n   * Set focus\r\n   * @param {HTMLElement|HTMLElement[]} obj - HTML element(s)\r\n   * @param {Object} options - Focus options\r\n   */\r\n\r\n  function setFocus(obj, options) {\r\n    if (!obj) return;\r\n    var $obj = $__default[\"default\"](obj);\r\n    if (isHidden($obj)) return;\r\n\r\n    if (isHiddenTextArea(obj)) {\r\n      // HTML editor\r\n      return $obj.data(\"editor\").focus();\r\n    } else if (!obj.options && obj.length) {\r\n      // Radio/Checkbox list\r\n      obj = $obj[0];\r\n    } else if (isAutoSuggest(obj)) {\r\n      // Auto-Suggest\r\n      obj = obj.input;\r\n    }\r\n\r\n    obj.focus(options);\r\n  }\r\n  /**\r\n   * Set invalid\r\n   * @param {HTMLElement|HTMLElement[]} obj - HTML element(s)\r\n   */\r\n\r\n  function setInvalid(obj) {\r\n    if (!obj) return;\r\n    let $obj = $__default[\"default\"](obj);\r\n    if (isHidden($obj)) return;\r\n    if (!obj.options && obj.length) // Radio/Checkbox list\r\n      obj = $obj[0];\r\n\r\n    let $p = $obj.closest(fieldContainerSelector),\r\n        reset = () => $p.find(\".is-invalid\").removeClass(\"is-invalid\");\r\n\r\n    if (isAutoSuggest(obj)) {\r\n      $p.find(\".ew-auto-suggest\").removeClass(\"is-valid\").addClass(\"is-invalid\").one(\"click keydown\", reset);\r\n    } else if (isHiddenTextArea(obj)) {\r\n      $obj.removeClass(\"is-valid\").addClass(\"is-invalid\");\r\n      $obj.data(\"editor\").instance.once(\"change\", reset);\r\n    } else if (isModalLookup(obj)) {\r\n      $obj.removeClass(\"is-valid\").addClass(\"is-invalid\").one(\"select2:open\", reset);\r\n    } else {\r\n      if (obj.type == \"checkbox\" || obj.type == \"radio\") {\r\n        $obj.removeClass(\"is-valid\").addClass(\"is-invalid\").one(\"click keydown\", reset);\r\n      } else {\r\n        $obj.removeClass(\"is-valid\").addClass(\"is-invalid\").parent().one(ew.MOBILE_DETECT.version(\"Safari\") && !ew.MOBILE_DETECT.version(\"Chrome\") ? \"change\" : \"click\", reset); // \"change\" event for Safari\r\n\r\n        $obj.closest(\".input-group\").removeClass(\"is-valid\").addClass(\"is-invalid\");\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Set valid\r\n   * @param {HTMLElement|HTMLElement[]} obj - HTML element(s)\r\n   */\r\n\r\n  function setValid(obj) {\r\n    if (!obj) return;\r\n    var $obj = $__default[\"default\"](obj);\r\n    if (isHidden($obj)) return;\r\n    if (!obj.options && obj.length) // Radio/Checkbox list\r\n      obj = $obj[0];\r\n    var $p = $obj.closest(fieldContainerSelector);\r\n\r\n    if (isAutoSuggest(obj)) {\r\n      $p.find(\".ew-auto-suggest\").removeClass(\"is-invalid\").addClass(\"is-valid\").one(\"click keydown\", function () {\r\n        $p.find(\".is-valid\").removeClass(\"is-valid\");\r\n      });\r\n    } else {\r\n      if (obj.type == \"checkbox\" || obj.type == \"radio\") {\r\n        $obj.removeClass(\"is-invalid\").addClass(\"is-valid\").one(\"click keydown\", function () {\r\n          $p.find(\".is-valid\").removeClass(\"is-valid\");\r\n        });\r\n      } else {\r\n        $obj.removeClass(\"is-invalid\").addClass(\"is-valid\").parent().one(\"click keydown\", function () {\r\n          $p.find(\".is-valid\").removeClass(\"is-valid\");\r\n        });\r\n        $obj.closest(\".input-group\").removeClass(\"is-invalid\").addClass(\"is-valid\");\r\n      }\r\n    }\r\n  } // Check if object has value\r\n\r\n  function hasValue(obj) {\r\n    return getOptionValues(obj).join(\"\") != \"\";\r\n  } // Check if object value is a masked password\r\n\r\n  function isMaskedPassword(obj) {\r\n    var val = $__default[\"default\"](obj).val();\r\n    return val == null ? void 0 : val.match(/^\\*+$/);\r\n  } // Sort by field\r\n\r\n  function sort(e, url, type) {\r\n    if (e.shiftKey && !e.ctrlKey) url = url.split(\"?\")[0] + \"?cmd=resetsort\";else if (type == 2 && e.ctrlKey) url += \"&ctrl=1\";\r\n    window.location = sanitizeUrl(url);\r\n    return true;\r\n  } // Open table header filter by field\r\n\r\n  function filter(e) {\r\n    let data = e.currentTarget.dataset;\r\n    $__default[\"default\"](\"select[data-select2-id='f\" + data.table + \"srch_\" + data.field + \"']\").select2(\"open\");\r\n  } // Confirm Delete Message\r\n\r\n  function confirmDelete(el) {\r\n    clickDelete(el);\r\n\r\n    _prompt(ew.language.phrase(\"DeleteConfirmMsg\"), result => {\r\n      result && el.href ? window.location = sanitizeUrl(el.href) : clearDelete(el);\r\n    });\r\n\r\n    return false;\r\n  } // Check if any key selected // PHP\r\n\r\n  function keySelected(f) {\r\n    return $__default[\"default\"](f).find(\"input[type=checkbox][name='key_m[]']:checked\", f).length > 0;\r\n  } // Select all keys\r\n\r\n  function selectAllKeys(cb) {\r\n    selectAll(cb);\r\n    var tbl = $__default[\"default\"](cb).closest(\".ew-table\")[0];\r\n    if (!tbl) return;\r\n    $__default[\"default\"](tbl.tBodies).each(function () {\r\n      $__default[\"default\"](this.rows).each(function (i, r) {\r\n        var $r = $__default[\"default\"](r);\r\n        if ($r.is(\":not(.ew-template):not(.ew-table-preview-row)\")) $r.toggleClass(\"table-active ew-table-selected-row\", cb.checked).triggerHandler(\"change\");\r\n      });\r\n    });\r\n  } // Select all related checkboxes in the form\r\n\r\n  function selectAll(cb) {\r\n    if (!cb || !cb.form) return;\r\n    $__default[\"default\"](cb.form.elements).filter(\"input[type=checkbox][name^=\" + cb.name + \"_], [type=checkbox][name=\" + cb.name + \"]\").not(cb).not(\":disabled\").prop(\"checked\", cb.checked);\r\n  } // Update selected checkbox\r\n\r\n  function updateSelected(f) {\r\n    return $__default[\"default\"](f).find(\"input[type=checkbox][name^=u_]:checked,input:hidden[name^=u_][value=1]\").length > 0;\r\n  } // Clear selected rows color\r\n\r\n  function clearSelected(tbl) {\r\n    let rowIndexes = $__default[\"default\"](tbl).find(\"input[type=checkbox][name='key_m[]']:checked\").closest(\"[data-rowindex]\").map((i, r) => r.dataset.rowindex).get();\r\n    $__default[\"default\"](tbl == null ? void 0 : tbl.rows).filter((i, r) => r.classList.contains(\"table-active\") && !rowIndexes.includes(r.dataset.rowindex)).removeClass(\"table-active ew-table-selected-row\").triggerHandler(\"change\");\r\n  } // Clear all row delete status\r\n\r\n  function clearDelete(el) {\r\n    var $el = $__default[\"default\"](el),\r\n        tbl = $el.closest(\".ew-table\")[0];\r\n    if (!tbl) return;\r\n    var $tr = $el.closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().removeClass(\"table-active\").triggerHandler(\"change\");\r\n  } // Click single delete link\r\n\r\n  function clickDelete(el) {\r\n    var $el = $__default[\"default\"](el),\r\n        tbl = $el.closest(\".ew-table\")[0];\r\n    if (!tbl) return;\r\n    clearSelected(tbl);\r\n    var $tr = $el.closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().addClass(\"table-active\").triggerHandler(\"change\");\r\n  } // Select a row\r\n\r\n  function selectKey(e) {\r\n    var cb = e.target,\r\n        $cb = $__default[\"default\"](cb),\r\n        tbl = $cb.closest(\".ew-table\")[0];\r\n    if (!tbl) return;\r\n    clearSelected(tbl);\r\n    var $tr = $cb.closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().each(function (i, r) {\r\n      $__default[\"default\"](r).toggleClass(\"table-active ew-table-selected-row\", cb.checked).triggerHandler(\"change\");\r\n    });\r\n    e.stopPropagation();\r\n  } // Setup table\r\n\r\n  function setupTable(index, tbl, force) {\r\n    var $tbl = $__default[\"default\"](tbl),\r\n        $rows = $__default[\"default\"](tbl.rows);\r\n    if (!tbl || !tbl.rows || !force && $tbl.data(\"isset\") || tbl.tBodies.length == 0) return; // Set selected row color\r\n\r\n    var click = function (e) {\r\n      var $this = $__default[\"default\"](this),\r\n          $tbl = $this.closest(\".ew-table\"),\r\n          tbl = $tbl[0],\r\n          $target = $__default[\"default\"](e.target);\r\n      if (!tbl || $target.hasClass(\"btn\") || $target.hasClass(\"ew-preview-btn\") || $target.is(\":input\")) return;\r\n      clearSelected(tbl); // Clear all other selected rows\r\n\r\n      $this.siblings(\"[data-rowindex='\" + $this.data(\"rowindex\") + \"']\").addBack().toggleClass(\"table-active\").triggerHandler(\"change\");\r\n    };\r\n\r\n    var n = $rows.filter(\"[data-rowindex=1]\").length || $rows.filter(\"[data-rowindex=0]\").length || 1; // Alternate color every n rows\r\n\r\n    var rows = $rows.filter(\":not(.ew-template)\").each(function () {\r\n      $__default[\"default\"](this.cells).removeClass(\"ew-table-last-row\").last().addClass(\"ew-table-last-col\"); // Cell of last column\r\n    }).get();\r\n    var div = $tbl.parentsUntil(\".ew-grid\", \".\" + ew.RESPONSIVE_TABLE_CLASS)[0];\r\n\r\n    if (rows.length) {\r\n      for (var i = 1; i <= n; i++) {\r\n        var r = rows[rows.length - i]; // Last rows\r\n\r\n        $__default[\"default\"](r.cells).each(function () {\r\n          if (this.rowSpan == i) // Cell of last row\r\n            $__default[\"default\"](this).addClass(\"ew-table-last-row\").toggleClass(\"ew-table-border-bottom\", (div == null ? void 0 : div.clientHeight) > tbl.offsetHeight);\r\n        });\r\n      }\r\n    }\r\n\r\n    var form = $tbl.closest(\"form\")[0];\r\n    var attach = form && $__default[\"default\"](form.elements).filter(\"input#action:not([value^=grid])\").length > 0;\r\n    $__default[\"default\"](tbl.tBodies[tbl.tBodies.length - 1].rows) // Use last TBODY (avoid Opera bug)\r\n    .filter(\":not(.ew-template):not(.ew-table-preview-row)\").each(function () {\r\n      var $r = $__default[\"default\"](this);\r\n      if (attach && !$r.data(\"isset\")) $r.on(\"click\", click).data(\"isset\", true);\r\n    });\r\n    setupGrid(index, $tbl.closest(\".ew-grid\")[0], force);\r\n    $tbl.data(\"isset\", true);\r\n  } // Setup grid\r\n\r\n  function setupGrid(index, grid, force) {\r\n    var $grid = $__default[\"default\"](grid);\r\n    if (!grid || !force && $grid.data(\"isset\")) return;\r\n    var rowcnt = $grid.find(\"table.ew-table > tbody\").first().children(\"tr:not(.ew-table-preview-row, .ew-template)\").length;\r\n    if (rowcnt == 0 && !$grid.find(\".ew-grid-upper-panel, .ew-grid-lower-panel\")[0]) $grid.hide();\r\n\r\n    if ($grid.find(\".ew-grid-middle-panel:visible\").hasClass(ew.RESPONSIVE_TABLE_CLASS) && $grid.width() > $__default[\"default\"](\".content\").width()) {\r\n      $grid.addClass(\"d-flex\");\r\n      $grid.closest(\".ew-detail-pages\").addClass(\"d-block\");\r\n      $grid.closest(\".ew-form\").addClass(\"w-100\");\r\n      if (ew.USE_OVERLAY_SCROLLBARS) $grid.find(\".ew-grid-middle-panel:not(.ew-preview-middle-panel)\").overlayScrollbars(ew.overlayScrollbarsOptions);\r\n    }\r\n\r\n    $grid.data(\"isset\", true);\r\n  } // Add a row to grid\r\n\r\n  function addGridRow(el) {\r\n    var _bootstrap$Tooltip$ge2;\r\n\r\n    var $grid = $__default[\"default\"](el).closest(\".ew-grid\"),\r\n        $tbl = $grid.find(\"table.ew-table\").last(),\r\n        $p = $tbl.parent(\"div\"),\r\n        $tpl = $tbl.find(\"tr.ew-template\");\r\n    if (!el || !$grid[0] || !$tbl[0] || !$tpl[0]) return false;\r\n    var $lastrow = $__default[\"default\"]($tbl[0].rows).last();\r\n    $tbl.find(\"td.ew-table-last-row\").removeClass(\"ew-table-last-row\");\r\n    var $row = $tpl.clone(true, true).removeClass(\"ew-template\");\r\n    var $form = $grid.find(\"div.ew-form[id^=f][id$=grid]\");\r\n    if (!$form[0]) $form = $grid.find(\"form.ew-form[id^=f][id$=list]\");\r\n    var suffix = $form.is(\"div\") ? \"_\" + $form.attr(\"id\") : \"\";\r\n    var $elkeycnt = $form.find(\"#key_count\" + suffix);\r\n    var keycnt = parseInt($elkeycnt.val(), 10) + 1;\r\n    $row.attr({\r\n      \"id\": \"r\" + keycnt + $row.attr(\"id\").substring(2),\r\n      \"data-rowindex\": keycnt\r\n    });\r\n    var $els = $tpl.find(\"script:contains('$rowindex$')\"); // Get scripts with rowindex\r\n\r\n    $row.children(\"td\").each(function () {\r\n      $__default[\"default\"](this).find(\"*\").each(function () {\r\n        $__default[\"default\"].each(this.attributes, function (i, attr) {\r\n          attr.value = attr.value.replace(/\\$rowindex\\$/g, keycnt); // Replace row index\r\n        });\r\n      });\r\n    });\r\n    var $btn = $row.find(\".ew-icon\").closest(\"a, button\");\r\n    (_bootstrap$Tooltip$ge2 = bootstrap.Tooltip.getInstance($btn[0])) == null ? void 0 : _bootstrap$Tooltip$ge2.dispose();\r\n    $btn.tooltip({\r\n      container: \"body\",\r\n      placement: \"bottom\",\r\n      trigger: \"hover\",\r\n      sanitizeFn: ew.sanitizeFn\r\n    });\r\n    $elkeycnt.val(keycnt).after($__default[\"default\"](\"<input>\").attr({\r\n      type: \"hidden\",\r\n      id: \"k\" + keycnt + \"_action\" + suffix,\r\n      name: \"k\" + keycnt + \"_action\" + suffix,\r\n      value: \"insert\"\r\n    }));\r\n    $lastrow.after($row);\r\n    $els.each(function () {\r\n      addScript(this.text.replace(/\\$rowindex\\$/g, keycnt));\r\n    });\r\n    var frm = $form.data(\"form\");\r\n    frm == null ? void 0 : frm.initEditors();\r\n    frm == null ? void 0 : frm.initUpload();\r\n    setupTable(-1, $tbl[0], true);\r\n    $p.scrollTop($p[0].scrollHeight);\r\n    return false;\r\n  } // Delete a row from grid\r\n\r\n  function deleteGridRow(el, infix) {\r\n    var _bootstrap$Tooltip$ge3;\r\n\r\n    (_bootstrap$Tooltip$ge3 = bootstrap.Tooltip.getInstance(el)) == null ? void 0 : _bootstrap$Tooltip$ge3.dispose();\r\n    var $el = $__default[\"default\"](el),\r\n        $grid = $el.closest(\".ew-grid, .ew-multi-column-grid\"),\r\n        $row = $el.closest(\"tr, div[data-rowindex]\"),\r\n        $tbl = $row.closest(\".ew-table\");\r\n    if (!el || !$grid[0] || !$row[0]) return false;\r\n    var rowidx = parseInt($row.data(\"rowindex\"), 10);\r\n    var $form = $grid.find(\"div.ew-form[id^=f][id$=grid]\");\r\n    if (!$form[0]) $form = $grid.find(\"form.ew-form[id^=f][id$=list]\");\r\n    var frm = $form.data(\"form\");\r\n    if (!$form[0] || !frm) return false;\r\n    var suffix = $form.is(\"div\") ? \"_\" + $form.attr(\"id\") : \"\";\r\n    var keycntname = \"#key_count\" + suffix;\r\n\r\n    var _delete = function () {\r\n      $row.remove();\r\n      if ($grid.is(\".ew-grid\")) setupTable(-1, $tbl[0], true);\r\n\r\n      if (rowidx > 0) {\r\n        var $keyact = $form.find(\"#k\" + rowidx + \"_action\" + suffix);\r\n\r\n        if ($keyact[0]) {\r\n          $keyact.val($keyact.val() == \"insert\" ? \"insertdelete\" : \"delete\");\r\n        } else {\r\n          $form.find(keycntname).after($__default[\"default\"](\"<input>\").attr({\r\n            type: \"hidden\",\r\n            id: \"k\" + rowidx + \"_action\" + suffix,\r\n            name: \"k\" + rowidx + \"_action\" + suffix,\r\n            value: \"delete\"\r\n          }));\r\n        }\r\n      }\r\n    };\r\n\r\n    if (isFunction$2(frm.emptyRow) && frm.emptyRow(infix)) {\r\n      // Empty row\r\n      _delete();\r\n    } else {\r\n      // Confirm\r\n      _prompt(ew.language.phrase(\"DeleteConfirmMsg\"), result => {\r\n        if (result) _delete();\r\n      });\r\n    }\r\n\r\n    return false;\r\n  } // HTML encode text\r\n\r\n  function htmlEncode(text) {\r\n    var str = String(text);\r\n    return str.replace(/&/g, '&amp;').replace(/\\\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n  } // HTML decode text\r\n\r\n  function htmlDecode(text) {\r\n    var str = String(text);\r\n    return str.replace(/&amp;/g, '&').replace(/&quot;/g, '\"').replace(/&lt;/g, '<').replace(/&gt;/g, '>');\r\n  } // Get form element(s) as single element or array of radio/checkbox\r\n\r\n  function getElements(el, root) {\r\n    var selector;\r\n\r\n    if ($__default[\"default\"].isObject(el) && el.dataset) {\r\n      // HTML element (e.g. radio/checkbox)\r\n      selector = \"[data-table='\" + el.dataset.table + \"'][data-field='\" + el.dataset.field + \"']:not([name^=o]):not([name^='x$'])\";\r\n    } else if ($__default[\"default\"].isString(el)) {\r\n      selector = \"[name='\" + el + \"']\";\r\n      var ar = el.split(\" \"); // Check if \"#id name\"\r\n\r\n      if (ar.length == 2) selector = \"[data-table='\" + ar[0] + \"'][data-field='\" + getId(ar[1]) + \"']:not([name^=o]):not([name^='x$'])\"; // Remove []\r\n    }\r\n\r\n    var root = !$__default[\"default\"].isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    selector = \"input\" + selector + \",select\" + selector + \",textarea\" + selector + \",button\" + selector + \",selection-list\" + selector;\r\n    var $els = root ? $__default[\"default\"](root).find(selector) : $__default[\"default\"](selector);\r\n    if ($els.length == 1 && $els.is(\":not([type=checkbox]):not([type=radio])\")) return $els[0];\r\n    if ($els.length == 2 && $els.eq(0).is(\"selection-list\") && $els.eq(1).is(\"input[type=hidden]\")) // Polyfill for the ElementInternals\r\n      return $els[0];\r\n    return $els.get();\r\n  } // Get first element (not necessarily form element)\r\n\r\n  function getElement(name, root) {\r\n    var root = $__default[\"default\"].isString(root) ? \"#\" + root : root,\r\n        selector = \"#\" + name.replace(/([\\$\\[\\]])/g, \"\\\\$1\") + \",[name='\" + name + \"']\";\r\n    return root ? $__default[\"default\"](root).find(selector)[0] : $__default[\"default\"](selector).first()[0];\r\n  } // Get ancestor by function\r\n\r\n  function getAncestorBy(node, fn) {\r\n    while (node = node.parentNode) {\r\n      var _node;\r\n\r\n      if (((_node = node) == null ? void 0 : _node.nodeType) == 1 && (!fn || fn(node))) return node;\r\n    }\r\n\r\n    return null;\r\n  } // Check if an element is hidden\r\n\r\n  function isHidden(el) {\r\n    var $el = $__default[\"default\"](el);\r\n    return $el.css(\"display\") == \"none\" && !$el.is(\"selection-list\") && !$el.closest(\".dropdown-menu\")[0] && !isModalLookup(el) && !isAutoSuggest(el) && !isHiddenTextArea(el) || getAncestorBy(el, node => node.style.display == \"none\" && !node.classList.contains(\"tab-pane\") && !node.classList.contains(\"collapse\")) != null;\r\n  } // Check if same text\r\n\r\n  function sameText(o1, o2) {\r\n    return String(o1).toLowerCase() == String(o2).toLowerCase();\r\n  } // Check if same string\r\n\r\n  function sameString(o1, o2) {\r\n    return String(o1) == String(o2);\r\n  } // Get element value\r\n\r\n  function getValue(el, form) {\r\n    if (!el) return \"\";\r\n    let obj;\r\n\r\n    if ($__default[\"default\"].isString(el)) {\r\n      let ar = el.split(\" \");\r\n\r\n      if (ar.length == 2) {\r\n        // Parent field in master table\r\n        obj = getElements(el);\r\n      } else {\r\n        obj = getElements(el, form);\r\n      }\r\n    } else if (el.type == \"radio\" || el.type == \"checkbox\") {\r\n      // Single radio/checkbox\r\n      obj = getElements(el);\r\n    } else {\r\n      obj = el;\r\n    }\r\n\r\n    if (obj.options) {\r\n      // Selection list\r\n      if (obj.list) {\r\n        let val = obj.values;\r\n        return obj.multiple ? val : val[0] || \"\";\r\n      } else {\r\n        let val = Array.prototype.filter.call(obj.options, option => option.selected && option.value !== \"\").map(option => option.value);\r\n        return obj.type == \"select-multiple\" ? val : val[0] || \"\";\r\n      }\r\n    } else if ($__default[\"default\"].isNumber(obj.length)) {\r\n      // Radio/Checkbox list, or element not found\r\n      let val = $__default[\"default\"](obj).filter(\":checked\").map(function () {\r\n        return this.value;\r\n      }).get();\r\n      return obj.length == 1 ? val[0] : val;\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $__default[\"default\"](obj).data(\"editor\").save();\r\n      return obj.value;\r\n    } else {\r\n      // text/hidden\r\n      let data = $__default[\"default\"](obj).data();\r\n      if (data.lookup && data.multiple) // Modal-Lookup\r\n        return obj.value.split(ew.MULTIPLE_OPTION_SEPARATOR);else return obj.value;\r\n    }\r\n  } // Get existing selected values as an array\r\n\r\n  function getOptionValues(el, form) {\r\n    var obj;\r\n\r\n    if ($__default[\"default\"].isString(el)) {\r\n      var ar = el.split(\" \");\r\n\r\n      if (ar.length == 2) {\r\n        // Parent field in master table\r\n        obj = getElements(el);\r\n      } else {\r\n        obj = getElements(el, form);\r\n      }\r\n    } else if (el.type == \"radio\" || el.type == \"checkbox\") {\r\n      // Single radio/checkbox\r\n      obj = getElements(el);\r\n    } else {\r\n      obj = el;\r\n    }\r\n\r\n    if (obj.options) {\r\n      // Selection list\r\n      if (obj.list) return obj.values;else return Array.prototype.filter.call(obj.options, option => option.selected && option.value !== \"\").map(option => option.value);\r\n    } else if ($__default[\"default\"].isNumber(obj.length)) {\r\n      // Radio/Checkbox list, or element not found\r\n      return $__default[\"default\"](obj).filter(\":checked\").map(function () {\r\n        return this.value;\r\n      }).get();\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $__default[\"default\"](obj).data(\"editor\").save();\r\n      return [obj.value];\r\n    } else {\r\n      // text/hidden\r\n      var data = $__default[\"default\"](obj).data();\r\n      if (data.lookup && data.multiple) // Modal-Lookup\r\n        return obj.value.split(ew.MULTIPLE_OPTION_SEPARATOR);else return [obj.value];\r\n    }\r\n  } // Get existing text of selected values as an array\r\n\r\n  function getOptionTexts(el, form) {\r\n    var obj;\r\n\r\n    if ($__default[\"default\"].isString(el)) {\r\n      var ar = el.split(\" \");\r\n\r\n      if (ar.length == 2) {\r\n        // Parent field in master table\r\n        obj = getElements(el);\r\n      } else {\r\n        obj = getElements(el, form);\r\n      }\r\n    } else {\r\n      obj = el;\r\n    }\r\n\r\n    if (isAutoSuggest(obj)) {\r\n      // AutoSuggest (before obj.options)\r\n      return [obj.input.value];\r\n    } else if (obj.options) {\r\n      // Selection list\r\n      return Array.prototype.filter.call(obj.options, option => option.selected && option.value !== \"\").map(option => option.text);\r\n    } else if ($__default[\"default\"].isNumber(obj.length)) {\r\n      // Radio/Checkbox list, or element not found\r\n      return $__default[\"default\"](obj).filter(\":checked\").map(function () {\r\n        return $__default[\"default\"](this).parent().text();\r\n      }).get();\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $__default[\"default\"](obj).data(\"editor\").save();\r\n      return [obj.value];\r\n    } else {\r\n      return [obj.value];\r\n    }\r\n  } // Clear existing options\r\n\r\n  function clearOptions(obj) {\r\n    if (obj.options) {\r\n      // Selection list\r\n      var lo = obj.type == \"select-multiple\" || // multiple\r\n      obj.hasAttribute(\"data-dropdown\") || // dropdown\r\n      convertToBool(obj.getAttribute(\"data-pleaseselect\")) === false || // data-pleaseselect=\"false\"\r\n      obj.length > 0 && obj.options[0].value != \"\" // non-empty first element\r\n      ? 0 : 1;\r\n\r\n      if (obj.list) {\r\n        obj.removeAll();\r\n      } else {\r\n        for (var i = obj.length - 1; i >= lo; i--) obj.remove(i);\r\n      }\r\n\r\n      if (isAutoSuggest(obj)) {\r\n        obj.input.value = \"\";\r\n        obj.value = \"\";\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Get the name or id of an element\r\n   *\r\n   * @param {HTMLElement} el - HTML element\r\n   * @param {boolean} [remove=true] - Remove square brackets\r\n   * @returns\r\n   */\r\n\r\n  function getId(el, remove) {\r\n    var id = $__default[\"default\"].isString(el) ? el : $__default[\"default\"](el).attr(\"name\") || $__default[\"default\"](el).attr(\"id\"); // Use name first (id may have suffix)\r\n\r\n    return remove !== false ? id.replace(/\\[\\]$/, \"\") : id;\r\n  } // Get display value separator\r\n\r\n  function valueSeparator(index, obj) {\r\n    var sep = $__default[\"default\"](obj).data(\"value-separator\");\r\n    return Array.isArray(sep) ? sep[index - 1] : sep || \", \";\r\n  }\r\n  /**\r\n   * Get display value\r\n   *\r\n   * @param {Object} opt - Option being displayed\r\n   * @param {HTMLElment} obj - HTML element\r\n   * @returns {string} Display value\r\n   */\r\n\r\n  function displayValue(opt, obj) {\r\n    var text = opt.df;\r\n\r\n    for (var i = 2; i <= 4; i++) {\r\n      if (opt[\"df\" + i] && opt[\"df\" + i] != \"\") {\r\n        var sep = valueSeparator(i - 1, obj);\r\n        if ($__default[\"default\"].isUndefined(sep)) break;\r\n        if ($__default[\"default\"].isValue(text)) text += sep;\r\n        text += opt[\"df\" + i];\r\n      }\r\n    }\r\n\r\n    return text;\r\n  }\r\n  /**\r\n   * Get HTML for a single option\r\n   *\r\n   * @param {*} val - Value of the option\r\n   * @returns {string} HTML\r\n   */\r\n\r\n  function optionHtml(val) {\r\n    return ew.OPTION_HTML_TEMPLATE.replace(/\\{value\\}/g, val);\r\n  }\r\n  /**\r\n   * Get HTML for diplaying all options\r\n   *\r\n   * @param {string[]} options - Array of all options (HTML)\r\n   * @param {number} max - Maximum number of options to show\r\n   * @returns {string} HTML\r\n   */\r\n\r\n  function optionsHtml(options, max) {\r\n    if (options.length > (max || ew.MAX_OPTION_COUNT)) {\r\n      // More than max option count\r\n      return ew.language.phrase(\"CountSelected\").replace(\"%s\", options.length);\r\n    } else if (options.length) {\r\n      // Some options\r\n      var html = \"\";\r\n\r\n      for (var i = 0; i < options.length; i++) html += optionHtml(options[i]);\r\n\r\n      return html;\r\n    } else {\r\n      // No options\r\n      return ew.language.phrase(\"PleaseSelect\");\r\n    }\r\n  }\r\n  /**\r\n   * Create new option\r\n   *\r\n   * @param {(HTMLElement|array)} obj - Selection list\r\n   * @param {Object} opt - Object for the new option\r\n   * @param {form} f - form object of obj\r\n   * @returns\r\n   */\r\n\r\n  function newOption(obj, opt, f) {\r\n    var frm = forms.get(f.id),\r\n        id = getId(obj),\r\n        list = frm.getList(id),\r\n        value = opt.lf,\r\n        item = {\r\n      lf: opt.lf,\r\n      df: opt.df,\r\n      df2: opt.df2,\r\n      df3: opt.df3,\r\n      df4: opt.df4\r\n    },\r\n        text;\r\n\r\n    if (list.template && !isAutoSuggest(obj)) {\r\n      text = list.template.render(item, ew.jsRenderHelpers);\r\n    } else {\r\n      text = displayValue(opt, obj) || value;\r\n    }\r\n\r\n    var args = {\r\n      \"data\": item,\r\n      \"name\": id,\r\n      \"form\": f.$element,\r\n      \"value\": value,\r\n      \"text\": text\r\n    };\r\n\r\n    if (obj.options) {\r\n      // Selection list\r\n      let option;\r\n\r\n      if (obj.list) {\r\n        option = new SelectionListOption(args.value, args.text);\r\n      } else {\r\n        option = document.createElement(\"option\");\r\n        option.value = args.value;\r\n        option.innerHTML = args.text;\r\n      }\r\n\r\n      args = { ...args,\r\n        option\r\n      };\r\n      $document$1.trigger(\"newoption\", [args]); // Fire \"newoption\" event for selection list\r\n\r\n      if (obj.list) {\r\n        obj.add(args.option.value, args.option.text);\r\n      } else {\r\n        obj.add(args.option);\r\n      }\r\n    }\r\n\r\n    return args.text;\r\n  } // Select combobox option\r\n\r\n  function selectOption(obj, values) {\r\n    if (!obj || !values) return;\r\n    var $obj = $__default[\"default\"](obj);\r\n\r\n    if (Array.isArray(values)) {\r\n      if (obj.options) {\r\n        // Selection list\r\n        if (obj.list) {\r\n          obj.value = values;\r\n        } else {\r\n          var _obj$options$;\r\n\r\n          $obj.val(values);\r\n          if (obj.type == \"select-one\" && obj.selectedIndex == -1 && !((_obj$options$ = obj.options[0]) != null && _obj$options$.value)) obj.selectedIndex = 0; // Make sure an option is selected\r\n        }\r\n\r\n        if (isAutoSuggest(obj) && values.length == 1) {\r\n          let opts = obj.options || [];\r\n\r\n          for (let opt of opts) {\r\n            if (opt.value == values[0]) {\r\n              obj.value = opt.value;\r\n              obj.input.value = opt.text;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      } else if (obj.type) {\r\n        obj.value = values.join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n      }\r\n    } // Auto-select if only one option\r\n\r\n    function isAutoSelect(el) {\r\n      if (!$__default[\"default\"](el).data(\"autoselect\")) // data-autoselect=\"false\"\r\n        return false;\r\n      var form = getForm(el);\r\n\r\n      if (form) {\r\n        if (/s(ea)?rch$/.test(form.id)) // Search forms\r\n          return false;\r\n        var list = forms.get(form.id).getList(el.id);\r\n        if ((list == null ? void 0 : list.parentFields.length) === 0) // No parent fields\r\n          return false;\r\n        return true;\r\n      }\r\n\r\n      return false;\r\n    }\r\n\r\n    if (!isAutoSelect(obj)) return;\r\n\r\n    if (obj.options) {\r\n      // Selection List\r\n      if (!obj.list && obj.type == \"select-one\" && obj.options.length == 2 && !obj.options[1].selected) {\r\n        obj.options[1].selected = true;\r\n        $obj.trigger(\"change\");\r\n      } else if (obj.options.length == 1 && !obj.options[0].selected) {\r\n        obj.options[0].selected = true;\r\n        $obj.trigger(\"change\");\r\n      }\r\n\r\n      if (obj.list) obj.render();\r\n\r\n      if (isAutoSuggest(obj)) {\r\n        let opts = obj.options || [];\r\n\r\n        if (opts.length == 1) {\r\n          obj.value = opts[0].value;\r\n          obj.input.value = opts[0].text;\r\n        }\r\n      }\r\n    }\r\n  } // Fetch API\r\n\r\n  function _fetch(url, init) {\r\n    var _init;\r\n\r\n    (_init = init) != null ? _init : init = {};\r\n    let apiUrl = getApiUrl(),\r\n        isApi = url.startsWith(apiUrl); // Is API request\r\n\r\n    if (isApi && ew.API_JWT_TOKEN && !ew.IS_WINDOWS_AUTHENTICATION) {\r\n      // Do NOT set JWT authorization header if Windows Authentication\r\n      init.headers = new Headers(init.headers || {});\r\n      init.headers.set(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN);\r\n    }\r\n\r\n    if (!init.method || init.method == \"GET\") {\r\n      // GET\r\n      let ar = url.split(\"?\"),\r\n          params = new URLSearchParams(ar[1]);\r\n      params.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name // PHP\r\n\r\n      params.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token // PHP\r\n\r\n      if (init.body instanceof FormData || $__default[\"default\"].isString(init.body) || $__default[\"default\"].isObject(init.body) || Array.isArray(init.body) && init.body.every(item => Array.isArray(item) && item.length == 2)) {\r\n        // String, object or array of array\r\n        let body = new URLSearchParams(init.body);\r\n        body.forEach((value, key) => params.set(key, value));\r\n      }\r\n\r\n      ar[1] = params.toString();\r\n      url = ar[0] + (ar[1] ? \"?\" + ar[1] : \"\");\r\n      return fetch(url);\r\n    } else {\r\n      // POST\r\n      if (init.body instanceof FormData) {\r\n        // FormData\r\n        init.body.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name // PHP\r\n\r\n        init.body.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token // PHP\r\n      } else if ($__default[\"default\"].isString(init.body) || $__default[\"default\"].isObject(init.body) || Array.isArray(init.body) && init.body.every(item => Array.isArray(item) && item.length == 2)) {\r\n        // String, object or array of array\r\n        init.body = new URLSearchParams(init.body);\r\n        init.body.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name // PHP\r\n\r\n        init.body.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token // PHP\r\n      }\r\n\r\n      return fetch(url, init);\r\n    }\r\n  }\r\n\r\n  $document$1.ajaxSend(function (event, jqxhr, settings) {\r\n    var url = settings.url,\r\n        apiUrl = getApiUrl(),\r\n        isApi = url.startsWith(apiUrl),\r\n        // Is API request\r\n    allowed = isApi || url.startsWith(ew.PATH_BASE) || url.startsWith(currentPage());\r\n\r\n    if (!allowed && url.match(/^http/i)) {\r\n      var objUrl = new URL(url);\r\n      allowed = objUrl.hostname == currentUrl.hostname; // Same host name\r\n    }\r\n\r\n    if (allowed) {\r\n      if (isApi && ew.API_JWT_TOKEN && !ew.IS_WINDOWS_AUTHENTICATION) // Do NOT set JWT authorization header if Windows Authentication\r\n        jqxhr.setRequestHeader(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN);\r\n\r\n      if (settings.type == \"GET\" || settings.contentType == \"application/json\") {\r\n        // GET or sending JSON data\r\n        var ar = settings.url.split(\"?\"),\r\n            params = new URLSearchParams(ar[1]);\r\n        params.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name // PHP\r\n\r\n        params.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token // PHP\r\n\r\n        ar[1] = params.toString();\r\n        settings.url = ar[0] + (ar[1] ? \"?\" + ar[1] : \"\");\r\n      } else {\r\n        // POST\r\n        if (settings.data instanceof FormData) {\r\n          // FormData\r\n          settings.data.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name // PHP\r\n\r\n          settings.data.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token // PHP\r\n        } else {\r\n          var params = new URLSearchParams(settings.data);\r\n          params.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name // PHP\r\n\r\n          params.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token // PHP\r\n\r\n          settings.data = params.toString();\r\n        }\r\n      }\r\n    }\r\n  }); // Ajax start\r\n\r\n  $document$1.ajaxStart(function () {\r\n    $document$1.data(\"_ajax\", true);\r\n    $__default[\"default\"](\"form.ew-form\").addClass(\"ew-wait\").each(function () {\r\n      var frm = forms.get(this.id);\r\n\r\n      if (frm) {\r\n        if (!frm.multiPage || !frm.multiPage.lastPageSubmit) frm.disableForm();\r\n      }\r\n    });\r\n  }); // Ajax stop (internal)\r\n\r\n  function _ajaxStop() {\r\n    $__default[\"default\"](\"form.ew-form.ew-wait\").removeClass(\"ew-wait\").each(function () {\r\n      var frm = forms.get(this.id);\r\n\r\n      if (frm) {\r\n        if (!frm.multiPage || !frm.multiPage.lastPageSubmit) {\r\n          frm.enableForm();\r\n        }\r\n      }\r\n    });\r\n    $document$1.data(\"_ajax\", false);\r\n  } // Ajax stop/error\r\n\r\n  $document$1.ajaxStop(_ajaxStop).ajaxError(_ajaxStop); // Execute JavaScript in HTML loaded by Ajax\r\n\r\n  function executeScript(html, id) {\r\n    let matches = html.replace(/<head>[\\s\\S]*<\\/head>/, \"\").matchAll(/<script([^>]*)>([\\s\\S]*?)<\\/script\\s*>/ig);\r\n    Array.from(document.createRange().createContextualFragment(Array.from(matches).map(m => m[0]).join(\"\")).querySelectorAll(\"script:not([type]), script[type='text/javascript']\")).sort((s1, s2) => s2.classList.contains(\"ew-apply-template\") ? 1 : s1.classList.contains(\"ew-apply-template\") ? -1 : 0) // Execute custom template first\r\n    .forEach((s, i) => addScript(s, \"scr_\" + id + \"_\" + i));\r\n  } // Strip JavaScript in HTML loaded by Ajax\r\n\r\n  function stripScript(html) {\r\n    let matches = html.matchAll(/<script([^>]*)>([\\s\\S]*?)<\\/script\\s*>/ig);\r\n    return Array.from(matches).filter(m => document.createRange().createContextualFragment(m[0]).querySelector(\"script:not([type]), script[type='text/javascript']\")).reduce((html, m) => html.replace(m[0], \"\"), html);\r\n  } // Add SCRIPT tag\r\n\r\n  function addScript(text, id) {\r\n    let scr = text instanceof HTMLScriptElement ? text : document.createElement(\"SCRIPT\");\r\n    if ($__default[\"default\"].isString(text)) scr.text = text;\r\n    if (id) scr.id = id;\r\n    return document.body.appendChild(scr); // Do not use jQuery so it can be removed\r\n  } // Remove JavaScript added by Ajax\r\n\r\n  function removeScript(id) {\r\n    if (id) $__default[\"default\"](\"script[id^='scr_\" + id + \"_']\").remove();\r\n  } // Clean HTML loaded by Ajax for modal dialog\r\n\r\n  function getContent(html) {\r\n    let body = stripScript(html),\r\n        m = body.match(/<body[\\s\\S]*>[\\s\\S]*<\\/body>/i);\r\n    body = m ? m[0] : body;\r\n    let $content = $__default[\"default\"](body).find(\"section.content\");\r\n    return $content[0] ? $content : $__default[\"default\"](body);\r\n  } // Get all options of Selection list or Radio/Checkbox list as array\r\n\r\n  function getOptions(obj) {\r\n    return obj.options ? Array.prototype.map.call(obj.options, opt => [opt.value, opt.text]) : [];\r\n  }\r\n  /**\r\n   * Show dialog for enabling two factor authentication\r\n   */\r\n\r\n  function enable2FA() {\r\n    let url = ew.getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SHOW]); // Show QR Code\r\n\r\n    $body.css(\"cursor\", \"wait\");\r\n    $__default[\"default\"].get(url, result => {\r\n      var _result$error2;\r\n\r\n      if (result != null && result.url) {\r\n        _prompt({\r\n          imageUrl: result.url,\r\n          html: ew.language.phrase(\"Scan2FAQrCode\"),\r\n          input: \"text\",\r\n          confirmButtonText: ew.language.phrase(\"Verify\"),\r\n          showLoaderOnConfirm: true,\r\n          allowEscapeKey: false,\r\n          allowOutsideClick: () => !Swal.isLoading(),\r\n          willOpen: () => {\r\n            Swal.showLoading(Swal.getConfirmButton());\r\n            Swal.disableInput();\r\n\r\n            Swal.getImage().onload = () => {\r\n              Swal.enableInput();\r\n              Swal.hideLoading();\r\n              Swal.getInput().focus();\r\n            };\r\n          },\r\n          preConfirm: value => {\r\n            return $__default[\"default\"].get(ew.getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_VERIFY, value])).then(result => {\r\n              if ((result == null ? void 0 : result.success) !== true) Swal.showValidationMessage(ew.language.phrase(\"2FAVerificationFailed\"));\r\n              return result;\r\n            }).catch(error => Swal.showValidationMessage(error));\r\n          }\r\n        }, result => {\r\n          var _result$error;\r\n\r\n          if (result != null && (_result$error = result.error) != null && _result$error.description) {\r\n            showToast(result.error.description);\r\n          } else if (result != null && result.success) {\r\n            showToast(ew.language.phrase(\"2FAEnabled\"), \"success\");\r\n            $__default[\"default\"](\"#enable-2fa\").addClass(\"d-none\");\r\n            $__default[\"default\"](\"#disable-2fa, #backup-codes\").removeClass(\"d-none\");\r\n          }\r\n        }).catch(err => showToast(err == null ? void 0 : err.message));\r\n      } else if (result != null && (_result$error2 = result.error) != null && _result$error2.description) {\r\n        _alert(result.error.description);\r\n      }\r\n    }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => $body.css(\"cursor\", \"default\"));\r\n    return false;\r\n  }\r\n  /**\r\n   * Show dialog for disabling two factor authentication\r\n   */\r\n\r\n  function disable2FA() {\r\n    _prompt({\r\n      html: ew.language.phrase(\"Disable2FAMsg\"),\r\n      preConfirm: value => {\r\n        if (value) return $__default[\"default\"].get(ew.getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_RESET])).then(result => {\r\n          var _result$error3;\r\n\r\n          if (result != null && (_result$error3 = result.error) != null && _result$error3.description) showToast(result.error.description);else if ((result == null ? void 0 : result.success) !== true) showToast(ew.language.phrase(\"2FAResetFailed\"));\r\n          return result;\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown));\r\n      }\r\n    }, result => {\r\n      var _result$error4;\r\n\r\n      if (result != null && (_result$error4 = result.error) != null && _result$error4.description) {\r\n        showToast(result.error.description);\r\n      } else if (result != null && result.success) {\r\n        showToast(ew.language.phrase(\"2FADisabled\"), \"success\");\r\n        $__default[\"default\"](\"#enable-2fa\").removeClass(\"d-none\");\r\n        $__default[\"default\"](\"#disable-2fa, #backup-codes\").addClass(\"d-none\");\r\n      }\r\n    }).catch(err => showToast(err == null ? void 0 : err.message));\r\n  }\r\n  /**\r\n   * Show backup codes for two factor authentication\r\n   */\r\n\r\n  function showBackupCodes() {\r\n    let html = \"<p>\" + ew.language.phrase(\"BackupCodesMsg\") + \"</p>\";\r\n    return _alert({\r\n      title: ew.language.phrase(\"BackupCodes\"),\r\n      html: html,\r\n      showDenyButton: true,\r\n      showLoaderOnDeny: true,\r\n      showCancelButton: true,\r\n      confirmButtonText: ew.language.phrase(\"CopyToClipboard\"),\r\n      denyButtonText: ew.language.phrase(\"GetNewCodes\"),\r\n      customClass: {\r\n        denyButton: \"btn btn-primary ew-swal2-deny-button\"\r\n      },\r\n      willOpen: () => {\r\n        Swal.showLoading();\r\n        Swal.disableButtons();\r\n        $__default[\"default\"].get(ew.getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_BACKUP_CODES])).then(result => {\r\n          if (result.success && Array.isArray(result.codes)) {\r\n            Swal.update({\r\n              html: html + \"<textarea class=\\\"form-control ew-backup-codes\\\" readonly>\" + result.codes.join(\"\\n\") + \"</textarea>\"\r\n            });\r\n            Swal.enableButtons();\r\n            Swal.getConfirmButton().focus();\r\n          }\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => Swal.hideLoading());\r\n      },\r\n      preConfirm: () => {\r\n        let codes = copyToClipboard(Swal.getHtmlContainer().querySelector(\"textarea\"));\r\n        if (codes) showToast(ew.language.phrase(\"CopiedToClipboard\"), \"success\");\r\n        return false; // Keep the alert open\r\n      },\r\n      preDeny: async () => {\r\n        Swal.showLoading(Swal.getDenyButton());\r\n        await $__default[\"default\"].get(ew.getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_NEW_BACKUP_CODES])).then(result => {\r\n          if (result.success && Array.isArray(result.codes)) {\r\n            Swal.update({\r\n              html: html + \"<textarea class=\\\"form-control ew-backup-codes\\\" readonly>\" + result.codes.join(\"\\n\") + \"</textarea>\"\r\n            });\r\n            Swal.getConfirmButton().focus();\r\n          }\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => Swal.hideLoading());\r\n        return false; // Keep the alert open\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * Show Add Option dialog\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {HTMLElement} args.lnk - Add option anchor element\r\n   * @param {string} args.el - Form element name\r\n   * @param {string} args.url - URL of the Add form\r\n   * @returns\r\n   */\r\n\r\n  function addOptionDialogShow(args) {\r\n    var _args$evt;\r\n\r\n    args.lnk = args.lnk || ((_args$evt = args.evt) == null ? void 0 : _args$evt.currentTarget); // Hide dialog\r\n\r\n    var _hide = function () {\r\n      removeScript($dlg.data(\"args\").el);\r\n      var frm = $dlg.removeData(\"args\").find(\".modal-body form\").data(\"form\");\r\n      if (frm) frm.destroyEditor();\r\n      $dlg.find(\".modal-body\").html(\"\");\r\n      $dlg.find(\".modal-footer .btn-primary\").off();\r\n      $dlg.data(\"showing\", false);\r\n    };\r\n\r\n    var $dlg = ew.addOptionDialog || $__default[\"default\"](\"#ew-add-opt-dialog\").on(\"hidden.bs.modal\", _hide);\r\n\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-add-opt-dialog not found.\");\r\n\r\n      return;\r\n    }\r\n\r\n    if ($dlg.data(\"showing\")) return;\r\n    $dlg.data(\"showing\", true); // Submission success\r\n\r\n    var _submitSuccess = function (data) {\r\n      var _results;\r\n\r\n      var results = data,\r\n          args = $dlg.data(\"args\"),\r\n          frm = forms.get(args.lnk),\r\n          // form object\r\n      objName = $dlg.find(\".modal-body form input[name='\" + ew.API_OBJECT_NAME + \"']\").val(),\r\n          // Get object name from form\r\n      el = args.el,\r\n          // HTML element name\r\n      re = /^x(\\d+)_/,\r\n          m = el.match(re),\r\n          // Check row index\r\n      prefix = m ? m[0] : \"x_\",\r\n          index = m ? m[1] : -1,\r\n          name = el.replace(re, \"x_\"),\r\n          list = frm.getList(el);\r\n      if ($__default[\"default\"].isString(data)) results = parseJson(data);\r\n\r\n      if ((_results = results) != null && _results.success && results[objName]) {\r\n        // Success\r\n        $dlg.modal(\"hide\");\r\n        var result = results[objName],\r\n            form = frm.$element[0],\r\n            // HTML form or DIV\r\n        obj = getElements(el, form);\r\n\r\n        if (obj) {\r\n          var lf = list.linkField,\r\n              dfs = list.displayFields.slice(),\r\n              // Clone\r\n          ffs = list.filterFields.slice(),\r\n              // Clone\r\n          pfs = list.parentFields.slice(); // Clone\r\n\r\n          pfs.forEach((pf, i) => {\r\n            if (pf.split(\" \").length == 1) // Parent field in the same table, add row index\r\n              pfs[i] = pfs[i].replace(/^x_/, prefix);\r\n          });\r\n          var lfv = lf != \"\" ? result[lf] : \"\",\r\n              row = {\r\n            lf: lfv\r\n          };\r\n          dfs.forEach((df, i) => {\r\n            if (df in result) row[\"df\" + (i || \"\")] = result[df];\r\n          });\r\n          ffs.forEach((ff, i) => {\r\n            if (ff in result) row[\"ff\" + (i || \"\")] = result[ff];\r\n          });\r\n\r\n          if (lfv && dfs.length > 0 && row[\"df\"]) {\r\n            if (list.ajax === null) // Non-Ajax\r\n              list.lookupOptions.push(row);\r\n            var arp = pfs.map(pf => getOptionValues(pf, form)),\r\n                // Get the parent field values\r\n            args = {\r\n              \"data\": row,\r\n              \"parents\": arp,\r\n              \"valid\": true,\r\n              \"name\": getId(obj),\r\n              \"form\": form\r\n            };\r\n            $document$1.trigger(\"addoption\", [args]);\r\n\r\n            if (args.valid) {\r\n              // Add the new option\r\n              var ar = getOptions(obj),\r\n                  txt = newOption(obj, row, form);\r\n\r\n              if (obj.options) {\r\n                obj.options[obj.options.length - 1].selected = true;\r\n\r\n                if (obj.list) {\r\n                  // Radio/Checkbox list\r\n                  obj.render();\r\n                  $__default[\"default\"](obj.target).find(\"input\").last().trigger(\"focus\");\r\n                }\r\n\r\n                if (isAutoSuggest(obj)) {\r\n                  $__default[\"default\"](obj).val(lfv).trigger(\"change\");\r\n                  $__default[\"default\"](obj.input).val(txt).trigger(\"focus\");\r\n                } else {\r\n                  $__default[\"default\"](obj).trigger(\"change\").trigger(\"focus\");\r\n                }\r\n              }\r\n\r\n              var $form = $__default[\"default\"](form),\r\n                  suffix = $form.is(\"div\") ? \"_\" + $form.attr(\"id\") : \"\";\r\n              var cnt = $form.find(\"#key_count\" + suffix).val();\r\n\r\n              if (cnt > 0) {\r\n                // Grid-Add/Edit, update other rows\r\n                for (var i = 1; i <= cnt; i++) {\r\n                  if (i == index) continue;\r\n                  var obj2 = getElements(name.replace(/^x/, \"x\" + i), form),\r\n                      ar2 = getOptions(obj2);\r\n                  if (JSON.stringify(ar) != JSON.stringify(ar2)) // Not same options\r\n                    continue;\r\n                  newOption(obj2, row, form);\r\n                  if (obj2.options && obj.list) // Radio/Checkbox list\r\n                    obj2.render();\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        var _results2;\r\n\r\n        // Failure\r\n        if ((_results2 = results) != null && _results2.error) {\r\n          var _results$error;\r\n\r\n          if ($__default[\"default\"].isString(results.error)) _alert(results.error);else if ($__default[\"default\"].isString((_results$error = results.error) == null ? void 0 : _results$error.description)) _alert(results.error.description);\r\n        } else {\r\n          var msg,\r\n              $div = $__default[\"default\"](\"<div></div>\").html(data).find(\"div.ew-message-dialog\");\r\n\r\n          if ($div[0]) {\r\n            msg = $div.html();\r\n          } else {\r\n            var _results3;\r\n\r\n            msg = ((_results3 = results) == null ? void 0 : _results3.failureMessage) || data;\r\n            if (!msg || String(msg).trim() == \"\") msg = ew.language.phrase(\"InsertFailed\");\r\n          }\r\n\r\n          _alert(msg);\r\n        }\r\n      }\r\n    }; // Fail\r\n\r\n    var _fail = function (o) {\r\n      $dlg.modal(\"hide\");\r\n\r\n      _alert(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    }; // Submit\r\n\r\n    var _submit = async function (e) {\r\n      let $dlg = ew.addOptionDialog,\r\n          form = $dlg.find(\".modal-body form\")[0],\r\n          frm = forms.get(form.id),\r\n          btn = e ? e.target : null,\r\n          $btn = $__default[\"default\"](btn);\r\n\r\n      if (await frm.canSubmit()) {\r\n        $btn.prop(\"disabled\", false).removeClass(\"disabled\");\r\n        $body.css(\"cursor\", \"wait\");\r\n        $__default[\"default\"].post(getApiUrl([ew.API_ADD_ACTION, form.elements[ew.API_OBJECT_NAME].value]), $__default[\"default\"](form).serialize(), _submitSuccess).fail(_fail).always(function () {\r\n          frm.enableForm();\r\n          $btn.prop(\"disabled\", false).removeClass(\"disabled\");\r\n          $body.css(\"cursor\", \"default\");\r\n        });\r\n      }\r\n\r\n      return false;\r\n    };\r\n\r\n    $dlg.modal(\"hide\");\r\n    $dlg.data(\"args\", args); // Get form HTML\r\n\r\n    var success = function (data) {\r\n      var frm = forms.get(args.lnk),\r\n          prefix = \"x_\",\r\n          m = args.el.match(/^(x\\d+_)/);\r\n      if (m) // Contains row index\r\n        prefix = m[1];\r\n      var list = frm.getList(args.el),\r\n          pfs = list.parentFields.slice() // Clone\r\n      .map(pf => pf.split(\" \").length == 1 ? pf.replace(/^x_/, prefix) : pf),\r\n          // Parent field in the same table, add row index\r\n      form = frm.htmlForm,\r\n          ar = pfs.map(pf => getOptionValues(pf, form)),\r\n          ar2 = pfs.map(pf => getOptionTexts(pf, form)),\r\n          ffs = list.filterFieldVars.slice(); // Clone\r\n\r\n      $dlg.find(\".modal-title\").html($__default[\"default\"](args.lnk).closest(\".ew-add-opt-btn\").data(\"title\"));\r\n      $dlg.find(\".modal-body\").html(stripScript(data));\r\n      var form = $dlg.find(\".modal-body form\")[0];\r\n\r\n      if (form) {\r\n        // Set the filter field value\r\n        $__default[\"default\"](form).on(\"keydown\", function (e) {\r\n          if (e.key == \"Enter\" && e.target.nodeName != \"TEXTAREA\") return _submit();\r\n        });\r\n        ar.forEach((v, i) => {\r\n          (function () {\r\n            var obj = getElements(ffs[i], form);\r\n\r\n            if (obj) {\r\n              if (obj.options || obj.length) {\r\n                // Selection list\r\n                $__default[\"default\"](obj).first().one(\"updated\", () => selectOption(obj, v));\r\n              } else {\r\n                selectOption(obj, v);\r\n              }\r\n            }\r\n          })();\r\n        });\r\n      }\r\n\r\n      ew.addOptionDialog = $dlg.modal(\"show\");\r\n      $dlg.find(\".modal-footer .btn-primary\").click(_submit).focus();\r\n      executeScript(data, args.el);\r\n\r\n      if (form) {\r\n        // Set the filter field value\r\n        ar.forEach((v, i) => {\r\n          var obj = getElements(ffs[i], form);\r\n\r\n          if (obj) {\r\n            if (isAutoSuggest(obj)) {\r\n              // AutoSuggest\r\n              obj.value = v[0];\r\n              obj.input.value = ar2[i][0];\r\n              obj.add(v[0], ar2[i][0], true);\r\n            } else if (obj.options || obj.length) ; else {\r\n              // Text\r\n              obj.value = v[0];\r\n            }\r\n          }\r\n        });\r\n      }\r\n\r\n      $dlg.trigger(\"load.ew\");\r\n    };\r\n\r\n    $__default[\"default\"].get(args.url, success).fail(_fail);\r\n    return false;\r\n  } // Hide Modal dialog\r\n\r\n  function modalDialogHide(e) {\r\n    var $dlg = $__default[\"default\"](this),\r\n        args = $dlg.data(\"args\");\r\n    removeScript(\"modal_dialog\");\r\n    var frm = $dlg.removeData(\"args\").find(\".modal-body form\").data(\"form\");\r\n    frm == null ? void 0 : frm.destroyEditor();\r\n    $dlg.find(\".modal-footer .btn-primary\").off();\r\n    $dlg.find(\".modal-dialog\").removeClass((i, className) => {\r\n      var m = className.match(/table\\-\\w+/);\r\n      return m ? m[0] : \"\";\r\n    });\r\n    $dlg.data({\r\n      showing: false,\r\n      url: null\r\n    });\r\n    if (args != null && args.reload) window.location.reload();\r\n  }\r\n  /**\r\n   * Show modal dialog\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {HTMLFormElement} args.f - Form of List page\r\n   * @param {HTMLElement} args.lnk - Anchor element\r\n   * @param {string} args.url - URL of the form\r\n   * @param {string|null} args.btn - Button phrase ID\r\n   * @param {boolean} args.footer - Show footer (default true)\r\n   * @param {string} args.caption - Caption in dialog header\r\n   * @param {boolean} args.reload - Reload page after hiding dialog or not\r\n   * @param {string} args.size - Class name of modal dialog 'modal-sm'|'modal-md'|modal-lg'|'modal-xl' (default)\r\n   * @returns false\r\n   */\r\n\r\n  function modalDialogShow(args) {\r\n    var _args$evt2, _bootstrap$Tooltip$ge4, _args$evt3, _args$evt3$currentTar, _args$evt4, _args$evt4$currentTar, _$dlg$data;\r\n\r\n    args.lnk = args.lnk || ((_args$evt2 = args.evt) == null ? void 0 : _args$evt2.currentTarget);\r\n    (_bootstrap$Tooltip$ge4 = bootstrap.Tooltip.getInstance(args.lnk)) == null ? void 0 : _bootstrap$Tooltip$ge4.hide();\r\n    var f = args.f || ((_args$evt3 = args.evt) == null ? void 0 : (_args$evt3$currentTar = _args$evt3.currentTarget) == null ? void 0 : _args$evt3$currentTar.form);\r\n\r\n    if (f && !keySelected(f)) {\r\n      _prompt(\"<p class=\\\"text-danger\\\">\" + ew.language.phrase(\"NoRecordSelected\") + \"</p>\");\r\n\r\n      return false;\r\n    }\r\n\r\n    var url = args.url || ((_args$evt4 = args.evt) == null ? void 0 : (_args$evt4$currentTar = _args$evt4.currentTarget) == null ? void 0 : _args$evt4$currentTar.dataset.url),\r\n        $dlg = ew.modalDialog || $__default[\"default\"](\"#ew-modal-dialog\").on(\"hidden.bs.modal\", modalDialogHide); // div#ew-modal-dialog always exists\r\n\r\n    if ($dlg.data(\"showing\") && $dlg.data(\"url\") == url) return false;\r\n    $dlg.data({\r\n      showing: true,\r\n      url: url\r\n    });\r\n    args.reload = false; // size\r\n\r\n    var size = args.size || \"modal-xl\";\r\n    $dlg.find(\".modal-dialog\").removeClass(\"modal-sm modal-md modal-lg modal-xl\").addClass(size); // caption\r\n\r\n    var _caption = function () {\r\n      var args = $dlg.data(\"args\"),\r\n          $lnk = $__default[\"default\"](args.lnk);\r\n      return args.caption || $lnk.data(\"caption\") || $lnk.data(\"original-title\") || \"\";\r\n    }; // button text\r\n\r\n    var _button = function () {\r\n      var args = $dlg.data(\"args\");\r\n      if ($__default[\"default\"].isNull(args.btn)) return \"\";else if (args.btn && args.btn != \"\") return ew.language.phrase(args.btn);else return _caption();\r\n    }; // fail\r\n\r\n    var _fail = function (o) {\r\n      $dlg.modal(\"hide\");\r\n      if (o.status) _alert(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    }; // always\r\n\r\n    var _always = function (o) {\r\n      $body.css(\"cursor\", \"default\");\r\n    }; // check if current page\r\n\r\n    var _current = function (url) {\r\n      var a = $__default[\"default\"](\"<a>\", {\r\n        href: url\r\n      })[0];\r\n      return window.location.pathname.endsWith(a.pathname);\r\n    };\r\n    /**\r\n     * handle result\r\n     *\r\n     * @param {Object} result - Result object\r\n     * @param {string|Object} result.error - Error message or object\r\n     * @param {string} result.error.message - Error message\r\n     * @param {string} result.error.description - Error message\r\n     * @param {string} result.failureMessage - Failure message\r\n     * @param {string} result.successMessage - Success message\r\n     * @param {string} result.warningMessage - Warning message\r\n     * @param {string} result.message - Message\r\n     * @param {string} result.url - Redirection URL\r\n     * @param {string} result.modal - Redirect to result.url in current modal dialog\r\n     * @param {boolean} result.view - result.url is View page => No primary button\r\n     * @param {string} result.caption - Caption of modal dialog for result.url\r\n     * @param {boolean} result.reload - Reload current page\r\n     */\r\n\r\n    var handleResult = function (result) {\r\n      var cb = null,\r\n          url = result.url,\r\n          reload = result.reload;\r\n\r\n      if (url || reload) {\r\n        cb = function () {\r\n          if (url) {\r\n            if (result.modal && !_current(url)) {\r\n              var args = $dlg.data(\"args\");\r\n              args.reload = true;\r\n              args.url = url;\r\n              if (result.caption) args.caption = result.caption;\r\n              args.btn = result.view ? null : \"\";\r\n              $dlg.data({\r\n                args,\r\n                url\r\n              });\r\n              url += (url.split(\"?\").length > 1 ? \"&\" : \"?\") + \"modal=1&rnd=\" + random();\r\n              $body.css(\"cursor\", \"wait\");\r\n              $__default[\"default\"].get(url).done(success).fail(_fail).always(_always);\r\n            } else {\r\n              $dlg.modal(\"hide\");\r\n              window.location = sanitizeUrl(url);\r\n            }\r\n          } else if (reload) {\r\n            $dlg.modal(\"hide\");\r\n            window.location.reload();\r\n          }\r\n        };\r\n      }\r\n\r\n      if ($__default[\"default\"].isString(result.failureMessage)) {\r\n        _alert(result.failureMessage);\r\n      } else if ($__default[\"default\"].isString(result.warningMessage)) {\r\n        _alert(result.warningMessage, cb, \"warning\");\r\n      } else if ($__default[\"default\"].isString(result.message)) {\r\n        _alert(result.message, cb, \"body\");\r\n      } else if ($__default[\"default\"].isString(result.successMessage)) {\r\n        _alert(result.successMessage, cb, \"success\");\r\n      } else if (result.error) {\r\n        var _result$error5, _result$error6;\r\n\r\n        if ($__default[\"default\"].isString(result.error)) _alert(result.error);else if ($__default[\"default\"].isString((_result$error5 = result.error) == null ? void 0 : _result$error5.message)) _alert(result.error.message);else if ($__default[\"default\"].isString((_result$error6 = result.error) == null ? void 0 : _result$error6.description)) _alert(result.error.description);\r\n      } else if (cb) {\r\n        cb();\r\n      }\r\n    }; // submit success\r\n\r\n    var _submitSuccess = function (data) {\r\n      var result = parseJson(data);\r\n\r\n      if ($__default[\"default\"].isObject(result)) {\r\n        handleResult(result);\r\n      } else {\r\n        var body = getContent(data);\r\n\r\n        if (body.length) {\r\n          // Has HTML elements\r\n          var $bd = $dlg.find(\".modal-body\").html(body);\r\n          var footer = \"\";\r\n          var cf = $bd.find(\"#confirm\");\r\n          var ct = $bd.find(\"#conflict\");\r\n\r\n          if ((ct == null ? void 0 : ct.val()) == \"1\") {\r\n            // Conflict page\r\n            footer += \"<button type=\\\"button\\\" id=\\\"btn-overwrite\\\" class=\\\"btn btn-primary ew-btn\\\">\" + ew.language.phrase(\"OverwriteBtn\") + \"</button>\";\r\n            footer += \"<button type=\\\"button\\\" id=\\\"btn-reload\\\" class=\\\"btn btn-default ew-btn\\\">\" + ew.language.phrase(\"ReloadBtn\") + \"</button>\";\r\n            footer += \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\" data-bs-dismiss=\\\"modal\\\">\" + ew.language.phrase(\"CancelBtn\") + \"</button>\";\r\n            $dlg.find(\".modal-footer\").html(footer);\r\n            $dlg.find(\".modal-footer #btn-overwrite\").on('click', {\r\n              action: 'overwrite'\r\n            }, _submit);\r\n            $dlg.find(\".modal-footer #btn-reload\").on('click', {\r\n              action: 'show'\r\n            }, _submit);\r\n          } else if ((cf == null ? void 0 : cf.val()) == \"confirm\") {\r\n            // Confirm page\r\n            footer += \"<button type=\\\"button\\\" class=\\\"btn btn-primary ew-btn\\\">\" + ew.language.phrase(\"ConfirmBtn\") + \"</button>\";\r\n            footer += \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\">\" + ew.language.phrase(\"CancelBtn\") + \"</button>\";\r\n            $dlg.find(\".modal-footer\").html(footer);\r\n            $dlg.find(\".modal-footer .btn-primary\").click(_submit).focus();\r\n            $dlg.find(\".modal-footer .btn-default\").on(\"click\", {\r\n              action: \"cancel\"\r\n            }, _submit);\r\n          } else {\r\n            // Normal page\r\n            var $btn = $dlg.find(\".card-body button[type=submit], .modal-footer .btn-primary\") // Find submit button in card body first\r\n            .first().addClass(\"ew-submit\").click(_submit);\r\n\r\n            if (!$btn[0]) {\r\n              var btn = _button();\r\n\r\n              if (btn) footer += \"<button type=\\\"button\\\" class=\\\"btn btn-primary ew-btn\\\">\" + btn + \"</button>\";\r\n              footer += \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\" data-bs-dismiss=\\\"modal\\\">\" + ew.language.phrase(\"CancelBtn\") + \"</button>\";\r\n              $dlg.find(\".modal-footer\").html(footer);\r\n              $dlg.find(\".modal-footer .btn-primary\").addClass(\"ew-submit\").click(_submit).focus();\r\n            }\r\n          }\r\n\r\n          executeScript(data, \"modal_dialog\");\r\n          $dlg.trigger(\"load.ew\"); // Trigger load event for, e.g. Use JavaScript popup message\r\n        } else if (data) {\r\n          $dlg.modal(\"hide\");\r\n\r\n          _alert(data);\r\n        }\r\n      }\r\n    }; // submit\r\n\r\n    var _submit = async function (e) {\r\n      var form = $dlg.find(\".modal-body form\")[0],\r\n          $form = $__default[\"default\"](form),\r\n          frm = forms.get(form.id),\r\n          action = e != null && e.data ? e.data.action : null,\r\n          btn = e ? e.target : null;\r\n\r\n      if (btn) {\r\n        if (btn.classList.contains(\"disabled\")) return false;\r\n\r\n        frm.enableForm = function () {\r\n          $__default[\"default\"](btn).prop(\"disabled\", false).removeClass(\"disabled\");\r\n        };\r\n\r\n        frm.disableForm = function () {\r\n          $__default[\"default\"](btn).prop(\"disabled\", true).addClass(\"disabled\");\r\n        };\r\n      }\r\n\r\n      var input = form.elements[\"action\"];\r\n      if (action && input) input.value = action; // Update action\r\n\r\n      if (action == \"cancel\") {\r\n        // Cancel\r\n        $__default[\"default\"].post($form.attr(\"action\"), $form.serialize(), success).fail(_fail).always(_always);\r\n      } else if (await frm.canSubmit()) {\r\n        if ($form.hasClass(\"ew-login-form\")) {\r\n          // Login form\r\n          frm.submit(); // Submit the form directly\r\n        } else {\r\n          // Submit by Ajax\r\n          $body.css(\"cursor\", \"wait\");\r\n          $__default[\"default\"].post($form.attr(\"action\"), $form.serialize(), _submitSuccess).fail(_fail).always(function () {\r\n            frm.enableForm();\r\n\r\n            _always();\r\n          });\r\n        }\r\n      }\r\n\r\n      return false;\r\n    };\r\n\r\n    var success = function (data) {\r\n      var result = parseJson(data);\r\n\r\n      if ($__default[\"default\"].isObject(result)) {\r\n        handleResult(result);\r\n      } else {\r\n        var args = $dlg.data(\"args\");\r\n        var $lnk = $__default[\"default\"](args.lnk);\r\n        $dlg.find(\".modal-title\").html(_caption());\r\n        var footer = \"\";\r\n\r\n        var btn = _button();\r\n\r\n        if (btn) footer += \"<button type=\\\"button\\\" class=\\\"btn btn-primary ew-btn\\\">\" + btn + \"</button>\";\r\n        if (footer != \"\") footer += \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\" data-bs-dismiss=\\\"modal\\\">\" + ew.language.phrase(\"CancelBtn\") + \"</button>\";else footer = \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\" data-bs-dismiss=\\\"modal\\\">\" + ew.language.phrase(\"CloseBtn\") + \"</button>\";\r\n        $dlg.find(\".modal-footer\").html(footer).toggle(args.footer !== false);\r\n        var body = getContent(data);\r\n        $dlg.find(\".modal-body\").html(body);\r\n        var table = $lnk.data(\"table\");\r\n        if (table) $dlg.find(\".modal-dialog\").addClass(\"table-\" + table);\r\n        var $btn = $dlg.find(\".card-body button[type=submit], .modal-footer .btn-primary\") // Find submit button in card body first\r\n        .first().addClass(\"ew-submit\").click(_submit);\r\n        $dlg.find(\".modal-body form\").on(\"keydown\", function (e) {\r\n          if (e.key == \"Enter\" && e.target.nodeName != \"TEXTAREA\") {\r\n            $btn.click();\r\n            return false;\r\n          }\r\n        });\r\n        ew.modalDialog = $dlg.modal(\"show\");\r\n        executeScript(data, \"modal_dialog\"); // Fix for CKEditor\r\n\r\n        let modal = bootstrap.Modal.getInstance($dlg[0]);\r\n\r\n        if (!modal._focustrap.__handleFocusin) {\r\n          modal._focustrap.__handleFocusin = modal._focustrap._handleFocusin;\r\n\r\n          modal._focustrap._handleFocusin = function (e) {\r\n            var _e$target10;\r\n\r\n            // Use function for \"this\"\r\n            if ((_e$target10 = e.target) != null && _e$target10.matches(\"[class^=cke_dialog_]\")) // Element from CKEditor dialog\r\n              return; // Do not focus the modal\r\n\r\n            this.__handleFocusin(e);\r\n          };\r\n        }\r\n\r\n        $dlg.trigger(\"load.ew\"); // Trigger load event for, e.g. YouTube videos, ReCAPTCHA and Google maps\r\n\r\n        $btn.focus();\r\n      }\r\n    };\r\n\r\n    if (url && (_$dlg$data = $dlg.data(\"args\")) != null && _$dlg$data.reload) {\r\n      // About to load URL but previous result required reload\r\n      args.reload = true; // Carry the reload state to current args\r\n\r\n      $dlg.data(\"args\").reload = false; // Remove reload so \"hidden\" event will not reload\r\n    }\r\n\r\n    $dlg.modal(\"hide\");\r\n    $dlg.data(\"args\", args);\r\n    $body.css(\"cursor\", \"wait\");\r\n\r\n    if (f) {\r\n      // Post form\r\n      var $f = $__default[\"default\"](f);\r\n      if (!f.elements.modal) $__default[\"default\"](\"<input>\").attr({\r\n        type: \"hidden\",\r\n        name: \"modal\",\r\n        value: \"1\"\r\n      }).appendTo($f);\r\n      $__default[\"default\"].post(url, $f.serialize(), success).fail(_fail).always(_always);\r\n    } else {\r\n      url += (url.split(\"?\").length > 1 ? \"&\" : \"?\") + \"modal=1&rnd=\" + random();\r\n      $__default[\"default\"].get(url, success).fail(_fail).always(_always);\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Show dialog for import\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {HTMLElement} args.lnk - Anchor element\r\n   * @returns\r\n   */\r\n\r\n  function importDialogShow(args) {\r\n    var _args$evt5, _bootstrap$Tooltip$ge5;\r\n\r\n    args.lnk = args.lnk || ((_args$evt5 = args.evt) == null ? void 0 : _args$evt5.currentTarget);\r\n    (_bootstrap$Tooltip$ge5 = bootstrap.Tooltip.getInstance(args.lnk)) == null ? void 0 : _bootstrap$Tooltip$ge5.hide();\r\n    var $dlg = ew.importDialog || $__default[\"default\"](\"#ew-import-dialog\");\r\n\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-import-dialog not found.\");\r\n\r\n      return false;\r\n    }\r\n\r\n    var $input = $dlg.find(\"#importfiles\"),\r\n        $dropzone = $input.closest(\".ew-file-drop-zone\"),\r\n        $bd = $dlg.find(\".modal-body\"),\r\n        $data = $bd.find(\":input[id!=importfiles]\"),\r\n        $message = $bd.find(\".message\"),\r\n        $progress = $bd.find(\".progress\"),\r\n        timer; // Disable buttons\r\n\r\n    var enableButtons = function () {\r\n      $dlg.find(\".modal-footer .btn\").prop(\"disabled\", false);\r\n    }; // Show message\r\n\r\n    var showMessage = function (msg, classname) {\r\n      var $msg = $__default[\"default\"](\"<div>\" + msg + \"</div>\");\r\n      if (classname) $msg.addClass(classname);\r\n      $message.removeClass(\"d-none\").html($msg);\r\n      if (classname == \"text-danger\") enableButtons();\r\n    }; // Hide message\r\n\r\n    var hideMessage = function () {\r\n      $message.addClass(\"d-none\").html(\"\");\r\n    }; // Show progress\r\n\r\n    var showProgress = function (pc, classname) {\r\n      $progress.removeClass(\"d-none\").find(\".progress-bar\").removeClass(\"bg-success bg-info\").addClass(classname || \"bg-success\").attr(\"aria-valuenow\", pc).css(\"width\", pc + \"%\").html(pc + \"%\");\r\n    }; // Hide progress\r\n\r\n    var hideProgress = function () {\r\n      $progress.addClass(\"d-none\").find(\".progress-bar\").attr(\"aria-valuenow\", 0).css(\"width\", \"0%\").html(\"0%\");\r\n    }; // Upload progress\r\n\r\n    var uploadProgress = function (data) {\r\n      var pc = parseInt(100 * data.loaded / data.total);\r\n      showProgress(pc, \"bg-primary\");\r\n\r\n      if (pc === 100) {\r\n        showMessage(ew.language.phrase(\"ImportMessageUploadComplete\"), \"text-primary\");\r\n      } else {\r\n        showMessage(ew.language.phrase(\"ImportMessageUploadProgress\").replace(\"%p\", pc), \"text-primary\");\r\n      }\r\n    }; // Update progress (import)\r\n\r\n    var updateProgress = function (result) {\r\n      try {\r\n        var cnt = parseInt(result.count),\r\n            tcnt = parseInt(result.totalCount),\r\n            filename = result.file;\r\n\r\n        if (tcnt > 0 && $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\")) {\r\n          // Show progress\r\n          var pc = parseInt(100 * cnt / tcnt);\r\n          showProgress(pc);\r\n          showMessage(ew.language.phrase(\"ImportMessageProgress\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", filename), \"text-primary\");\r\n        }\r\n      } catch (e) {}\r\n    }; // Import progress\r\n\r\n    var importProgress = function () {\r\n      var url = getApiUrl(ew.API_PROGRESS_ACTION),\r\n          data = {\r\n        \"rnd\": random()\r\n      };\r\n      data[ew.API_FILE_TOKEN_NAME] = $input.data(ew.API_FILE_TOKEN_NAME);\r\n      $__default[\"default\"].get(url, data, updateProgress, \"json\");\r\n    }; // Import complete\r\n\r\n    var importComplete = function (result) {\r\n      var maxErrorCount = 5;\r\n      var msg = \"\";\r\n      showProgress(100);\r\n      var fileResults = result.files;\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", false); // Stop import progress\r\n\r\n      if (Array.isArray(fileResults)) {\r\n        for (var i = 0, len = fileResults.length; i < len; i++) {\r\n          var fileResult = fileResults[i],\r\n              tcnt = fileResult.totalCount || 0,\r\n              cnt = fileResult.count || 0,\r\n              scnt = fileResult.successCount || 0,\r\n              fcnt = fileResult.failCount || 0;\r\n          if (msg != \"\") msg += \"<br>\";\r\n\r\n          if (fileResult.success) {\r\n            msg += ew.language.phrase(\"ImportMessageSuccess\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", fileResult.file);\r\n          } else {\r\n            msg += ew.language.phrase(\"ImportMessageError1\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", fileResult.file).replace(\"%s\", scnt).replace(\"%e\", fcnt);\r\n            if (fileResult.error) msg += ew.language.phrase(\"ImportMessageError2\").replace(\"%e\", fileResult.error);\r\n            var showLog = true;\r\n\r\n            if (fileResult.failList) {\r\n              var ecnt = 0;\r\n\r\n              for (var i = 1; i <= cnt; i++) {\r\n                if (fileResult.failList[\"row\" + i]) {\r\n                  ecnt += 1;\r\n                  msg += \"<br>\" + ew.language.phrase(\"ImportMessageError3\").replace(\"%i\", i).replace(\"%d\", fileResult.failList[\"row\" + i]);\r\n                }\r\n\r\n                if (ecnt >= maxErrorCount) break;\r\n              }\r\n\r\n              if (fcnt > maxErrorCount) msg += \"<br>\" + ew.language.phrase(\"ImportMessageMore\").replace(\"%s\", fcnt - maxErrorCount);else showLog = false;\r\n            }\r\n\r\n            if (fileResult.log && showLog) msg += \"<br>\" + ew.language.phrase(\"ImportMessageError4\").replace(\"%l\", fileResult.log);\r\n            showMessage(msg, \"text-danger\"); // Show error message\r\n          }\r\n        }\r\n      }\r\n\r\n      if (result.success) {\r\n        showMessage(msg, \"text-success\");\r\n        $dlg.find(\".modal-footer .ew-close-btn\").data(\"imported\", true);\r\n      } else {\r\n        if (result.error) msg = result.error;\r\n        showMessage(msg, \"text-danger\"); // Show error message\r\n      }\r\n\r\n      hideProgress();\r\n    }; // Import fail\r\n\r\n    var importFail = function (o) {\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", false); // Stop import progress\r\n\r\n      showMessage(ew.language.phrase(\"ImportMessageServerError\").replace(\"%s\", o.status).replace(\"%t\", o.statusText), \"text-danger\");\r\n    }; // Import file\r\n\r\n    var importFiles = function (filetoken) {\r\n      $body.css(\"cursor\", \"wait\");\r\n      $input.data(ew.API_FILE_TOKEN_NAME, filetoken);\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", true); // Show import progress\r\n\r\n      var data = ew.API_ACTION_NAME + \"=import&\" + ew.API_FILE_TOKEN_NAME + \"=\" + encodeURIComponent(filetoken);\r\n      if ($data.length) data += \"&\" + $data.serialize();\r\n      $__default[\"default\"].ajax(currentPage(), {\r\n        \"data\": data,\r\n        \"method\": \"POST\",\r\n        \"dataType\": \"json\",\r\n        \"beforeSend\": function (xhr, settings) {\r\n          timer = $__default[\"default\"].later(100, null, importProgress, null, true); // Use time to show progress periodically\r\n        }\r\n      }).done(importComplete).fail(importFail).always(function () {\r\n        $body.css(\"cursor\", \"default\");\r\n        if (timer) timer.cancel(); // Clear timer\r\n      });\r\n    };\r\n\r\n    var options = ew.importUploadOptions;\r\n    if (!options.acceptFileTypes) options.acceptFileTypes = new RegExp('\\\\.(' + ew.IMPORT_FILE_ALLOWED_EXTENSIONS.replace(/,/g, '|') + ')$', 'i');\r\n\r\n    if (!$input.data(\"blueimpFileupload\")) {\r\n      $input.fileupload(Object.assign({\r\n        url: getApiUrl(ew.API_UPLOAD_ACTION),\r\n        dataType: \"json\",\r\n        autoUpload: true,\r\n        singleFileUploads: false,\r\n        dropZone: $dropzone,\r\n        messages: {\r\n          acceptFileTypes: ew.language.phrase(\"UploadErrMsgAcceptFileTypes\"),\r\n          maxFileSize: ew.language.phrase(\"UploadErrMsgMaxFileSize\"),\r\n          maxNumberOfFiles: ew.language.phrase(\"UploadErrMsgMaxNumberOfFiles\"),\r\n          minFileSize: ew.language.phrase(\"UploadErrMsgMinFileSize\")\r\n        },\r\n        beforeSend: function (jqxhr, settings) {\r\n          settings.data.set(\"session\", ew.SESSION_ID);\r\n          settings.data.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name for $.ajax() sent by jQuery File Upload (not by ajaxSend) // PHP\r\n\r\n          settings.data.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token for $.ajax() sent by jQuery File Upload (not by ajaxSend) // PHP\r\n\r\n          if (ew.API_JWT_TOKEN && !ew.IS_WINDOWS_AUTHENTICATION) // Do NOT set JWT authorization header if Windows Authentication\r\n            jqxhr.setRequestHeader(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN);\r\n        },\r\n        done: function (e, data) {\r\n          var _data$result, _data$result$files;\r\n\r\n          if (Array.isArray(data == null ? void 0 : (_data$result = data.result) == null ? void 0 : (_data$result$files = _data$result.files) == null ? void 0 : _data$result$files.importfiles)) {\r\n            var ok = true;\r\n            data.result.files.importfiles.forEach(function (file, index) {\r\n              if (file.error) {\r\n                showMessage(ew.language.phrase(\"ImportMessageUploadError\").replace(\"%f\", file.name).replace(\"%s\", file.error), \"text-danger\");\r\n                ok = false;\r\n              }\r\n            }); // Show upload errors for each file\r\n\r\n            if (ok) importFiles(data.result[ew.API_FILE_TOKEN_NAME]); // Import uploaded files\r\n          }\r\n        },\r\n        change: function (e, data) {\r\n          hideMessage();\r\n        },\r\n        processfail: function (e, data) {\r\n          data.files.forEach(function (file, index) {\r\n            if (file.error) showMessage(ew.language.phrase(\"ImportMessageUploadError\").replace(\"%f\", file.name).replace(\"%s\", file.error), \"text-danger\");\r\n          }); // Show process errors for each file\r\n        },\r\n        fail: function (e, data) {\r\n          showMessage(ew.language.phrase(\"ImportMessageServerError\").replace(\"%s\", data.textStatus).replace(\"%t\", data.errorThrown), \"text-danger\");\r\n        },\r\n        progressall: function (e, data) {\r\n          uploadProgress(data);\r\n        }\r\n      }, options));\r\n    }\r\n\r\n    $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr);\r\n    $dlg.find(\".modal-footer .ew-close-btn\").off(\"click.ew\").on(\"click.ew\", function () {\r\n      var $this = $__default[\"default\"](this);\r\n\r\n      if ($this.data(\"imported\")) {\r\n        $this.data(\"imported\", false);\r\n        window.location.reload();\r\n      }\r\n    });\r\n    hideMessage();\r\n    ew.importDialog = $dlg.modal(\"show\");\r\n    return false;\r\n  } // Auto-fill\r\n\r\n  function autoFill(el) {\r\n    var f = forms.get(el).$element[0];\r\n    if (!f) return;\r\n    var ar = getOptionValues(el),\r\n        id = getId(el),\r\n        m = id.match(/^([xy])(\\d*)_/),\r\n        rowindex = m ? m[2] : \"\",\r\n        list = forms.get(el).getList(id),\r\n        dest_array = list.autoFillTargetFields;\r\n\r\n    var success = function (data) {\r\n      let results = data == null ? void 0 : data.records,\r\n          result = Array.isArray(results) && results.length > 0 ? results[0] : [];\r\n\r\n      for (let j = 0; j < dest_array.length; j++) {\r\n        let destEl = getElements(dest_array[j].replace(/^x_/, \"x\" + rowindex + \"_\"), f);\r\n\r\n        if (destEl) {\r\n          let val = $__default[\"default\"].isValue(result[\"af\" + j]) ? String(result[\"af\" + j]) : \"\",\r\n              args = {\r\n            results,\r\n            result,\r\n            data: val,\r\n            form: f,\r\n            name: id,\r\n            target: dest_array[j],\r\n            cancel: false,\r\n            trigger: true\r\n          };\r\n          $__default[\"default\"](el).trigger(\"autofill\", [args]); // Fire event\r\n\r\n          if (args.cancel) continue;\r\n          val = args.data; // Process the value\r\n\r\n          if (destEl.options) {\r\n            // Selection list\r\n            selectOption(destEl, val.split(\",\"));\r\n\r\n            if (isAutoSuggest(destEl)) {\r\n              // Auto-Suggest\r\n              destEl.input.value = val;\r\n              updateOptions.call(forms.get(f.id), destEl);\r\n            }\r\n          } else if (isHiddenTextArea(destEl)) {\r\n            // HTML editor\r\n            destEl.value = val;\r\n            $__default[\"default\"](destEl).data(\"editor\").set();\r\n          } else if (destEl.type == \"checkbox\") {\r\n            // Boolean checkbox\r\n            destEl.checked = convertToBool(val);\r\n          } else {\r\n            destEl.value = val;\r\n          }\r\n\r\n          if (args.trigger) $__default[\"default\"](destEl).trigger(\"change\");\r\n        }\r\n      }\r\n\r\n      return result;\r\n    };\r\n\r\n    if (ar.length > 0 && ar[0] != \"\") {\r\n      var data = Object.assign({\r\n        page: list.page,\r\n        field: list.field,\r\n        ajax: \"autofill\",\r\n        v0: ar[0],\r\n        language: ew.LANGUAGE_ID\r\n      }, getUserParams('#p_' + id, f)); // Add parent field values\r\n\r\n      var parentId = list.parentFields.slice(); // Clone\r\n\r\n      if (rowindex != \"\") {\r\n        for (var i = 0, len = parentId.length; i < len; i++) {\r\n          var ar = parentId[i].split(\" \");\r\n          if (ar.length == 1) // Parent field in the same table, add row index\r\n            parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\r\n        }\r\n      }\r\n\r\n      var arp = parentId.map(function (pid) {\r\n        return getOptionValues(pid, f);\r\n      });\r\n\r\n      for (var i = 0, cnt = arp.length; i < cnt; i++) // Filter by parent fields\r\n      data[\"v\" + (i + 1)] = arp[i].join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n\r\n      return $__default[\"default\"].post(getApiUrl(ew.API_LOOKUP_ACTION), data, success, \"json\");\r\n    }\r\n\r\n    return success();\r\n  } // Setup tooltip links\r\n\r\n  function tooltip(i, el) {\r\n    var $this = $__default[\"default\"](el),\r\n        $tt = $__default[\"default\"](\"#\" + $this.data(\"tooltip-id\")),\r\n        trig = $this.data(\"trigger\") || \"hover\",\r\n        dir = $this.data(\"placement\") || \"auto\";\r\n    if (!$tt[0] || $tt.text().trim() == \"\" && !$tt.find(\"img[src!='']\")[0]) return;\r\n\r\n    if (!bootstrap.Popover.getInstance(el)) {\r\n      $this.popover({\r\n        html: true,\r\n        placement: dir,\r\n        trigger: trig,\r\n        delay: 100,\r\n        container: document.getElementById(\"ew-tooltip\"),\r\n        content: $tt.html(),\r\n        sanitizeFn: ew.sanitizeFn\r\n      }).on(\"show.bs.popover\", function (e) {\r\n        var wd = $this.data(\"tooltip-width\");\r\n        if (wd) // Set width before show\r\n          $__default[\"default\"](bootstrap.Popover.getInstance(el).getTipElement()).css(\"max-width\", parseInt(wd, 10) + \"px\");\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * Show dialog for email sending\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {Object} args.key - Key as object\r\n   * @param {boolean} args.sel - Exported selected only\r\n   * @param {string} args.url - URL of content (for Custom Template)\r\n   * @param {string} args.exportid - Export ID (for Custom Template)\r\n   * @returns false\r\n   */\r\n\r\n  function emailDialogShow(args) {\r\n    var $dlg = ew.emailDialog || $__default[\"default\"](\"#ew-email-dialog\").on(\"shown.bs.modal\", e => setTimeout(() => {\r\n      var _e$target$querySelect;\r\n\r\n      return (_e$target$querySelect = e.target.querySelector(\".modal-body .form-control\")) == null ? void 0 : _e$target$querySelect.focus();\r\n    }, 200)).on(\"click\", \".modal-footer .btn-primary\", function (e) {\r\n      var _$$closest$find$data;\r\n\r\n      e.preventDefault();\r\n      if ((_$$closest$find$data = $__default[\"default\"](this).closest(\".modal\").find(\".modal-body form\").data(\"form\")) != null && _$$closest$find$data.submit()) $dlg.modal(\"hide\");\r\n    });\r\n\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-email-dialog not found.\");\r\n\r\n      return false;\r\n    }\r\n\r\n    var form = args.evt.currentTarget.form;\r\n\r\n    if (args.sel && !keySelected(form)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n\r\n      return false;\r\n    }\r\n\r\n    var $f = $dlg.find(\".modal-body form\"),\r\n        frm = $f.data(\"form\");\r\n\r\n    if (!frm) {\r\n      frm = new Form($f.attr(\"id\"));\r\n      frm.addFields([[\"sender\", [ew.Validators.required(ew.language.phrase(\"Sender\")), ew.Validators.email]], [\"recipient\", [ew.Validators.required(ew.language.phrase(\"Recipient\")), ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperRecipientEmail\"))]], [\"cc\", ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperCcEmail\"))], [\"bcc\", ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperBccEmail\"))], [\"subject\", ew.Validators.required(ew.language.phrase(\"Subject\"))]]);\r\n\r\n      frm.validate = function () {\r\n        return this.validateFields();\r\n      };\r\n\r\n      frm.submit = function () {\r\n        if (!this.validate()) return false;\r\n        var data = [$f.serialize()];\r\n        if (form && args.sel) // Export selected\r\n          data.push($__default[\"default\"](form).find(\"input[type=checkbox][name='key_m[]']:checked\").serialize());\r\n        if (args.key) data.push($__default[\"default\"].param(args.key));\r\n        var fobj = this.getForm();\r\n\r\n        if (args.url) {\r\n          // Custom Template\r\n          $dlg.modal(\"hide\");\r\n          if (args.exportid) ew.exportWithCharts(args.url, args.exportid, fobj);else _export(args.evt, args.url, \"email\", true, args.sel, fobj);\r\n        } else {\r\n          $__default[\"default\"].post(form.getAttribute(\"action\"), data.join(\"&\"), result => showMessage(result)); // Do not use form.action\r\n        }\r\n\r\n        return true;\r\n      };\r\n\r\n      $f.data(\"form\", frm);\r\n    }\r\n\r\n    ew.emailDialog = $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr).end().modal(\"show\");\r\n    return false;\r\n  } // Show drill down\r\n\r\n  function showDrillDown(e, obj, url, id, hdr) {\r\n    if (e != null && e.ctrlKey) {\r\n      var arUrl = url.split(\"?\"),\r\n          params = new URLSearchParams(arUrl[1]);\r\n      params.set(\"d\", \"2\"); // Change d parameter to 2\r\n\r\n      return redirect(arUrl[0] + \"?\" + params.toString());\r\n    }\r\n\r\n    var $obj = $__default[\"default\"](obj);\r\n    var pos = $obj.data(\"drilldown-placement\") || \"auto\";\r\n    var args = {\r\n      obj: $obj[0],\r\n      placement: pos,\r\n      id,\r\n      url,\r\n      hdr\r\n    };\r\n    $document$1.trigger(\"drilldown\", [args]);\r\n    var ar = args.url.split(\"?\");\r\n    args.file = ar[0] || \"\";\r\n    args.data = ar[1] || \"\";\r\n\r\n    if (!bootstrap.Popover.getInstance(obj)) {\r\n      $obj.popover({\r\n        html: true,\r\n        placement: args.placement,\r\n        trigger: \"manual\",\r\n        title: args.hdr,\r\n        template: '<div class=\"popover\" role=\"tooltip\"><h3 class=\"popover-header d-none\" style=\"cursor: move;\"></h3><div class=\"popover-body\"></div></div>',\r\n        // No .popover-arrow\r\n        content: '<div class=\"' + ew.spinnerClass + ' m-3 ew-loading\" role=\"status\"><span class=\"visually-hidden\">' + ew.language.phrase(\"Loading\") + '</span></div>',\r\n        container: $__default[\"default\"](\"#ew-drilldown-panel\").draggable(ew.draggableOptions),\r\n        sanitizeFn: ew.sanitizeFn,\r\n        boundary: \"viewport\"\r\n      }).on(\"show.bs.popover\", function (e) {\r\n        $obj.attr(\"data-original-title\", \"\");\r\n      }).on(\"shown.bs.popover\", function (e) {\r\n        if (!$obj.data(\"args\")) return;\r\n        var data = $obj.data(\"args\").data;\r\n        $__default[\"default\"].ajax({\r\n          cache: false,\r\n          dataType: \"html\",\r\n          type: \"POST\",\r\n          data: data,\r\n          url: $obj.data(\"args\").file,\r\n          success: function (data) {\r\n            var $tip = $__default[\"default\"](bootstrap.Popover.getInstance(obj).getTipElement());\r\n            if (args.hdr) $tip.find(\".popover-header\").empty().removeClass(\"d-none\").append('<button type=\"button\" class=\"btn-close\" aria-label=\"' + ew.language.phrase(\"CloseBtn\") + '\"></button>' + args.hdr).find(\".btn-close\").on(\"click\", function () {\r\n              $obj.popover(\"hide\");\r\n            });\r\n            var m = data.match(/<body[^>]*>([\\s\\S]*?)<\\/body\\s*>/i); // Use HTML in document body only\r\n\r\n            data = m ? m[0] : data;\r\n            var html = ew.stripScript(data);\r\n            $tip.find(\".popover-body\").html($__default[\"default\"](\"<div></div>\").html(html).find(\"#ew-report\")) // Insert the container table only\r\n            .find(\".ew-table\").each(ew.setupTable);\r\n            ew.executeScript(data, id);\r\n            $obj.popover(\"update\");\r\n          },\r\n          error: function (o) {\r\n            if (o.responseText) {\r\n              if ($__default[\"default\"].isString(o.responseText) && o.responseText.startsWith(\"{\") && o.responseText.endsWith(\"}\")) {\r\n                var _result$error7, _result$error8;\r\n\r\n                var result = parseJson(o.responseText);\r\n\r\n                if (result != null && (_result$error7 = result.error) != null && _result$error7.type && result != null && (_result$error8 = result.error) != null && _result$error8.description) {\r\n                  bootstrap.Popover.getInstance(obj).hide();\r\n                  return _alert({\r\n                    title: result.error.type,\r\n                    html: result.error.description,\r\n                    customClass: {\r\n                      title: \"ew-swal2-title text-danger\",\r\n                      htmlContainer: \"ew-swal2-html-container text-danger\"\r\n                    }\r\n                  });\r\n                }\r\n              }\r\n\r\n              var $tip = $__default[\"default\"](bootstrap.Popover.getInstance(obj).getTipElement());\r\n              $tip.find(\".popover-body\").empty().append('<p class=\"text-danger\">' + o.responseText + '</p>');\r\n            }\r\n          }\r\n        });\r\n      }).on(\"hidden.bs.popover\", function (e) {\r\n        ew.removeScript(id);\r\n      });\r\n    }\r\n\r\n    $obj.data(\"args\", args).popover(\"show\");\r\n  }\r\n  /**\r\n   * Ajax query\r\n   * @param {Object} data - Object to passed to API\r\n   * @param {callback} callback - Callback function for async request (see http://api.jquery.com/jQuery.post/), empty for sync request\r\n   * @returns {string|string[]}\r\n   */\r\n\r\n  function ajax(data, callback) {\r\n    if (!$__default[\"default\"].isObject(data) || !data.url && !data.action) return undefined;\r\n    var action;\r\n\r\n    if (data.url) {\r\n      if (data.url.startsWith(getApiUrl())) action = data.url.replace(getApiUrl(), \"\").split(\"/\")[0];else if (data.url.startsWith(ew.API_URL)) action = data.url.replace(ew.API_URL, \"\").split(\"/\")[0];\r\n    } else {\r\n      action = data.action;\r\n      delete data.action;\r\n    }\r\n\r\n    var obj = Object.assign({}, data);\r\n\r\n    var _convert = response => {\r\n      if ($__default[\"default\"].isObject(response) && response.result == \"OK\") {\r\n        var results = response.records;\r\n\r\n        if (Array.isArray(results) && results.length == 1) {\r\n          // Single row\r\n          results = results[0];\r\n          if (Array.isArray(results) && results.length == 1) // Single column\r\n            return results[0]; // Return a value\r\n          else return results; // Return a row\r\n        }\r\n\r\n        return results;\r\n      }\r\n\r\n      return response;\r\n    };\r\n\r\n    var url = obj.url || getApiUrl(action),\r\n        // URL\r\n    type = obj.type || ([ew.API_LIST_ACTION, ew.API_VIEW_ACTION, ew.API_DELETE_ACTION].includes(action) ? \"GET\" : \"POST\");\r\n    delete obj.url;\r\n    delete obj.type;\r\n    obj.dataType = \"json\";\r\n\r\n    if (isFunction$2(callback)) {\r\n      // Async\r\n      $__default[\"default\"].ajax({\r\n        url: url,\r\n        type: type,\r\n        data: obj,\r\n        success: function (response) {\r\n          callback(_convert(response));\r\n        }\r\n      });\r\n    } else {\r\n      // Sync\r\n      var response = $__default[\"default\"].ajax({\r\n        url: url,\r\n        async: false,\r\n        type: type,\r\n        data: obj\r\n      });\r\n      return _convert(response.responseJSON);\r\n    }\r\n  } // Get URL of current page\r\n\r\n  function currentPage() {\r\n    return location.href.split(\"#\")[0].split(\"?\")[0];\r\n  } // Toggle search operator\r\n\r\n  function toggleSearchOperator(e, id, value) {\r\n    var el = e.currentTarget.form.elements[id];\r\n    if (!el) return;\r\n    el.value = el.value != value ? value : \"=\";\r\n  } // Toggle multi-column layout\r\n\r\n  function toggleLayout(el) {\r\n    var _bootstrap$Tooltip$ge6;\r\n\r\n    (_bootstrap$Tooltip$ge6 = bootstrap.Tooltip.getInstance(el)) == null ? void 0 : _bootstrap$Tooltip$ge6.hide();\r\n    $body.css(\"cursor\", \"wait\");\r\n    let layout = el.dataset.layout,\r\n        grid = document.querySelector(\".ew-multi-column-grid\"),\r\n        $grid = $__default[\"default\"](grid);\r\n    $grid.load(sanitizeUrl(el.dataset.url + ew.PAGE_LAYOUT + \"=\" + layout) + \" .ew-multi-column-grid\", (response, status, xhr) => {\r\n      if (status == \"error\") {\r\n        _alert(xhr.status + \" \" + xhr.statusText);\r\n      } else {\r\n        var _document$createRange, _document$createRange2;\r\n\r\n        removeScript(layout);\r\n        executeScript((_document$createRange = (_document$createRange2 = document.createRange().createContextualFragment(response).querySelector(\".ew-multi-column-grid\")) == null ? void 0 : _document$createRange2.innerHTML) != null ? _document$createRange : \"\", layout);\r\n        ew.initPage({\r\n          target: grid\r\n        });\r\n        $body.css(\"cursor\", \"default\");\r\n        $grid.trigger(\"layout\");\r\n      }\r\n    });\r\n  } // Copy inner text to clipboard\r\n\r\n  function copyToClipboard(source) {\r\n    var _source, _source2;\r\n\r\n    source = $__default[\"default\"].isString(source) ? document.querySelector(source) : source;\r\n    const str = ((_source = source) == null ? void 0 : _source.value) || ((_source2 = source) == null ? void 0 : _source2.innerText);\r\n\r\n    if (str) {\r\n      const el = document.createElement(\"textarea\");\r\n      el.value = str;\r\n      el.setAttribute(\"readonly\", \"\");\r\n      el.style.position = \"absolute\";\r\n      el.style.left = \"-9999px\";\r\n      document.body.appendChild(el);\r\n      el.select();\r\n      document.execCommand(\"copy\");\r\n      document.body.removeChild(el);\r\n    }\r\n\r\n    return str;\r\n  }\r\n  /**\r\n   * Validators\r\n   */\r\n  // Check integer\r\n\r\n  function checkInteger(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    if (object_value.includes(ew.DECIMAL_SEPARATOR)) return false;\r\n    return checkNumber(object_value);\r\n  } // Check number\r\n\r\n  function checkNumber(object_value) {\r\n    object_value = String(object_value);\r\n    if (!object_value || object_value.length == 0) return true;\r\n    object_value = object_value.trim(); // let re = new RegExp(\"^[+\\-\\d\\s%\" + escapeRegExChars(ew.DECIMAL_SEPARATOR) + escapeRegExChars(ew.GROUPING_SEPARATOR) + ew.CURRENCY_SYMBOL + \"]+$\");\r\n    // return re.test(object_value) && ew.parseNumber(object_value) !== null;\r\n\r\n    return ew.parseNumber(object_value) !== null;\r\n  } // Escape regular expression chars\r\n\r\n  function escapeRegExChars(str) {\r\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\r\n  } // Check range\r\n\r\n  function checkRange(object_value, min_value, max_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n\r\n    if ($__default[\"default\"].isNumber(min_value) || $__default[\"default\"].isNumber(max_value)) {\r\n      // Number\r\n      if (checkNumber(object_value)) object_value = ew.parseNumber(object_value);\r\n    }\r\n\r\n    if (!$__default[\"default\"].isNull(min_value) && object_value < min_value) return false;\r\n    if (!$__default[\"default\"].isNull(max_value) && object_value > max_value) return false;\r\n    return true;\r\n  } // Check phone\r\n\r\n  function checkPhone(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^\\(\\d{3}\\) ?\\d{3}( |-)?\\d{4}|^\\d{3}( |-)?\\d{3}( |-)?\\d{4}$/.test(object_value.trim());\r\n  } // Check zip\r\n\r\n  function checkZip(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^\\d{5}$|^\\d{5}-\\d{4}$/.test(object_value.trim());\r\n  } // Check credit card\r\n\r\n  function checkCreditCard(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    var creditcard_string = object_value.replace(/\\D/g, \"\");\r\n    if (creditcard_string.length == 0) return false;\r\n    var doubledigit = creditcard_string.length % 2 == 1 ? false : true;\r\n    var tempdigit,\r\n        checkdigit = 0;\r\n\r\n    for (var i = 0, len = creditcard_string.length; i < len; i++) {\r\n      tempdigit = parseInt(creditcard_string.charAt(i), 10);\r\n\r\n      if (doubledigit) {\r\n        tempdigit *= 2;\r\n        checkdigit += tempdigit % 10;\r\n        if (tempdigit / 10 >= 1.0) checkdigit++;\r\n        doubledigit = false;\r\n      } else {\r\n        checkdigit += tempdigit;\r\n        doubledigit = true;\r\n      }\r\n    }\r\n\r\n    return checkdigit % 10 == 0;\r\n  } // Check social security number\r\n\r\n  function checkSsn(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^(?!000)([0-6]\\d{2}|7([0-6]\\d|7[012]))([ -]?)(?!00)\\d\\d\\3(?!0000)\\d{4}$/.test(object_value.trim());\r\n  } // Check emails\r\n\r\n  function checkEmails(object_value, email_cnt) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    var arEmails = object_value.replace(/,/g, \";\").split(\";\");\r\n\r\n    for (var i = 0, len = arEmails.length; i < len; i++) {\r\n      if (email_cnt > 0 && len > email_cnt) return false;\r\n      if (!checkEmail(arEmails[i])) return false;\r\n    }\r\n\r\n    return true;\r\n  } // Check email\r\n\r\n  function checkEmail(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^[\\w.%+-]+@[\\w.-]+\\.[A-Z]{2,18}$/i.test(object_value.trim());\r\n  } // Check GUID {xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}\r\n\r\n  function checkGuid(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^(\\{\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12}\\}|\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12})$/.test(object_value.trim());\r\n  } // Check URL\r\n\r\n  function checkUrl(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n\r\n    try {\r\n      new URL(object_value);\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  } // Check by regular expression\r\n\r\n  function checkByRegEx(object_value, pattern) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return !!object_value.match(pattern);\r\n  }\r\n  /**\r\n   * Show message dialog\r\n   *\r\n   * @param {Event|string} arg - Event or message\r\n   * @returns\r\n   */\r\n\r\n  function showMessage(arg) {\r\n    var _arg$target;\r\n\r\n    let doc, swal;\r\n\r\n    try {\r\n      let win = window.parent; // Note: If a window does not have a parent, its parent property is a reference to itself.\r\n\r\n      doc = win.document;\r\n      swal = win.Swal;\r\n    } catch (e) {\r\n      // In case win.document cannot be accessed\r\n      doc = window.document;\r\n      swal = window.Swal;\r\n    }\r\n\r\n    let p = (_arg$target = arg == null ? void 0 : arg.target) != null ? _arg$target : doc,\r\n        $div = $__default[\"default\"](p).find(\"div.ew-message-dialog:hidden\").first(),\r\n        msg = $div.length ? $div.text() : \"\"; // Text only\r\n\r\n    if ($__default[\"default\"].isString(arg)) msg = $__default[\"default\"](\"<div>\" + arg.trim() + \"</div>\").text();\r\n    if (msg.trim() == \"\") return;\r\n\r\n    if ($div.length) {\r\n      [\"success\", \"info\", \"warning\", \"danger\"].forEach(function (value, index) {\r\n        let $alert = $div.find(\".alert-\" + value).toggleClass(\"alert-\" + value),\r\n            $heading = $alert.find(\".alert-heading\").detach(),\r\n            $content = $alert.children(\":not(.icon)\");\r\n        $alert.find(\".icon\").remove();\r\n\r\n        if ($alert[0]) {\r\n          let w = parseInt($content.css(\"width\"), 10); // Width specified\r\n\r\n          if (w > 0) $content.first().css(\"width\", \"auto\");\r\n          let $toast = toast({\r\n            class: \"ew-toast bg-\" + value,\r\n            title: $heading[0] ? $heading.html() : ew.language.phrase(value),\r\n            body: $alert.html(),\r\n            autohide: value == \"success\" ? ew.autoHideSuccessMessage : false,\r\n            // Autohide for success message\r\n            delay: value == \"success\" ? ew.autoHideSuccessMessageDelay : 500\r\n          });\r\n          if (w > 0) $toast.css(\"max-width\", w); // Override bootstrap .toast max-width\r\n\r\n          return;\r\n        }\r\n      });\r\n    }\r\n\r\n    if ($__default[\"default\"].isString(arg)) {\r\n      return swal.fire({ ...ew.sweetAlertSettings,\r\n        html: arg\r\n      });\r\n    }\r\n  } // Random number\r\n\r\n  function random() {\r\n    return Math.floor(Math.random() * 100001) + 100000;\r\n  } // File upload\r\n\r\n  function upload(input) {\r\n    var $input = $__default[\"default\"](input);\r\n    if ($input.data(\"blueimpFileupload\")) return;\r\n    var id = $input.attr(\"name\"),\r\n        nid = id.replace(/\\$/g, \"\\\\$\"),\r\n        tbl = $input.data(\"table\"),\r\n        multiple = $input.is(\"[multiple]\"),\r\n        $dropzone = $input.closest(\".ew-file-drop-zone\"),\r\n        $p = $input.closest(fieldContainerSelector),\r\n        readonly = $input.prop(\"disabled\") || $input.closest(\"form\").find(\"#confirm\").val() == \"confirm\",\r\n        $ft = $p.find(\"#ft_\" + nid),\r\n        $fn = $p.find(\"#fn_\" + nid),\r\n        $fa = $p.find(\"#fa_\" + nid),\r\n        $fs = $p.find(\"#fs_\" + nid),\r\n        $exts = $p.find(\"#fx_\" + nid),\r\n        $maxsize = $p.find(\"#fm_\" + nid),\r\n        $maxfilecount = $p.find(\"#fc_\" + nid),\r\n        $label = $p.find(\".ew-file-label\"),\r\n        label = $label.html();\r\n\r\n    var _done = function (e, data) {\r\n      if (data.result.files[0].error) return;\r\n      var name = data.result.files[0].name;\r\n      var ar = multiple ? $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [] : [];\r\n      ar.push(name);\r\n      $fn.val(ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR));\r\n      $fa.val(\"0\");\r\n      if (!multiple) // Remove other entries if not multiple upload\r\n        $ft.find(\"tbody > tr:not(:last-child)\").remove();\r\n    };\r\n\r\n    var _deleted = function (e, data) {\r\n      var url = $__default[\"default\"](e.originalEvent.target).data(\"url\"),\r\n          param = new URLSearchParams(url.split(\"?\")[1]),\r\n          fid = param.get(\"id\"),\r\n          name = param.get(fid);\r\n\r\n      if (name) {\r\n        var ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n        var index = ar.indexOf(name);\r\n        if (index > -1) ar.splice(index, 1);\r\n        $fn.val(ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR));\r\n        $fa.val(\"0\");\r\n      }\r\n    };\r\n\r\n    var _change = function (e, data) {\r\n      var _data$files;\r\n\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files = data.files) == null ? void 0 : _data$files.length) > 0);\r\n      var ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n\r\n      for (var i = 0; i < data.files.length; i++) ar.push(data.files[i].name);\r\n\r\n      var cnt = parseInt($maxfilecount.val(), 10);\r\n\r\n      if ($__default[\"default\"].isNumber(cnt) && cnt > 0 && ar.length > cnt) {\r\n        _alert(ew.language.phrase(\"UploadErrMsgMaxNumberOfFiles\"));\r\n\r\n        return false;\r\n      }\r\n\r\n      var l = parseInt($fs.val(), 10);\r\n\r\n      if ($__default[\"default\"].isNumber(l) && l > 0 && ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR).length > l) {\r\n        _alert(ew.language.phrase(\"UploadErrMsgMaxFileLength\"));\r\n\r\n        return false;\r\n      }\r\n    };\r\n\r\n    var _confirmDelete = function (e) {\r\n      if (!multiple && $fn.val()) {\r\n        if (!confirm(ew.language.phrase(\"UploadOverwrite\"))) {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        }\r\n      }\r\n    };\r\n\r\n    var _changed = function (e, data) {\r\n      var _data$files2, _data$result2, _data$result2$files;\r\n\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files2 = data.files) == null ? void 0 : _data$files2.length) > 0 || ((_data$result2 = data.result) == null ? void 0 : (_data$result2$files = _data$result2.files) == null ? void 0 : _data$result2$files.length) > 0);\r\n      var ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n      $label.html(ar.join(\", \") || label);\r\n    }; // var _clicked = function() {\r\n    //     $input.closest(\"span.fileinput-button\").tooltip(\"hide\");\r\n    // };\r\n    // var _process = function(e, data) {\r\n    //     $ft.toggleClass(\"ew-has-rows\", data.files?.length > 0);\r\n    // };\r\n\r\n    var _downloadTemplate = $__default[\"default\"].templates(\"#template-download\"),\r\n        _uploadTemplate = $__default[\"default\"].templates(\"#template-upload\");\r\n\r\n    var _completed = function (e, data) {\r\n      // After download template rendered\r\n      var e = {\r\n        target: data.context\r\n      };\r\n      initLightboxes(e);\r\n      initPdfObjects(e);\r\n      ew.updateDropdownPosition();\r\n      data.context.find(\"img\").on(\"load\", ew.updateDropdownPosition);\r\n    };\r\n\r\n    var _added = function (e, data) {\r\n      var _data$files3;\r\n\r\n      // After upload template rendered\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files3 = data.files) == null ? void 0 : _data$files3.length) > 0);\r\n      data.context.find(\".start\").click(_confirmDelete);\r\n    }; // Hide input button if readonly\r\n\r\n    var form = getForm(input),\r\n        $form = $__default[\"default\"](form),\r\n        readonly = $form.find(\"#confirm\").val() == \"confirm\" || $input.attr(\"readonly\");\r\n    if (readonly) $input.prop(\"disabled\", true); // $form.find(\"span.fileinput-button\").hide();\r\n\r\n    var cnt = parseInt($maxfilecount.val(), 10);\r\n    var uploadUrl = getApiUrl(ew.API_JQUERY_UPLOAD_ACTION);\r\n    var formData = {\r\n      id: id,\r\n      table: tbl,\r\n      session: ew.SESSION_ID,\r\n      replace: multiple ? \"0\" : \"1\",\r\n      exts: $exts.val(),\r\n      maxsize: $maxsize.val(),\r\n      maxfilecount: $maxfilecount.val()\r\n    };\r\n    $input.fileupload(Object.assign({\r\n      url: uploadUrl,\r\n      type: \"POST\",\r\n      multipart: true,\r\n      autoUpload: true,\r\n      // Comment out to disable auto upload\r\n      loadImageFileTypes: /^image\\/(gif|jpe?g|png)$/i,\r\n      loadVideoFileTypes: /^video\\/mp4$/i,\r\n      loadAudioFileTypes: /^audio\\/(mpeg|mp3)$/i,\r\n      acceptFileTypes: $exts.val() ? new RegExp('\\\\.(' + $exts.val().replace(/,/g, '|') + ')$', 'i') : null,\r\n      maxFileSize: parseInt($maxsize.val(), 10),\r\n      maxNumberOfFiles: cnt > 1 ? cnt : null,\r\n      filesContainer: $ft,\r\n      formData: formData,\r\n      uploadTemplateId: null,\r\n      downloadTemplateId: null,\r\n      uploadTemplate: _uploadTemplate.render.bind(_uploadTemplate),\r\n      downloadTemplate: _downloadTemplate.render.bind(_downloadTemplate),\r\n      previewMaxWidth: ew.UPLOAD_THUMBNAIL_WIDTH,\r\n      previewMaxHeight: ew.UPLOAD_THUMBNAIL_HEIGHT,\r\n      dropZone: $dropzone,\r\n      messages: {\r\n        acceptFileTypes: ew.language.phrase(\"UploadErrMsgAcceptFileTypes\"),\r\n        maxFileSize: ew.language.phrase(\"UploadErrMsgMaxFileSize\"),\r\n        maxNumberOfFiles: ew.language.phrase(\"UploadErrMsgMaxNumberOfFiles\"),\r\n        minFileSize: ew.language.phrase(\"UploadErrMsgMinFileSize\")\r\n      },\r\n      readonly: readonly // Custom\r\n\r\n    }, ew.uploadOptions)).on(\"fileuploaddone\", _done).on(\"fileuploaddestroy\", _deleted).on(\"fileuploadchange\", _change).on(\"fileuploadadded fileuploadfinished fileuploaddestroyed\", _changed) //.on(\"fileuploadprocess\", _process)\r\n    .on('fileuploadadded', _added).on('fileuploadcompleted', _completed); // .click(_clicked);\r\n\r\n    if ($fn.val()) {\r\n      $__default[\"default\"].ajax({\r\n        url: uploadUrl,\r\n        data: {\r\n          id: id,\r\n          table: tbl,\r\n          session: ew.SESSION_ID\r\n        },\r\n        dataType: \"json\",\r\n        context: this,\r\n        success: function (result) {\r\n          if (result != null && result[id]) {\r\n            var done = $input.fileupload(\"option\", \"done\");\r\n            if (done) done.call(input, $__default[\"default\"].Event(), {\r\n              result: {\r\n                files: result[id]\r\n              }\r\n            }); // Use \"files\"\r\n          }\r\n\r\n          if (readonly) // Hide delete button if readonly\r\n            $ft.find(\"td.delete\").hide();\r\n        }\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * Convert data to number\r\n   *\r\n   * @param {*} data - Data being converted\r\n   * @returns {number}\r\n   */\r\n\r\n  function parseNumber(data) {\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.parse(data, {\r\n      locale\r\n    });\r\n  }\r\n  /**\r\n   * Get numbering system\r\n   */\r\n\r\n  function getNumberingSystem() {\r\n    return ew.NUMBERING_SYSTEM || new Intl.NumberFormat(ew.LANGUAGE_ID).resolvedOptions().numberingSystem;\r\n  }\r\n  let DateTime = luxon__default[\"default\"].DateTime;\r\n  /**\r\n   * Format data by DateTime (see https://moment.github.io/luxon/docs/class/src/datetime.js~DateTime.html)\r\n   *\r\n   * @param {string|Number|Date} data - JS Date object\r\n   * @param {string|Array} format - Date format (see https://moment.github.io/luxon/docs/manual/formatting.html#toformat)\r\n   * @returns {string}\r\n   */\r\n\r\n  function formatDateTime(data, format) {\r\n    let dt;\r\n    if ($__default[\"default\"].isString(data)) // SQL dates, times, and datetimes\r\n      dt = DateTime.fromSQL(data);else if ($__default[\"default\"].isNumber(data)) // Unix timestamps\r\n      dt = DateTime.fromSeconds(data);else if (data instanceof Date) // JS Date Object\r\n      dt = DateTime.fromJSDate(data);\r\n    return dt.toFormat(format, {\r\n      locale: ew.LANGUAGE_ID,\r\n      numberingSystem: ew.getNumberingSystem()\r\n    });\r\n  }\r\n  /**\r\n   * Parse data to DateTime (see https://moment.github.io/luxon/docs/class/src/datetime.js~DateTime.html)\r\n   *\r\n   * @param {string} data - Date/Time string supported by DateTime\r\n   * @param {string|Array} format - Date format (see https://moment.github.io/luxon/docs/manual/formatting.html#toformat)\r\n   * @returns {DateTime}\r\n   */\r\n\r\n  function parseDateTime(data, format) {\r\n    return DateTime.fromFormat(data, format, {\r\n      locale: ew.LANGUAGE_ID,\r\n      numberingSystem: ew.getNumberingSystem()\r\n    });\r\n  } // Parse date/time (alias of parseDateTime)\r\n  /**\r\n   * Check if data can be parsed to DateTime (see https://moment.github.io/luxon/docs/class/src/datetime.js~DateTime.html)\r\n   *\r\n   * @param {string} data - Date string supported by DateTime\r\n   * @param {string|Array} format - Date format (see https://moment.github.io/luxon/docs/manual/formatting.html#toformat)\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function checkDate(data, format) {\r\n    if (!data || data.length == 0) return true;\r\n    return parseDateTime(data, format).isValid;\r\n  } // Check time (alias of checkDate)\r\n\r\n  function checkTime(data, format) {\r\n    if (!data || data.length == 0) return true;\r\n    return parseDateTime(data, format).isValid;\r\n  }\r\n  /**\r\n   * Format currency\r\n   *\r\n   * @param {number} value - Value\r\n   * @param {string} format - Formatter pattern\r\n   */\r\n\r\n  function formatCurrency(value, format) {\r\n    format || (format = ew.CURRENCY_FORMAT);\r\n\r\n    if (format.includes(\";\")) {\r\n      let formats = format.split(\";\");\r\n      format = value >= 0 ? formats[0] : formats[1];\r\n    }\r\n\r\n    format = format.replace(\"¤\", \"$\");\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.format(value, format, {\r\n      locale,\r\n      currency: (ew.IS_RTL ? \"\\u200E\" : \"\") + ew.CURRENCY_SYMBOL\r\n    }); // Make sure the currency symbol position is not moved.\r\n  }\r\n  /**\r\n   * Format number\r\n   *\r\n   * @param {number} value - Value\r\n   * @param {string} format - Formatter pattern\r\n   */\r\n\r\n  function formatNumber(value, format) {\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.format(value, format || ew.NUMBER_FORMAT, {\r\n      locale\r\n    });\r\n  }\r\n  /**\r\n   * Format percent\r\n   *\r\n   * @param {number} value - Value\r\n   * @param {string} format - Formatter pattern\r\n   */\r\n\r\n  function formatPercent(value, format) {\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.format(value, format || ew.PERCENT_FORMAT, {\r\n      locale\r\n    });\r\n  }\r\n  /**\r\n   * Init page\r\n   *\r\n   * @param {Event|undefined} e - Event\r\n   */\r\n\r\n  function initPage(e) {\r\n    var _e$target11;\r\n\r\n    var el = (_e$target11 = e == null ? void 0 : e.target) != null ? _e$target11 : document,\r\n        $el = $__default[\"default\"](el),\r\n        $tables = $el.find(\"table.ew-table:not(.ew-export-table)\");\r\n    ew.initPanels(el); // Init grid panels\r\n\r\n    ew.renderJsTemplates(e);\r\n    lazyLoad(e);\r\n    initForms(e);\r\n    initTooltips(e);\r\n    initPasswordOptions(e);\r\n    initIcons(e);\r\n    initLightboxes(e);\r\n    initPdfObjects(e);\r\n    $el.find(\"[data-widget='treeview']\").each(function () {\r\n      adminlte.Treeview._jQueryInterface.call($__default[\"default\"](this), \"init\");\r\n    });\r\n    $tables.each(setupTable); // Init tables\r\n\r\n    $el.find(\".ew-table-header-caption[data-sort-url]\").each(function () {\r\n      // Table captions for sorting\r\n      let $this = $__default[\"default\"](this);\r\n      $this.on(\"click\", e => ew.sort(e, $this.data(\"sortUrl\"), $this.data(\"sortType\")));\r\n    });\r\n    $el.find(\".ew-column-dropdown\").each(function () {\r\n      var _localStorage$getItem;\r\n\r\n      let table = this.dataset.table;\r\n      (_localStorage$getItem = localStorage.getItem(ew.PROJECT_NAME + \"_\" + table + \"_invisible_fields\")) == null ? void 0 : _localStorage$getItem.split(\",\").forEach(field => $__default[\"default\"](\"#tbl_\" + table + \"list\").find(\"th[data-name='\" + field + \"'],td[data-name='\" + field + \"']\").toggleClass(\"d-none\", true));\r\n      $__default[\"default\"](this).find(\".ew-dropdown-checkbox\").on(\"click\", function (e) {\r\n        let input = this.querySelector(\".ew-dropdown-check-input[data-field]\"),\r\n            field = input == null ? void 0 : input.dataset.field;\r\n\r\n        if (table && field) {\r\n          input.classList.toggle(\"ew-checked\");\r\n          $__default[\"default\"](\"#tbl_\" + table + \"list\").find(\"th[data-name='\" + field + \"'],td[data-name='\" + field + \"']\").toggleClass(\"d-none\", !input.classList.contains(\"ew-checked\"));\r\n        }\r\n\r\n        localStorage.setItem(ew.PROJECT_NAME + \"_\" + table + \"_invisible_fields\", Array.from(e.currentTarget.closest(\".dropdown-menu\").querySelectorAll(\".ew-dropdown-check-input[data-field]:not(.ew-checked)\"), el => el.dataset.field));\r\n      });\r\n    }).on(\"show.bs.dropdown\", function (e) {\r\n      let table = e.currentTarget.dataset.table,\r\n          inputs = e.currentTarget.querySelectorAll(\".ew-dropdown-check-input[data-field]\");\r\n\r\n      for (let input of inputs) {\r\n        let field = input.dataset.field;\r\n        input.classList.toggle(\"ew-checked\", !!$__default[\"default\"](\"#tbl_\" + table + \"list\").find(\"th[data-name='\" + field + \"']:not(.d-none)\")[0]);\r\n      }\r\n    });\r\n    $el.find(\"input.ew-page-no\").on(\"keydown\", function (e) {\r\n      if (e.key == \"Enter\") {\r\n        currentUrl.searchParams.set(this.name, ew.parseNumber(this.value));\r\n        window.location = sanitizeUrl(currentUrl.toString());\r\n        return false;\r\n      }\r\n    });\r\n\r\n    if (!ew.IS_SCREEN_SM_MIN) {\r\n      $el.find(\".\" + ew.RESPONSIVE_TABLE_CLASS + \" [data-bs-toggle='dropdown']\").parent().on(\"shown.bs.dropdown\", function () {\r\n        var $this = $__default[\"default\"](this),\r\n            $menu = $this.find(\".dropdown-menu\"),\r\n            div = $this.closest(\".\" + ew.RESPONSIVE_TABLE_CLASS)[0];\r\n\r\n        if (div.scrollHeight - div.clientHeight) {\r\n          var d = $menu.offset().top + $menu.outerHeight() - $__default[\"default\"](div).offset().top - div.clientHeight;\r\n          if (d > 0) $menu.css(ew.IS_RTL ? \"right\" : \"left\", \"100%\").css(\"top\", parseFloat($menu.css(\"top\")) - d);\r\n        }\r\n      });\r\n    }\r\n\r\n    initExportLinks(e);\r\n    initMultiSelectCheckboxes(e); // Report\r\n\r\n    var $rpt = $el.find(\".ew-report\");\r\n\r\n    if ($rpt[0]) {\r\n      $rpt.find(\".card\").on(\"collapsed.lte.widget\", function () {\r\n        // Fix min-height when .lte.widget is collapsed\r\n        var $card = $__default[\"default\"](this),\r\n            $div = $card.closest(\"[class^='col-']\"),\r\n            mh = $div.css(\"min-height\");\r\n        if (mh) $div.data(\"min-height\", mh);\r\n        $div.css(\"min-height\", 0);\r\n      }).on(\"expanded.lte.widget\", function () {\r\n        // Fix min-height when .lte.widget is expanded\r\n        var $card = $__default[\"default\"](this),\r\n            $div = $card.closest(\"[class^='col-']\"),\r\n            mh = $div.css(\"min-height\");\r\n        if (mh) $div.css(\"min-height\", mh); // Restore min-height\r\n      }); // Group expand/collapse button\r\n\r\n      $rpt.find(\".ew-group-toggle\").on(\"click\", function () {\r\n        ew.toggleGroup(this);\r\n      });\r\n    } // Show message\r\n\r\n    if (typeof ew.USE_JAVASCRIPT_MESSAGE != \"undefined\" && ew.USE_JAVASCRIPT_MESSAGE) showMessage(e);\r\n  } // Redirect by HTTP GET or POST\r\n\r\n  function redirect(url, f, method) {\r\n    var _ew$vars;\r\n\r\n    let urls = (_ew$vars = ew.vars) != null && _ew$vars.login ? Array.from(Object.entries(ew.vars.login)).filter(entry => entry[0].endsWith(\"Url\")).map(entry => entry[1]) : [];\r\n\r\n    if (urls.includes(url)) {\r\n      // Known URLs\r\n      window.location = url;\r\n      return false;\r\n    }\r\n\r\n    let newUrl;\r\n\r\n    if (url.startsWith(\"http\")) {\r\n      newUrl = new URL(url);\r\n    } else if (url.startsWith(\"/\")) {\r\n      newUrl = new URL(url, location.protocol + \"//\" + location.host);\r\n    } else {\r\n      _alert(ew.language.phrase(\"IncorrectUrl\"));\r\n\r\n      return false;\r\n    }\r\n\r\n    let params = newUrl.searchParams;\r\n    params.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME);\r\n    params.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN);\r\n\r\n    if (sameText(method, \"post\")) {\r\n      // POST\r\n      let $form = f ? $__default[\"default\"](f) : $__default[\"default\"](\"<form></form>\").appendTo(\"body\");\r\n      $form.attr({\r\n        action: url.split(\"?\")[0],\r\n        method: \"post\"\r\n      });\r\n      params.forEach(function (value, key) {\r\n        $__default[\"default\"]('<input type=\"hidden\">').attr({\r\n          name: key,\r\n          value: ew.sanitize(value)\r\n        }).appendTo($form);\r\n      });\r\n      $form.trigger(\"submit\");\r\n    } else {\r\n      // GET\r\n      window.location = sanitizeUrl(newUrl.toString());\r\n    }\r\n\r\n    return false;\r\n  } // Show/Hide password\r\n\r\n  function togglePassword(e) {\r\n    var $btn = $__default[\"default\"](e.currentTarget),\r\n        $input = $btn.closest(\".input-group\").find(\"input\"),\r\n        $i = $btn.find(\"i\");\r\n\r\n    if ($input.attr(\"type\") == \"text\") {\r\n      $input.attr(\"type\", \"password\");\r\n      $i.toggleClass(\"fa-eye-slash fa-eye\");\r\n    } else if ($input.attr(\"type\") == \"password\") {\r\n      $input.attr(\"type\", \"text\");\r\n      $i.toggleClass(\"fa-eye-slash fa-eye\");\r\n    }\r\n  } // Export with charts\r\n\r\n  function exportWithCharts(url, exportId, f) {\r\n    let exportUrl = new URL(window.location.href),\r\n        ar = url.split(\"?\"),\r\n        method = f ? \"post\" : \"get\";\r\n    exportId += \"_\" + Date.now();\r\n    exportUrl.pathname = ar[0];\r\n    exportUrl.search = ar[1];\r\n    exportUrl.searchParams.set(\"exportid\", exportId);\r\n\r\n    let _export = function () {\r\n      let params = exportUrl.searchParams,\r\n          custom = params.get(\"custom\") == \"1\";\r\n\r\n      if (f && !custom) {\r\n        // Not custom\r\n        let data = $__default[\"default\"](f).serialize(); // Add token\r\n\r\n        $__default[\"default\"].post(exportUrl, data, function (result) {\r\n          showMessage(result);\r\n        });\r\n      } else {\r\n        // Custom\r\n        let exportType = params.get(\"export\");\r\n\r\n        if (custom && [\"word\", \"excel\", \"pdf\", \"email\"].includes(exportType)) {\r\n          if (exportType == \"email\") {\r\n            params.delete(\"export\"); // Remove duplicate export=email (exists in form)\r\n\r\n            exportUrl.search = params.toString() + \"&\" + $__default[\"default\"](f).serialize();\r\n          }\r\n\r\n          $__default[\"default\"](\"iframe.ew-export\").remove();\r\n          $__default[\"default\"](\"<iframe></iframe>\").addClass(\"ew-export d-none\").attr(\"src\", exportUrl.toString()).appendTo($body.css(\"cursor\", \"wait\"));\r\n          setTimeout(() => $body.css(\"cursor\", \"default\"), 5000);\r\n        } else if (exportType == \"print\") {\r\n          redirect(exportUrl.toString(), f, method);\r\n        } else {\r\n          fileDownload(exportUrl.toString(), null);\r\n        }\r\n      }\r\n\r\n      return false;\r\n    };\r\n\r\n    let keys = Object.keys(window.exportCharts);\r\n    if (keys.length == 0) // No charts, just submit the form\r\n      return _export(); // Export charts\r\n\r\n    $body.css(\"cursor\", \"wait\");\r\n    let charts = [];\r\n\r\n    for (const [id, chart] of Object.entries(window.exportCharts)) {\r\n      let params = \"exportfilename=\" + exportId + \"_\" + id + \".png|exportformat=png|exportaction=download|exportparameters=undefined\";\r\n      if (chart != null && chart.toBase64Image) // Chart.js chart\r\n        charts.push({\r\n          chartEngine: \"Chart.js\",\r\n          streamType: \"base64\",\r\n          stream: chart.toBase64Image(),\r\n          parameters: params\r\n        });\r\n    }\r\n\r\n    $__default[\"default\"].ajax({\r\n      \"url\": getApiUrl(ew.API_EXPORT_CHART_ACTION),\r\n      \"data\": {\r\n        \"charts\": JSON.stringify(charts)\r\n      },\r\n      \"cache\": false,\r\n      \"type\": \"POST\"\r\n    }).done(result => {\r\n      result = $__default[\"default\"].isString(result) ? parseJson(result) : result;\r\n      result.success ? _export() : _alert(result.error);\r\n    }).fail((xhr, status, error) => _alert(error + \": \" + xhr.responseText)) // Show detailed export error message\r\n    .always(() => $body.css(\"cursor\", \"default\"));\r\n    return false;\r\n  } // Layout\r\n\r\n  var _fixLayoutHeightTimer; // Fix layout height\r\n\r\n  function fixLayoutHeight() {\r\n    if (_fixLayoutHeightTimer) _fixLayoutHeightTimer.cancel(); // Clear timer\r\n\r\n    _fixLayoutHeightTimer = $__default[\"default\"].later(50, null, function () {\r\n      var layout = $body.data(\"lte.layout\");\r\n      if (layout) layout.fixLayoutHeight();\r\n    });\r\n  } // Add user event handlers\r\n\r\n  function addEventHandlers(tblVar) {\r\n    let fields = ew.events[tblVar];\r\n\r\n    if (fields) {\r\n      for (var [fldVar, events] of Object.entries(fields)) $__default[\"default\"]('[data-table=' + tblVar + '][data-field=' + fldVar + ']').on(events);\r\n    }\r\n  }\n\n  var functions = {\n    __proto__: null,\n    currentUrl: currentUrl,\n    forms: forms,\n    AjaxLookup: AjaxLookup,\n    AutoSuggest: AutoSuggest,\n    Form: Form,\n    SelectionListOption: SelectionListOption,\n    Select2Utils: Utils,\n    Select2Defaults: Defaults,\n    fieldContainerSelector: fieldContainerSelector,\n    createSelect: createSelect,\n    createModalLookup: createModalLookup,\n    createFilter: createFilter,\n    initIcons: initIcons,\n    initPasswordOptions: initPasswordOptions,\n    getApiUrl: getApiUrl,\n    sanitizeUrl: sanitizeUrl,\n    setSessionTimer: setSessionTimer,\n    initExportLinks: initExportLinks,\n    initMultiSelectCheckboxes: initMultiSelectCheckboxes,\n    fileDownload: fileDownload,\n    lazyLoad: lazyLoad,\n    updateDropdownPosition: updateDropdownPosition,\n    initLightboxes: initLightboxes,\n    initPdfObjects: initPdfObjects,\n    initTooltips: initTooltips,\n    parseJson: parseJson,\n    searchOperatorChanged: searchOperatorChanged,\n    initForms: initForms,\n    isFunction: isFunction$2,\n    alert: _alert,\n    prompt: _prompt,\n    toast: toast,\n    showToast: showToast,\n    getForm: getForm,\n    hasFormData: hasFormData,\n    setSearchType: setSearchType,\n    updateOptions: updateOptions,\n    getUserParams: getUserParams,\n    applyTemplate: applyTemplate,\n    toggleGroup: toggleGroup,\n    convertToBool: convertToBool,\n    valueChanged: valueChanged,\n    setLanguage: setLanguage,\n    submitAction: submitAction,\n    'export': _export,\n    removeSpaces: removeSpaces,\n    isHiddenTextArea: isHiddenTextArea,\n    isModalLookup: isModalLookup,\n    isFilter: isFilter,\n    isAutoSuggest: isAutoSuggest,\n    isTextbox: isTextbox,\n    clearError: clearError,\n    onError: onError,\n    setFocus: setFocus,\n    setInvalid: setInvalid,\n    setValid: setValid,\n    hasValue: hasValue,\n    isMaskedPassword: isMaskedPassword,\n    sort: sort,\n    filter: filter,\n    confirmDelete: confirmDelete,\n    keySelected: keySelected,\n    selectAllKeys: selectAllKeys,\n    selectAll: selectAll,\n    updateSelected: updateSelected,\n    clearSelected: clearSelected,\n    clearDelete: clearDelete,\n    clickDelete: clickDelete,\n    selectKey: selectKey,\n    setupTable: setupTable,\n    setupGrid: setupGrid,\n    addGridRow: addGridRow,\n    deleteGridRow: deleteGridRow,\n    htmlEncode: htmlEncode,\n    htmlDecode: htmlDecode,\n    getElements: getElements,\n    getElement: getElement,\n    getAncestorBy: getAncestorBy,\n    isHidden: isHidden,\n    sameText: sameText,\n    sameString: sameString,\n    getValue: getValue,\n    getOptionValues: getOptionValues,\n    getOptionTexts: getOptionTexts,\n    clearOptions: clearOptions,\n    getId: getId,\n    valueSeparator: valueSeparator,\n    displayValue: displayValue,\n    optionHtml: optionHtml,\n    optionsHtml: optionsHtml,\n    newOption: newOption,\n    selectOption: selectOption,\n    fetch: _fetch,\n    executeScript: executeScript,\n    stripScript: stripScript,\n    addScript: addScript,\n    removeScript: removeScript,\n    getContent: getContent,\n    getOptions: getOptions,\n    enable2FA: enable2FA,\n    disable2FA: disable2FA,\n    showBackupCodes: showBackupCodes,\n    addOptionDialogShow: addOptionDialogShow,\n    modalDialogHide: modalDialogHide,\n    modalDialogShow: modalDialogShow,\n    importDialogShow: importDialogShow,\n    autoFill: autoFill,\n    tooltip: tooltip,\n    emailDialogShow: emailDialogShow,\n    showDrillDown: showDrillDown,\n    ajax: ajax,\n    currentPage: currentPage,\n    toggleSearchOperator: toggleSearchOperator,\n    toggleLayout: toggleLayout,\n    copyToClipboard: copyToClipboard,\n    checkInteger: checkInteger,\n    checkNumber: checkNumber,\n    escapeRegExChars: escapeRegExChars,\n    checkRange: checkRange,\n    checkPhone: checkPhone,\n    checkZip: checkZip,\n    checkCreditCard: checkCreditCard,\n    checkSsn: checkSsn,\n    checkEmails: checkEmails,\n    checkEmail: checkEmail,\n    checkGuid: checkGuid,\n    checkUrl: checkUrl,\n    checkByRegEx: checkByRegEx,\n    showMessage: showMessage,\n    random: random,\n    upload: upload,\n    parseNumber: parseNumber,\n    getNumberingSystem: getNumberingSystem,\n    formatDateTime: formatDateTime,\n    parseDateTime: parseDateTime,\n    parseDate: parseDateTime,\n    parseTime: parseDateTime,\n    checkDate: checkDate,\n    checkTime: checkTime,\n    formatCurrency: formatCurrency,\n    formatNumber: formatNumber,\n    formatPercent: formatPercent,\n    initPage: initPage,\n    redirect: redirect,\n    togglePassword: togglePassword,\n    exportWithCharts: exportWithCharts,\n    fixLayoutHeight: fixLayoutHeight,\n    addEventHandlers: addEventHandlers\n  };\n\n  /**\r\n   * Service worker\r\n   */\r\n\r\n  ew__default[\"default\"].SERVICE_WORKER = \"sw.js\";\r\n  /**\r\n   * Show dialog for push notification\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {string} args.url - URL of web push API\r\n   * @param {MouseEvent} args.evt - Mouse event\r\n   * @returns false\r\n   */\r\n\r\n  async function pushNotificationDialogShow(args) {\r\n    let $dlg = ew__default[\"default\"].pushDialog || $__default[\"default\"](\"#ew-push-notification-dialog\").on(\"shown.bs.modal\", e => setTimeout(() => {\r\n      var _e$target$querySelect;\r\n\r\n      return (_e$target$querySelect = e.target.querySelector(\".modal-body .form-control\")) == null ? void 0 : _e$target$querySelect.focus();\r\n    }, 200)).on(\"click\", \".modal-footer .btn-primary\", function (e) {\r\n      var _$$closest$find$data;\r\n\r\n      e.preventDefault();\r\n      if ((_$$closest$find$data = $__default[\"default\"](this).closest(\".modal\").find(\".modal-body form\").data(\"form\")) != null && _$$closest$find$data.submit()) $dlg.modal(\"hide\");\r\n    });\r\n\r\n    if (!$dlg[0]) {\r\n      console.log(\"DIV #ew-push-notificatoin-dialog not found\");\r\n      return false;\r\n    }\r\n\r\n    if (!args.url) {\r\n      // No API URL\r\n      console.log(\"Missing URL of Web Push API\");\r\n      return false;\r\n    }\r\n\r\n    let target = args.evt.currentTarget,\r\n        // Button\r\n    $form = $__default[\"default\"](target.form),\r\n        $f = $dlg.find(\".modal-body form\"),\r\n        frm = $f.data(\"form\");\r\n    $f.data(\"all\", false); // Reset\r\n\r\n    if (!$form.find(\"input[name='key_m[]']:checked\")[0]) {\r\n      // No keys selected\r\n      let result = await ew__default[\"default\"].prompt(ew__default[\"default\"].language.phrase(\"SendPushNotificationsToAll\"), bool => bool); // Callback returns result as boolean\r\n\r\n      $f.data(\"all\", result);\r\n      if (!result) // Cancelled\r\n        return;\r\n    }\r\n\r\n    if (!frm) {\r\n      frm = new ew__default[\"default\"].Form($f.attr(\"id\"));\r\n      frm.addFields([[\"title\", ew__default[\"default\"].Validators.required(ew__default[\"default\"].language.phrase(\"PushNotificationFormTitle\"))], [\"body\", ew__default[\"default\"].Validators.required(ew__default[\"default\"].language.phrase(\"PushNotificationFormBody\"))]]);\r\n\r\n      frm.validate = function () {\r\n        return this.validateFields();\r\n      };\r\n\r\n      frm.submit = function () {\r\n        if (!this.validate()) return false;\r\n        let data = [$f.serialize(), $f.data(\"all\") ? \"\" : $form.find(\"input[name='key_m[]']:checked\").serialize()].join(\"&\");\r\n        $__default[\"default\"].post(args.url, data, result => {\r\n          var _result$error;\r\n\r\n          if (Array.isArray(result)) {\r\n            let successes = result.reduce((acc, cur) => acc + (cur.success ? 1 : 0), 0),\r\n                failures = result.length - successes;\r\n            if (successes > 0 && failures == 0) ew__default[\"default\"].alert(ew__default[\"default\"].language.phrase(\"PushNotificationSuccess\").replace(\"%s\", successes), \"success\");else if (successes == 0 && failures > 0) ew__default[\"default\"].alert(ew__default[\"default\"].language.phrase(\"PushNotificationFailure\").replace(\"%f\", failures));else if (successes == 0 && failures == 0) ew__default[\"default\"].alert(ew__default[\"default\"].language.phrase(\"NoSubscriptions\").replace(\"%f\", failures), \"primary\");else ew__default[\"default\"].alert(ew__default[\"default\"].language.phrase(\"PushNotificationSent\").replace(\"%s\", successes).replace(\"%f\", failures), \"primary\");\r\n          } else if (result != null && (_result$error = result.error) != null && _result$error.description) {\r\n            ew__default[\"default\"].alert(result.error.description);\r\n          }\r\n        });\r\n        return true;\r\n      };\r\n\r\n      $f.data(\"form\", frm);\r\n    }\r\n\r\n    ew__default[\"default\"].pushDialog = $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr || target.dataset.caption).end().modal(\"show\");\r\n    return false;\r\n  }\r\n  /**\r\n   * Check if push notification and service workers are supported by browser\r\n   */\r\n\r\n  function isPushNotificationSupported() {\r\n    return \"serviceWorker\" in navigator && \"PushManager\" in window;\r\n  }\r\n  /**\r\n   * Base 64 to Unit8Array\r\n   */\r\n\r\n  function urlBase64ToUint8Array(base64String) {\r\n    const padding = \"=\".repeat((4 - base64String.length % 4) % 4),\r\n          base64 = (base64String + padding).replace(/\\-/g, \"+\").replace(/_/g, \"/\"),\r\n          rawData = window.atob(base64),\r\n          outputArray = new Uint8Array(rawData.length);\r\n\r\n    for (let i = 0; i < rawData.length; ++i) outputArray[i] = rawData.charCodeAt(i);\r\n\r\n    return outputArray;\r\n  }\r\n  /**\r\n   * Send subscription to server\r\n   */\r\n\r\n  async function sendSubscriptionToServer(subscription, url) {\r\n    const key = subscription.getKey(\"p256dh\"),\r\n          token = subscription.getKey(\"auth\"),\r\n          contentEncoding = (PushManager.supportedContentEncodings || [\"aesgcm\"])[0];\r\n    let formData = new FormData();\r\n    formData.set(\"endpoint\", subscription.endpoint);\r\n    formData.set(\"publicKey\", key ? btoa(String.fromCharCode.apply(null, new Uint8Array(key))) : null);\r\n    formData.set(\"authToken\", token ? btoa(String.fromCharCode.apply(null, new Uint8Array(token))) : null);\r\n    formData.set(\"contentEncoding\", contentEncoding);\r\n    let response = await ew__default[\"default\"].fetch(url, {\r\n      method: \"POST\",\r\n      body: formData\r\n    });\r\n    return response.json();\r\n  }\r\n  /**\r\n   * Create subscription and send to server\r\n   * @returns Promise that resolves to a PushSubscription object\r\n   */\r\n\r\n  async function createSubscription() {\r\n    var _result$error2;\r\n\r\n    let url = ew__default[\"default\"].getApiUrl([ew__default[\"default\"].API_PUSH_NOTIFICATION_ACTION, ew__default[\"default\"].API_PUSH_NOTIFICATION_SUBSCRIBE]),\r\n        serviceWorkerReg = await navigator.serviceWorker.ready,\r\n        subscription = await serviceWorkerReg.pushManager.subscribe({\r\n      userVisibleOnly: true,\r\n      applicationServerKey: urlBase64ToUint8Array(ew__default[\"default\"].PUSH_SERVER_PUBLIC_KEY)\r\n    }),\r\n        result = await sendSubscriptionToServer(subscription, url);\r\n    if (result != null && (_result$error2 = result.error) != null && _result$error2.description) ew__default[\"default\"].alert(result.error.description);\r\n    return result.success ? subscription : null;\r\n  }\r\n  /**\r\n   * Get subscription\r\n   */\r\n\r\n  async function getSubscription() {\r\n    let serviceWorkerReg = await navigator.serviceWorker.ready;\r\n    return serviceWorkerReg.pushManager.getSubscription();\r\n  }\r\n  /**\r\n   * Set subscription\r\n   * @param {PushSubscription} subscription\r\n   */\r\n\r\n  function setSubscription(subscription) {\r\n    let $btn = $__default[\"default\"](\"#subscribe-notification\").toggleClass(\"ew-enable-notification\", !subscription).attr(\"data-bs-original-title\", ew__default[\"default\"].language.phrase(subscription ? \"DisableNotifications\" : \"EnableNotifications\")).removeClass(\"disabled\");\r\n    $btn.find(\"i\").toggleClass(\"fa-bell\", !subscription).toggleClass(\"fa-bell-slash\", !!subscription);\r\n    let inst = bootstrap.Tooltip.getInstance($btn[0]);\r\n    if (inst != null && inst.tip) inst.setContent(inst.tip);\r\n  }\r\n  /**\r\n   * Subscribe notifications\r\n   *\r\n   * @returns false\r\n   */\r\n\r\n  async function subscribeNotification() {\r\n    if (Notification.permission !== \"denied\" && !ew__default[\"default\"].IS_SYS_ADMIN) {\r\n      // Support non system administrator\r\n      let $body = $__default[\"default\"](\"body\").css(\"cursor\", \"wait\");\r\n\r\n      try {\r\n        if (Notification.permission === \"granted\") {\r\n          var _await$getSubscriptio, _document$getElementB;\r\n\r\n          setSubscription((_await$getSubscriptio = await getSubscription()) != null ? _await$getSubscriptio : await createSubscription());\r\n          if (!((_document$getElementB = document.getElementById(\"subscribe-notification\")) != null && _document$getElementB.classList.contains(\"ew-enable-notification\"))) ew__default[\"default\"].showToast(ew__default[\"default\"].language.phrase(\"NotificationsEnabled\"), \"success\");\r\n        } else if (Notification.permission === \"default\" && (await Notification.requestPermission()) == \"granted\") {\r\n          var _document$getElementB2;\r\n\r\n          setSubscription(await createSubscription());\r\n          if (!((_document$getElementB2 = document.getElementById(\"subscribe-notification\")) != null && _document$getElementB2.classList.contains(\"ew-enable-notification\"))) ew__default[\"default\"].showToast(ew__default[\"default\"].language.phrase(\"NotificationsEnabled\"), \"success\");\r\n        }\r\n      } catch (e) {\r\n        ew__default[\"default\"].alert(e);\r\n      } finally {\r\n        $body.css(\"cursor\", \"default\");\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Check subscription\r\n   *\r\n   * @returns true\r\n   */\r\n\r\n  async function checkSubscription() {\r\n    $__default[\"default\"](\"#subscribe-notification\").tooltip();\r\n    if (Notification.permission == \"granted\") setSubscription(await getSubscription());else setSubscription(null);\r\n    return true;\r\n  }\r\n  /**\r\n   * Unsubscribe notifications\r\n   *\r\n   * @returns false\r\n   */\r\n\r\n  async function unsubscribeNotification() {\r\n    ew__default[\"default\"].prompt({\r\n      html: ew__default[\"default\"].language.phrase(\"DisableNotificationsMsg\")\r\n    }, async res => {\r\n      if (!res) return;\r\n      let $body = $__default[\"default\"](\"body\").css(\"cursor\", \"wait\");\r\n\r\n      try {\r\n        var _result$error3;\r\n\r\n        let subscription = await getSubscription();\r\n        await subscription.unsubscribe();\r\n        let url = ew__default[\"default\"].getApiUrl([ew__default[\"default\"].API_PUSH_NOTIFICATION_ACTION, ew__default[\"default\"].API_PUSH_NOTIFICATION_DELETE]),\r\n            result = await sendSubscriptionToServer(subscription, url); // Delete subscription\r\n\r\n        if (result != null && (_result$error3 = result.error) != null && _result$error3.description) {\r\n          ew__default[\"default\"].alert(result.error.description);\r\n          return false;\r\n        }\r\n\r\n        if (result.success) {\r\n          // No subscription or deleted successfully\r\n          setSubscription(null);\r\n          ew__default[\"default\"].showToast(ew__default[\"default\"].language.phrase(\"NotificationsDisabled\"), \"success\");\r\n        }\r\n      } catch (e) {\r\n        ew__default[\"default\"].alert(e);\r\n      } finally {\r\n        $body.css(\"cursor\", \"default\");\r\n      }\r\n    });\r\n    return false;\r\n  }\r\n  /**\r\n   * Init web push notifications\r\n   */\r\n\r\n  loadjs.ready(\"foot\", () => {\r\n    if (ew__default[\"default\"].PUSH_SERVER_PUBLIC_KEY && isPushNotificationSupported()) {\r\n      navigator.serviceWorker.register(ew__default[\"default\"].PATH_BASE + ew__default[\"default\"].SERVICE_WORKER, {\r\n        scope: ew__default[\"default\"].PATH_BASE\r\n      }).then(() => {\r\n        checkSubscription();\r\n        $__default[\"default\"](\"#subscribe-notification\").on(\"click\", function () {\r\n          this.classList.contains(\"ew-enable-notification\") ? subscribeNotification() : unsubscribeNotification();\r\n        });\r\n      }).catch(e => console.log(e));\r\n    } else {\r\n      $__default[\"default\"](\"#subscribe-notification\").addClass(\"d-none\");\r\n    }\r\n  });\n\n  var webpush = {\n    __proto__: null,\n    pushNotificationDialogShow: pushNotificationDialogShow,\n    isPushNotificationSupported: isPushNotificationSupported,\n    subscribeNotification: subscribeNotification,\n    checkSubscription: checkSubscription,\n    unsubscribeNotification: unsubscribeNotification\n  };\n\n  /**\r\n   * Map styles\r\n   */\r\n  /**\r\n   * Show map\r\n   * @param {Object} data Data of map\r\n   */\r\n\r\n  function show(data) {\r\n    if (data.inited) // Already initiated\r\n      return true;\r\n    let latlng = data.latlng,\r\n        $div = $__default[\"default\"](\"#\" + data.id),\r\n        useSingleMap = data.useSingleMap,\r\n        showAllMarkers = data.showAllMarkers,\r\n        useMarkerClusterer = data.useMarkerClusterer,\r\n        ext = ew.maps[data.ext];\r\n\r\n    if (useSingleMap) {\r\n      // Use single map\r\n      let id = data.id.replace(/^mp\\d*_/, \"mp_\"); // Remove index from \"m<n>_\" prefix\r\n\r\n      $div = $__default[\"default\"](\"#\" + id);\r\n\r\n      if (!$div[0]) {\r\n        $div = $__default[\"default\"](\"<div></div>\").attr(\"id\", id).addClass(\"ew-single-map\").height(data.singleMapHeight); // Create new $div for single map\r\n\r\n        if (data.singleMapWidth) $div.width(data.singleMapWidth);\r\n        $__default[\"default\"](\".ew-grid, .ew-multi-column-grid\").first()[data.showMapOnTop ? \"before\" : \"after\"]($div); // Insert before/after table\r\n\r\n        data.map = ext.createMap($div[0], data);\r\n        $div.data(\"map\", data.map);\r\n        $div.data(\"ext\", data.ext);\r\n        $div.data(\"bounds\", showAllMarkers ? ext.createBounds() : null);\r\n        $div.data(\"markerClusterer\", useMarkerClusterer ? ext.createMarkerClusterer(data) : null);\r\n      }\r\n\r\n      data = Object.assign(data, $div.data()); // Merge data\r\n    } else {\r\n      if (!latlng) {\r\n        // Location not found\r\n        $div.addClass(\"d-none\").html(data.status);\r\n        return true;\r\n      }\r\n\r\n      $div.next(\".ew-map-value\").addClass(\"d-none\"); // Hide view value\r\n\r\n      if (!data.map) data.map = ext.createMap($div[0], data);\r\n    }\r\n\r\n    data.marker = ext.createMarker(data); // Create marker\r\n\r\n    data.inited = true; // Initiated\r\n\r\n    $__default[\"default\"](document).trigger(\"map\", [data]);\r\n    return true;\r\n  }\r\n  /**\r\n   * All maps initiated\r\n   */\r\n\r\n  function done() {\r\n    $__default[\"default\"](\".ew-single-map\").each(function () {\r\n      let data = $__default[\"default\"](this).data();\r\n      ew.maps[data.ext].fitBounds(data); // Fit bounds\r\n    });\r\n    $__default[\"default\"](document).trigger(\"maps\");\r\n  }\r\n  /**\r\n   * Init maps\r\n   * @param {string} [ext] - Map type, e.g. 'googlemaps', 'leaflet'\r\n   * @returns\r\n   */\r\n\r\n  function init(ext) {\r\n    let promises = $__default[\"default\"](\".ew-map\").filter(function () {\r\n      return !ext || $__default[\"default\"](this).data(\"ext\") == ext;\r\n    }).map(function (i) {\r\n      let data = $__default[\"default\"](this).data();\r\n      if (data.inited) // Already initiated\r\n        return show(data);\r\n      data.id = this.id; // Get ID\r\n\r\n      data.address = (data.address || \"\").trim();\r\n\r\n      if (data.address) {\r\n        let geocodingDelay = data.geocodingDelay;\r\n        return new Promise(resolve => {\r\n          $__default[\"default\"].later(i * geocodingDelay, null, () => {\r\n            // Set a timer for better performance\r\n            resolve(ew.maps[data.ext].geocode(data).then(latlng => {\r\n              data.latlng = latlng;\r\n            }).catch(status => {\r\n              data.status = status;\r\n            }).finally(() => show(data)));\r\n          });\r\n        });\r\n      } else {\r\n        let latitude = data.latitude,\r\n            longitude = data.longitude;\r\n        if (latitude && !isNaN(latitude) && longitude && !isNaN(longitude)) data.latlng = ew.maps[data.ext].createLatLng(latitude, longitude);\r\n        return show(data);\r\n      }\r\n    }).get();\r\n    return Promise.all(promises).then(done);\r\n  }\r\n  /**\r\n   * Init\r\n   */\r\n\r\n  $__default[\"default\"](function () {\r\n    $__default[\"default\"](\"#ew-modal-dialog\").on(\"load.ew\", init);\r\n    $__default[\"default\"](document).on(\"preview\", init);\r\n  });\n\n  var maps = {\n    __proto__: null,\n    show: show,\n    done: done,\n    init: init\n  };\n\n  ew.IS_SCREEN_SM_MIN = window.matchMedia(\"(min-width: 768px)\").matches; // Should matches $screen-sm-min\r\n\r\n  ew.MOBILE_DETECT = new MobileDetect(window.navigator.userAgent);\r\n  ew.IS_MOBILE = !!ew.MOBILE_DETECT.mobile(); // Charts\r\n\r\n  window.exportCharts = {}; // Per window\r\n  // Extend\r\n\r\n  Object.assign(ew, {\r\n    MultiPage,\r\n    Form,\r\n    Validators,\r\n    maps\r\n  }, functions, webpush);\r\n  var $document = $__default[\"default\"](document); // Init document\r\n\r\n  loadjs.ready(\"load\", function () {\r\n    $__default[\"default\"].views.settings.debugMode(ew.DEBUG);\r\n    ew.setSessionTimer();\r\n    ew.initPage();\r\n    $__default[\"default\"](\"#ew-modal-dialog\").on(\"load.ew\", ew.initPage);\r\n    $__default[\"default\"](\"#ew-add-opt-dialog\").on(\"load.ew\", ew.initPage);\r\n    var hash = ew.currentUrl.searchParams.get(\"hash\");\r\n    if (hash) $__default[\"default\"](\"html, body\").animate({\r\n      scrollTop: $__default[\"default\"](\"#\" + hash).offset().top\r\n    }, 800);\r\n    $document.trigger(\"load\");\r\n  }); // Default \"addoption\" event (fired before adding new option to selection list)\r\n\r\n  $document.on(\"addoption\", function (e, args) {\r\n    var row = args.data; // New row to be validated\r\n\r\n    var arp = args.parents; // Parent field values\r\n\r\n    for (var i = 0, cnt = arp.length; i < cnt; i++) {\r\n      // Iterate parent values\r\n      var p = arp[i];\r\n      if (!p.length) // Empty parent\r\n        //continue; // Allow\r\n        return args.valid = false; // Disallow\r\n\r\n      var val = row[\"ff\" + (i > 0 ? i + 1 : \"\")]; // Filter fields start from the 6th field\r\n\r\n      if (!$__default[\"default\"].isUndefined(val) && !p.includes(String(val))) // Filter field value not in parent field values\r\n        return args.valid = false; // Returns false if invalid\r\n    }\r\n  }); // Click handler for buttons\r\n\r\n  $document.on(\"click\", \"[data-ew-action]:not([data-ew-action=''])\", function (e) {\r\n    let data = Object.assign({}, $__default[\"default\"](this).data()),\r\n        action = data.ewAction;\r\n\r\n    if (!action) {\r\n      return true;\r\n    } else if (action == \"none\") {\r\n      return false;\r\n    } else if (action == \"redirect\") {\r\n      return ew.redirect(data.url);\r\n    } else if (action == \"reload\") {\r\n      location.reload();\r\n      return false;\r\n    } else if (action == \"submit\") {\r\n      delete data.ewAction;\r\n      return ew.submitAction(e, data);\r\n    } else if (action == \"modal\") {\r\n      delete data.ewAction;\r\n      return ew.modalDialogShow({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"export\") {\r\n      return ew.export(e, data.url, data.export, data.custom, data.exportSelected);\r\n    } else if (action == \"layout\") {\r\n      return ew.toggleLayout(this);\r\n    } else if (action == \"language\") {\r\n      return ew.setLanguage(this);\r\n    } else if (action == \"filter\") {\r\n      return ew.filter(e);\r\n    } else if (action == \"email\") {\r\n      delete data.ewAction;\r\n      return ew.emailDialogShow({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"set-action\") {\r\n      this.form.elements[\"action\"].value = data.value;\r\n    } else if (action == \"drilldown\") {\r\n      return ew.showDrillDown(e, this, data.url, data.id, data.hdr);\r\n    } else if (action == \"export-charts\") {\r\n      return ew.exportWithCharts(data.url, data.exportid);\r\n    } else if (action == \"add-option\") {\r\n      delete data.ewAction;\r\n      return ew.addOptionDialogShow({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"search-type\") {\r\n      return ew.setSearchType(this);\r\n    } else if (action == \"search-operator\") {\r\n      ew.toggleSearchOperator(e, data.target, data.value);\r\n    } else if (action == \"search-toggle\") {\r\n      $__default[\"default\"](\"#\" + this.dataset.form + \"_search_panel\").collapse(\"toggle\");\r\n    } else if (action == \"highlight\") {\r\n      $__default[\"default\"](\"mark.\" + this.dataset.name).toggleClass(\"mark\");\r\n    } else if (action == \"inline-delete\") {\r\n      return ew.confirmDelete(this);\r\n    } else if (action == \"add-grid-row\") {\r\n      return ew.addGridRow(this);\r\n    } else if (action == \"delete-grid-row\") {\r\n      return ew.deleteGridRow(this, this.dataset.rowindex);\r\n    } else if (action == \"select-all\") {\r\n      ew.selectAll(this);\r\n    } else if (action == \"select-key\") {\r\n      ew.selectKey(e);\r\n    } else if (action == \"select-all-keys\") {\r\n      ew.selectAllKeys(this);\r\n    } else if (action == \"import\") {\r\n      return ew.importDialogShow({\r\n        evt: e,\r\n        hdr: data.hdr\r\n      });\r\n    } else if (action == \"password\") {\r\n      return ew.togglePassword(e);\r\n    } else if (action == \"push\") {\r\n      return ew.pushNotificationDialogShow({\r\n        evt: e,\r\n        url: data.apiUrl\r\n      });\r\n    } else if (action == \"enable-2fa\") {\r\n      return ew.enable2FA();\r\n    } else if (action == \"disable-2fa\") {\r\n      return ew.disable2FA();\r\n    } else if (action == \"backup-codes\") {\r\n      return ew.showBackupCodes();\r\n    } else if (action == \"scroll-top\") {\r\n      $__default[\"default\"](document).scrollTop($__default[\"default\"]('#top').offset().top);\r\n      return false;\r\n    }\r\n  }); // Click handler for row links\r\n\r\n  $document.on(\"click\", \".ew-row-link\", e => e.stopPropagation()); // Fix z-index of multiple modals\r\n\r\n  $document.on(\"show.bs.modal\", \".modal\", function () {\r\n    var zIndex = 1050 + $__default[\"default\"](\".modal:visible\").length;\r\n    $__default[\"default\"](this).css(\"z-index\", zIndex);\r\n    setTimeout(function () {\r\n      $__default[\"default\"](\".modal-backdrop\").not(\".modal-stack\").css(\"z-index\", zIndex - 1).addClass(\"modal-stack\");\r\n    }, 0);\r\n  }); // Fix scrolling of multiple modals\r\n\r\n  $document.on(\"hidden.bs.modal\", \".modal\", function () {\r\n    $__default[\"default\"](\".modal:visible\").length && $__default[\"default\"](\"body\").addClass(\"modal-open\");\r\n  });\n\n  $__default[\"default\"].extend({\r\n    isBoolean: function (o) {\r\n      return typeof o === 'boolean';\r\n    },\r\n    isNull: function (o) {\r\n      return o === null;\r\n    },\r\n    isNumber: function (o) {\r\n      return typeof o === 'number' && isFinite(o);\r\n    },\r\n    isObject: function (o) {\r\n      return o && (typeof o === 'object' || this.isFunction(o)) || false;\r\n    },\r\n    isString: function (o) {\r\n      return typeof o === 'string';\r\n    },\r\n    isUndefined: function (o) {\r\n      return typeof o === 'undefined';\r\n    },\r\n    isValue: function (o) {\r\n      return this.isObject(o) || this.isString(o) || this.isNumber(o) || this.isBoolean(o);\r\n    },\r\n    isDate: function (o) {\r\n      return this.type(o) === 'date' && o.toString() !== 'Invalid Date' && !isNaN(o);\r\n    },\r\n    later: function (when, o, fn, data, periodic) {\r\n      when = when || 0;\r\n      o = o || {};\r\n      var m = fn,\r\n          d = data,\r\n          f,\r\n          r;\r\n      if (this.isString(fn)) m = o[fn];\r\n      if (!m) return;\r\n      if (!this.isUndefined(data) && !this.isArray(d)) d = [data];\r\n\r\n      f = function () {\r\n        m.apply(o, d || []);\r\n      };\r\n\r\n      r = periodic ? setInterval(f, when) : setTimeout(f, when);\r\n      return {\r\n        interval: periodic,\r\n        cancel: function () {\r\n          if (this.interval) {\r\n            clearInterval(r);\r\n          } else {\r\n            clearTimeout(r);\r\n          }\r\n        }\r\n      };\r\n    }\r\n  });\n\n  /**\r\n   * jQuery.fields() plugin\r\n   *\r\n   * @param {string|undefined} fldvar - Field variable name or undefined\r\n   *  If field variable name, returns jQuery object of the specified field element(s).\r\n   *  If unspecified, returns object of jQuery objects of all fields.\r\n   * @returns jQuery object\r\n   */\r\n\r\n  $__default[\"default\"].fn.fields = function (fldvar) {\r\n    // Note: fldvar has NO \"x_\" prefix\r\n    var rec = {},\r\n        id = this.attr(\"id\"),\r\n        obj = this[0],\r\n        m = id.match(/^[xy](\\d*)_/),\r\n        f,\r\n        tbl,\r\n        infix;\r\n\r\n    if (m) {\r\n      // \"this\" is input element\r\n      f = ew.getForm(obj); // form\r\n\r\n      tbl = this.data(\"table\"); // table var\r\n\r\n      infix = m[1]; // row index\r\n    } else if (obj != null && obj.htmlForm) {\r\n      // \"this\" is form\r\n      f = obj.$element; // form\r\n\r\n      tbl = obj.id.replace(new RegExp(\"^f|\" + obj.pageId + \"$\", \"g\"), \"\"); // table var\r\n\r\n      infix = obj.htmlForm.dataset.rowindex; // row index\r\n    }\r\n\r\n    var selector = \"[data-table\" + (tbl ? \"=\" + tbl : \"\") + \"][data-field\" + (fldvar ? \"=x_\" + fldvar : \"\") + \"]\";\r\n    if ($__default[\"default\"].isValue(infix)) selector += \"[name^=x\" + infix + \"_]\";\r\n\r\n    if (f && selector) {\r\n      $__default[\"default\"](f).find(selector).each(function () {\r\n        var key = this.getAttribute(\"data-field\").substr(2),\r\n            name = this.getAttribute(\"name\");\r\n        key = /^y_/.test(name) ? \"y_\" + key : key; // Use \"y_fldvar\" as key for 2nd search input\r\n\r\n        rec[key] = rec[key] ? rec[key].add(this) : $__default[\"default\"](this); // Create jQuery object for each field\r\n      });\r\n    }\r\n\r\n    return fldvar ? rec[fldvar] : rec;\r\n  };\r\n\r\n  $__default[\"default\"].fn.extend({\r\n    // Get jQuery object of the row (<div> or <tr>)\r\n    row: function () {\r\n      var _this$data;\r\n\r\n      var $row = this.closest(\"#r_\" + ((_this$data = this.data(\"field\")) == null ? void 0 : _this$data.substr(2)));\r\n      if (!$row[0]) $row = this.closest(\".ew-table > tbody > tr\"); // Grid page\r\n\r\n      return $row;\r\n    },\r\n    // Show/Hide field\r\n    visible: function (v) {\r\n      var _this$data2;\r\n\r\n      var $p = this.closest(\"#r_\" + ((_this$data2 = this.data(\"field\")) == null ? void 0 : _this$data2.substr(2))); // Find the row\r\n\r\n      if (!$p[0]) $p = this.closest(\"[id^=el]\"); // Find the span\r\n\r\n      if (typeof v != \"undefined\") {\r\n        $p.toggle(v);\r\n        return this;\r\n      } else {\r\n        return $el.is(\":visible\");\r\n      }\r\n    },\r\n    // Get/Set field \"readonly\" attribute\r\n    // Note: This attribute is ignored if the value of the type attribute is hidden, range, color, checkbox, radio, file, or a button type\r\n    readonly: function (v) {\r\n      if (typeof v != \"undefined\") {\r\n        this.prop(\"readOnly\", v);\r\n        return this;\r\n      } else {\r\n        return this.prop(\"readOnly\");\r\n      }\r\n    },\r\n    // Get/Set field \"disabled\" attribute\r\n    // Note: A disabled control's value isn't submitted with the form\r\n    disabled: function (v) {\r\n      if (typeof v != \"undefined\") {\r\n        this.prop(\"disabled\", v);\r\n        return this;\r\n      } else {\r\n        return this.prop(\"disabled\");\r\n      }\r\n    },\r\n    // Get/Set field value(s)\r\n    // Note: Return array if select-multiple\r\n    value: function (v) {\r\n      var type = this.attr(\"type\");\r\n\r\n      if (typeof v != \"undefined\") {\r\n        if (!Array.isArray(v)) v = [v];\r\n        var type = this.attr(\"type\");\r\n        var el = type == \"radio\" || type == \"checkbox\" ? this.get() : this[0];\r\n\r\n        if (ew.isHiddenTextArea(this)) {\r\n          this.val(v).data(\"editor\").save();\r\n        } else {\r\n          ew.selectOption(el, v);\r\n\r\n          if (this.hasClass(\"select2-hidden-accessible\")) {\r\n            // Select2\r\n            this.trigger(\"change\");\r\n          }\r\n        }\r\n\r\n        return this;\r\n      } else {\r\n        if (type == \"checkbox\") {\r\n          var val = ew.getOptionValues(this.get());\r\n          return this.length == 1 ? val.join() : val;\r\n        } else if (type == \"radio\") {\r\n          return ew.getOptionValues(this.get()).join();\r\n        } else if (ew.isHiddenTextArea(this)) {\r\n          this.data(\"editor\").save();\r\n          return this.val();\r\n        } else {\r\n          return this.val();\r\n        }\r\n      }\r\n    },\r\n    // Get field value as number\r\n    toNumber: function () {\r\n      return ew.parseNumber(this.value());\r\n    },\r\n    // Get field value as Luxon object\r\n    toDate: function () {\r\n      var _ew$vars$tables, _ew$vars$tables$table, _ew$vars$tables$table2, _ew$vars$tables$table3;\r\n\r\n      let data = this.data(),\r\n          table = data.table,\r\n          field = data.field.replace(/^[xy]_/, \"\"),\r\n          format = (_ew$vars$tables = ew.vars.tables) == null ? void 0 : (_ew$vars$tables$table = _ew$vars$tables[table]) == null ? void 0 : (_ew$vars$tables$table2 = _ew$vars$tables$table.fields) == null ? void 0 : (_ew$vars$tables$table3 = _ew$vars$tables$table2[field]) == null ? void 0 : _ew$vars$tables$table3.clientFormatPattern;\r\n      return ew.parseDateTime(this.value(), format);\r\n    },\r\n    // Get field value as native Date object\r\n    toJsDate: function () {\r\n      return this.toDate().toJSDate();\r\n    }\r\n  });\n\n  bootstrap.Dropdown.prototype._getMenuElement = function () {\r\n    if (this._element.closest(\"[data-widget]\")) $__default[\"default\"](this._element).on(\"click.bs.dropdown\", e => e.stopPropagation());\r\n\r\n    if (!this._menu) {\r\n      const parent = bootstrap.Dropdown.getParentFromElement(this._element);\r\n\r\n      if (parent) {\r\n        this._menu = parent.querySelector('.dropdown-menu'); // Move the menu to document body if menu inside responsive table\r\n\r\n        if (this._menu.closest('.table-responsive')) {\r\n          let container = this._menu.closest('.popover-body, .modal-body, body');\r\n\r\n          container.appendChild(this._menu);\r\n          let menu = this._menu;\r\n          if (!this._element.id) this._element.id = \"dropdownbtn\" + ew.random();\r\n          menu.setAttribute('aria-labelledby', this._element.id);\r\n\r\n          function callback(mutationList) {\r\n            mutationList.forEach(mutation => {\r\n              switch (mutation.type) {\r\n                case \"attributes\":\r\n                  if (mutation.target.classList.contains('show')) {\r\n                    menu.classList.add('d-block');\r\n                  } else {\r\n                    menu.classList.remove('d-block');\r\n                  }\r\n\r\n                  break;\r\n              }\r\n            });\r\n          }\r\n\r\n          let observer = new MutationObserver(callback);\r\n          observer.observe(parent, {\r\n            attributeFilter: [\"class\"],\r\n            attributeOldValue: false,\r\n            subtree: false\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    return this._menu;\r\n  };\n\n  $__default[\"default\"](window).off(\"load.lte.treeview\"); // Treeview\r\n\r\n  var Treeview = adminlte.Treeview;\r\n  Treeview.prototype._toggle = Treeview.prototype.toggle;\r\n\r\n  Treeview.prototype.toggle = function toggle(e) {\r\n    let $currentTarget = $__default[\"default\"](e.currentTarget),\r\n        treeviewMenu = $currentTarget.next(),\r\n        href = $currentTarget.attr(\"href\"),\r\n        isText = e.target.tagName == \"P\";\r\n    if (!treeviewMenu.is(\".nav-treeview\") || isText && href && href != \"#\" && href != \"javascript:void(0);\") // Menu text with href\r\n      return;\r\n\r\n    this._toggle(e);\r\n\r\n    e.stopImmediatePropagation();\r\n  }; // Dropdown menu parent item with href // Override AdminLTE\r\n\r\n  $__default[\"default\"](\"ul.dropdown-menu [data-bs-toggle=dropdown]\").on(\"click\", function (e) {\r\n    let href = $__default[\"default\"](this).attr(\"href\");\r\n    if (href && href != \"#\" && e.target.tagName == \"SPAN\") window.location = href;\r\n  });\n\n  var isNil = (value) => {\r\n      return value === null || value === undefined;\r\n  };\r\n\r\n  var isNil$1 = isNil;\n\n  var isFunction = (value) => {\r\n      return typeof value === 'function';\r\n  };\r\n\r\n  var isFunction$1 = isFunction;\n\n  var isNaNNumber = (value) => {\r\n      return typeof value === 'number' && isNaN(value);\r\n  };\r\n\r\n  var isNaNNumber$1 = isNaNNumber;\n\n  var isFiniteNumber = (value) => {\r\n      return typeof value == 'number' && isFinite(value);\r\n  };\r\n\r\n  var isFiniteNumber$1 = isFiniteNumber;\n\n  /**\r\n   * Optimized for performance\r\n   */\r\n  const multiplyByPowerOfTen = (number, powerOfTenExponent) => {\r\n      if (!isFiniteNumber$1(number))\r\n          return NaN;\r\n      const numAsString = '' + number;\r\n      const indexOfE = numAsString.indexOf('e');\r\n      if (indexOfE === -1) {\r\n          return +(numAsString + 'e' + powerOfTenExponent);\r\n      }\r\n      else {\r\n          return +(numAsString.slice(0, indexOfE) + 'e' + (+numAsString.slice(indexOfE + 1) + powerOfTenExponent));\r\n      }\r\n  };\r\n\r\n  var multiplyByPowerOfTen$1 = multiplyByPowerOfTen;\n\n  /**\r\n   * Only handles direct power of ten (only integer exponents)\r\n   */\r\n  const log10 = (numberThatIsPowerOfTen) => {\r\n      return Math.round(Math.log(numberThatIsPowerOfTen) * Math.LOG10E);\r\n  };\r\n\r\n  var log10$1 = log10;\n\n  const toObject = (arr, entriesResolver) => {\r\n      const object = {};\r\n      for (let i = 0; i < arr.length; ++i) {\r\n          if (i in arr) {\r\n              const [key, value] = entriesResolver(arr[i], i);\r\n              object[key] = value;\r\n          }\r\n      }\r\n      return object;\r\n  };\r\n\r\n  var toObject$1 = toObject;\n\n  // <i> Extracted from https://stackoverflow.com/questions/3446170/escape-string-for-use-in-javascript-regex\r\n  const escapeRegexString = (string) => {\r\n      return string.replace(/[.*+?^${}()|[\\]\\\\]/g, match => `\\\\${match}`);\r\n  };\r\n\r\n  var escapeRegexString$1 = escapeRegexString;\n\n  /**\r\n   * This function doesn't work with non-primitive arguments\r\n   */\r\n  const memoize = (fn) => {\r\n      const cache = {};\r\n      return function (...args) {\r\n          const cacheKey = args.length > 1 ? args.join('-(:-:)-') : args[0];\r\n          if (cacheKey in cache) {\r\n              return cache[cacheKey];\r\n          }\r\n          const result = fn.apply(this, args);\r\n          cache[cacheKey] = result;\r\n          return result;\r\n      };\r\n  };\r\n\r\n  var memoize$1 = memoize;\n\n  const powerOf10LookupObject = (() => {\r\n      const object = {};\r\n      // 1 <= x <= Infinity (positive exponent)\r\n      let additionalZeros = '';\r\n      let currentValue;\r\n      while (currentValue !== Infinity) {\r\n          currentValue = +('1' + additionalZeros);\r\n          object[currentValue] = true;\r\n          additionalZeros += '0';\r\n      }\r\n      // 0 <= x < 1 (negative exponent)\r\n      additionalZeros = '';\r\n      currentValue = undefined;\r\n      while (currentValue !== 0) {\r\n          currentValue = +('0.' + additionalZeros + '1');\r\n          object[currentValue] = true;\r\n          additionalZeros += '0';\r\n      }\r\n      return object;\r\n  })();\r\n  const isPowerOfTen = (number) => {\r\n      return !!powerOf10LookupObject[number];\r\n  };\r\n\r\n  var isPowerOfTen$1 = isPowerOfTen;\n\n  const toBase = (value, valueUnit, unitScale) => {\r\n      if (!isFiniteNumber$1(value) || valueUnit === unitScale.base)\r\n          return value;\r\n      if (!(valueUnit in unitScale.scale))\r\n          return NaN;\r\n      const toBaseMultiplier = unitScale.scale[valueUnit] || 1;\r\n      return isPowerOfTen$1(toBaseMultiplier)\r\n          ? multiplyByPowerOfTen$1(value, log10$1(toBaseMultiplier))\r\n          : value * toBaseMultiplier;\r\n  };\r\n  const convertUnit = (value, originUnit, targetUnit, unitScale) => {\r\n      if (!isFiniteNumber$1(value) || originUnit === targetUnit)\r\n          return value;\r\n      const valueAsBase = toBase(value, originUnit, unitScale);\r\n      const resolvedScale = Object.assign(Object.assign({}, unitScale.scale), { [unitScale.base]: 1 });\r\n      if (isNaN(valueAsBase) || !(originUnit in resolvedScale) || !(targetUnit in resolvedScale))\r\n          return NaN;\r\n      const conversionFactorFromBase = unitScale.scale[targetUnit] || 1;\r\n      return isPowerOfTen$1(conversionFactorFromBase)\r\n          ? multiplyByPowerOfTen$1(valueAsBase, -log10$1(conversionFactorFromBase))\r\n          : valueAsBase / conversionFactorFromBase;\r\n  };\r\n  /**\r\n   * Looks through every possibility for the 'best' available unit.\r\n   * i.e. Where the value has the fewest numbers before the decimal point,\r\n   * but is still higher than 1.\r\n   */\r\n  const toBest = (value, originUnit, unitScale, options) => {\r\n      const resolvedOptions = Object.assign({ exclude: [], cutOffNumber: 1 }, options);\r\n      let best = null;\r\n      const scale = unitScale.scale;\r\n      Object.keys(scale).sort((a, b) => scale[a] - scale[b]).forEach((scaleUnit) => {\r\n          const isIncluded = resolvedOptions.exclude.indexOf(scaleUnit) === -1;\r\n          if (!isIncluded)\r\n              return;\r\n          const result = convertUnit(value, originUnit, scaleUnit, unitScale);\r\n          const absoluteResult = Math.abs(result);\r\n          if (!best || (absoluteResult >= resolvedOptions.cutOffNumber && absoluteResult < Math.abs(best[0]))) {\r\n              best = [result, scaleUnit];\r\n          }\r\n      });\r\n      return best || [value, originUnit];\r\n  };\r\n  const unitScale = (unitScaleDefinition) => {\r\n      return {\r\n          toBase: (value, unit) => {\r\n              return toBase(value, unit, unitScaleDefinition);\r\n          },\r\n          convert: (value, originUnit, targetUnit) => {\r\n              return convertUnit(value, originUnit, targetUnit, unitScaleDefinition);\r\n          },\r\n          toBest: (value, originUnit, options) => {\r\n              return toBest(value, originUnit, unitScaleDefinition, options);\r\n          },\r\n          scaleDefinition: unitScaleDefinition,\r\n      };\r\n  };\n\n  /**\r\n   * Short version of mozilla polyfill:\r\n   * <i> See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat\r\n   */\r\n  const stringRepeat = (str, count) => {\r\n      // return (str.repeat && str.repeat(count)) || new Array(count + 1).join(str);\r\n      if (count < 1)\r\n          return '';\r\n      let result = '';\r\n      let pattern = str;\r\n      while (count > 1) {\r\n          if (count & 1)\r\n              result += pattern;\r\n          count >>>= 1, pattern += pattern;\r\n      }\r\n      return result + pattern;\r\n  };\r\n\r\n  var stringRepeat$1 = stringRepeat;\n\n  const baseCreateUnitScaleFromLocaleAbbreviations = (str) => {\r\n      if (!str) {\r\n          return unitScale({ base: '', scale: {} });\r\n      }\r\n      const scale = str.split('|');\r\n      const scaleDefinition = { ['']: 1 };\r\n      scale.forEach((scaleItem, scaleItemIndex) => {\r\n          if (!scaleItem)\r\n              return;\r\n          scaleDefinition[scaleItem] = +(1 + stringRepeat$1('0', scaleItemIndex));\r\n      });\r\n      return unitScale({ base: '', scale: scaleDefinition });\r\n  };\r\n  const createUnitScaleFromLocaleAbbreviations = memoize$1(baseCreateUnitScaleFromLocaleAbbreviations);\r\n\r\n  var createUnitScaleFromLocaleAbbreviations$1 = createUnitScaleFromLocaleAbbreviations;\n\n  const replaceNumeralSystemWithLatinNumbers = (numericStringWithExtraInfo, numeralSystemMap) => {\r\n      if (!numeralSystemMap || numeralSystemMap.length !== 10)\r\n          return numericStringWithExtraInfo;\r\n      const numericStringLength = numericStringWithExtraInfo.length;\r\n      const numeralSystemToLatinSystemMap = toObject$1(numeralSystemMap, (digit, digitIndex) => [digit.replace(/\\u200e/g, ''), '' + digitIndex]);\r\n      let output = '';\r\n      for (let numericStringIndex = 0; numericStringIndex < numericStringLength; numericStringIndex++) {\r\n          const char = numericStringWithExtraInfo[numericStringIndex];\r\n          output += numeralSystemToLatinSystemMap[char] || char;\r\n      }\r\n      return output;\r\n  };\r\n  const getScalingFactorFromAbbreviations = (stringOriginal, options) => {\r\n      var _a;\r\n      const scale = createUnitScaleFromLocaleAbbreviations$1((_a = options.locale) === null || _a === void 0 ? void 0 : _a.abbreviations);\r\n      const abbreviationsSortedByLengthDesc = Object.keys(scale.scaleDefinition.scale).sort((a, b) => b.length - a.length);\r\n      let abbreviationScalingFactor = 1;\r\n      for (const abbreviation of abbreviationsSortedByLengthDesc) {\r\n          const scapedAbbreviationForRegex = escapeRegexString$1(abbreviation);\r\n          const regexp = new RegExp('[^a-zA-Z]'\r\n              + `(${scapedAbbreviationForRegex})|(${scapedAbbreviationForRegex.replace(/\\u200e/g, '')})`\r\n              + '(?:\\\\)(?:\\\\))?)?$');\r\n          if (stringOriginal.match(regexp)) {\r\n              abbreviationScalingFactor = scale.toBase(abbreviationScalingFactor, abbreviation);\r\n              break;\r\n          }\r\n      }\r\n      return abbreviationScalingFactor;\r\n  };\r\n  // unformats numbers separators, decimals places, signs, abbreviations\r\n  const formattedStringToNumber = (inputString, options) => {\r\n      var _a;\r\n      const locale = options.locale;\r\n      const stringOriginal = inputString;\r\n      let value;\r\n      // Replace special digits with latin digits\r\n      const stringWithLatinDigits = replaceNumeralSystemWithLatinNumbers(inputString, (_a = options.locale) === null || _a === void 0 ? void 0 : _a.numeralSystem);\r\n      if (options.zeroFormat && stringWithLatinDigits === options.zeroFormat) {\r\n          value = 0;\r\n      }\r\n      else if (options.nullFormat && stringWithLatinDigits === options.nullFormat || !stringWithLatinDigits.replace(/[^0-9]+/g, '').length) {\r\n          value = null;\r\n      }\r\n      else {\r\n          // Replaces the locale decimal delimiter with a dot (.)\r\n          const decimalDelimiterFromLocale = locale.delimiters.decimal;\r\n          const stringWithDotDecimalDelimiter = decimalDelimiterFromLocale === '.'\r\n              ? stringWithLatinDigits\r\n              : stringWithLatinDigits.replace(/\\./g, '').replace(decimalDelimiterFromLocale, '.');\r\n          // Determines the scaling factor from the abbreviations (if has abbreviations)\r\n          const abbreviationScalingFactor = getScalingFactorFromAbbreviations(stringOriginal, options);\r\n          // Check for negative number\r\n          const negativeFactor = (stringWithDotDecimalDelimiter.split('-').length\r\n              + Math.min(stringWithDotDecimalDelimiter.split('(').length - 1, stringWithDotDecimalDelimiter.split(')').length - 1)) % 2 ? 1 : -1;\r\n          // Remove non numbers\r\n          const numberAsString = stringWithDotDecimalDelimiter.replace(/[^0-9.]+/g, '');\r\n          value = negativeFactor * multiplyByPowerOfTen$1(+numberAsString, log10$1(abbreviationScalingFactor));\r\n      }\r\n      return value;\r\n  };\r\n\r\n  var formattedStringToNumber$1 = formattedStringToNumber;\n\n  const locale = {\r\n      code: 'en',\r\n      delimiters: {\r\n          thousands: ',',\r\n          decimal: '.',\r\n      },\r\n      abbreviations: '|||K|||M|||B|||T',\r\n      ordinal: number => {\r\n          const b = number % 10;\r\n          return (Math.floor(number % 100 / 10) === 1)\r\n              ? 'th'\r\n              : b === 1\r\n                  ? 'st'\r\n                  : b === 2\r\n                      ? 'nd'\r\n                      : b === 3\r\n                          ? 'rd'\r\n                          : 'th';\r\n      },\r\n  };\r\n\r\n  var locale$1 = locale;\n\n  function merge(...args) {\r\n      const newObject = {};\r\n      const argsLength = args.length;\r\n      for (let i = 0; i < argsLength; i++) {\r\n          for (const key in args[i])\r\n              newObject[key] = args[i][key];\r\n      }\r\n      return newObject;\r\n  }\n\n  var isObject = (value) => {\r\n      return typeof value === 'object' && value !== null;\r\n  };\r\n\r\n  var isObject$1 = isObject;\n\n  var isString = (value) => {\r\n      return typeof value === 'string';\r\n  };\r\n\r\n  var isString$1 = isString;\n\n  const truncateNumber = (value) => {\r\n      return value < 0 ? Math.ceil(value) : Math.floor(value);\r\n  };\r\n\r\n  var truncateNumber$1 = truncateNumber;\n\n  const getPatternParts = (patternMask) => {\r\n      let isInEscapedPart = false;\r\n      let currentEscapedWord = '';\r\n      const parts = [];\r\n      for (let i = 0; i < patternMask.length; i++) {\r\n          const char = patternMask.charAt(i);\r\n          if (char === \"'\" && !isInEscapedPart) {\r\n              isInEscapedPart = true;\r\n              currentEscapedWord = '';\r\n          }\r\n          else if (char === \"'\" && isInEscapedPart && patternMask.charAt(i - 1) !== \"\\\\\") {\r\n              isInEscapedPart = false;\r\n              parts.push({ escaped: true, value: currentEscapedWord });\r\n          }\r\n          else if (isInEscapedPart) {\r\n              currentEscapedWord += char;\r\n          }\r\n          else {\r\n              if (parts.length && !parts[parts.length - 1].escaped) {\r\n                  parts[parts.length - 1].value += char;\r\n              }\r\n              else {\r\n                  parts.push({ escaped: false, value: char });\r\n              }\r\n          }\r\n      }\r\n      return parts;\r\n  };\r\n  /**\r\n   * Checks only the pattern parts that are not escaped\r\n   */\r\n  const patternIncludes = (patternMask, search) => {\r\n      return patternRemoveEscapedText(patternMask).indexOf(search) !== -1;\r\n  };\r\n  /**\r\n   * Replaces only the pattern parts that are not escaped\r\n   */\r\n  const patternReplace = (patternMask, searchValue, replaceValue) => {\r\n      return getPatternParts(patternMask)\r\n          .map(e => e.escaped ? `'${e.value}'` : e.value.replace(searchValue, _ => replaceValue))\r\n          .join('');\r\n  };\r\n  const patternRemoveEscapedText = (patternMask) => {\r\n      return getPatternParts(patternMask)\r\n          .filter(e => !e.escaped)\r\n          .map(e => e.value)\r\n          .join('');\r\n  };\r\n  const patternStripAndNormalizeEscapedText = (patternMask) => {\r\n      return getPatternParts(patternMask)\r\n          .map(e => e.escaped ? e.value.replace(/\\\\'/g, \"'\") : e.value)\r\n          .join('');\r\n  };\n\n  const stringIncludes = (str, search) => {\r\n      return str.indexOf(search) !== -1;\r\n  };\r\n\r\n  var stringIncludes$1 = stringIncludes;\n\n  /**\r\n   * What does it look for in the pattern?\r\n   *     '(' | '+' | '-'\r\n   * What does it remove from the pattern?\r\n   *     '(' | ')' | '+' | '-'\r\n   * What options does it provide?\r\n   *     - negativeParentheses (if negative value should be wrapped between parentheses)\r\n   *     - forceSign (is positive values should have a + sign)\r\n   * How will it transform the output?\r\n   *     - Parentheses:\r\n   *         '-23.58' & '(0.00)'  =>  '(23.58)'\r\n   *         '-23.58' & '( 0.00 )'  =>  '( 23.58 )'\r\n   *         '-23.58' & '(  0.00 ) '  =>  ' (  23.58 )'\r\n   *     - Sign:\r\n   *         '12.34' & '+0.0'  =>  '+12.34'\r\n   *         '-12.34' & '+0.0'  =>  '-12.34'\r\n   *\r\n   * <i> If '+' is somewhere in the pattern, it will set the '+' sign for positive numbers\r\n   *     and same for negative numbers.\r\n   * <i> If '-' is somewhere in the pattern, it will place the negative sign in the defined position.\r\n   *     But it won't still set the sign for positive numbers.\r\n   * <i> Checks if we should use parentheses for negative number or if we should prefix with a sign.\r\n   *     If both are present we default to parentheses.\r\n   */\r\n  const signRule = (pattern) => {\r\n      const patternWithoutEscapedText = patternRemoveEscapedText(pattern);\r\n      const negativeParentheses = stringIncludes$1(patternWithoutEscapedText, '(') && stringIncludes$1(patternWithoutEscapedText, ')');\r\n      const forceSign = !negativeParentheses && stringIncludes$1(patternWithoutEscapedText, '+');\r\n      let outputPatternMask = pattern;\r\n      outputPatternMask = patternReplace(outputPatternMask, '(', `'ɵnps'`);\r\n      outputPatternMask = patternReplace(outputPatternMask, ')', `'ɵnpe'`);\r\n      outputPatternMask = patternReplace(outputPatternMask, /(-|\\+)/, `'ɵs'`);\r\n      return [outputPatternMask, { negativeParentheses, forceSign }];\r\n  };\r\n\r\n  var signRule$1 = signRule;\n\n  /**\r\n   * Checks if abbreviation is wanted\r\n   * <i> Applied only when 'a' is present.\r\n   * <i> If 'a' is followed by 'k' | 'm' | 'b' | 't', then, it will force the abbreviation to be the specified\r\n   *     unit. (e.g. (123456.78, '0,0.00am')  =>  '0.12M')\r\n   */\r\n  const abbreviationRule = (patternMask) => {\r\n      let compactUnit = null; // force abbreviation\r\n      let compact = false;\r\n      // If it includes 'a' means it should be abbreviated (only if at least includes 'a')\r\n      if (patternIncludes(patternMask, 'a')) {\r\n          compact = true;\r\n          const patternWithoutEscapedText = patternRemoveEscapedText(patternMask);\r\n          const abbreviationRegExpResult = patternWithoutEscapedText.match(/a(k|m|b|t)?/);\r\n          compactUnit = !!abbreviationRegExpResult ? abbreviationRegExpResult[1] : null;\r\n      }\r\n      let outputPatternMask = patternMask;\r\n      outputPatternMask = patternReplace(outputPatternMask, /a(k|m|b|t)?/, `'ɵa'`);\r\n      return [outputPatternMask, { compact, compactUnit, compactAuto: compact && !compactUnit }];\r\n  };\r\n\r\n  var abbreviationRule$1 = abbreviationRule;\n\n  /**\r\n   * Faster version of String.prototype.split that only handles splitting in two parts\r\n   */\r\n  const splitStringInTwoParts = (str, separator) => {\r\n      if (!str)\r\n          return ['', ''];\r\n      const indexOfSearchChar = str.indexOf(separator);\r\n      if (indexOfSearchChar === -1) {\r\n          return [str, ''];\r\n      }\r\n      else {\r\n          return [str.slice(0, indexOfSearchChar), str.slice(indexOfSearchChar + 1)];\r\n      }\r\n  };\r\n\r\n  var splitStringInTwoParts$1 = splitStringInTwoParts;\n\n  const countChars = (string, char) => {\r\n      return !string ? 0 : string.split('').filter(stringChar => stringChar === char).length;\r\n  };\r\n  /**\r\n   * Fraction digits (decimals) count rule (minimum and maximum fraction digits)\r\n   * <i> Optional fraction digits would go always after the forced ones\r\n   */\r\n  const decimalPlacesRule = (patternMask) => {\r\n      const patternWithoutEscapedText = patternRemoveEscapedText(patternMask);\r\n      const patternPrecisionPart = splitStringInTwoParts$1(patternWithoutEscapedText, '.')[1];\r\n      let minimumFractionDigits = 0;\r\n      let maximumFractionDigits = 0;\r\n      if (!!patternPrecisionPart) {\r\n          const trimmedPatternPrecisionPart = patternPrecisionPart.trim();\r\n          if (stringIncludes$1(trimmedPatternPrecisionPart, '[')) {\r\n              // If it contains optional fraction digits\r\n              const patternPrecisionPartWithoutClosingBracket = trimmedPatternPrecisionPart.replace(']', '');\r\n              // Isolates forced (left) vs optional (right) decimals\r\n              const precisionSplitted = splitStringInTwoParts$1(patternPrecisionPartWithoutClosingBracket, '[');\r\n              minimumFractionDigits = countChars(precisionSplitted[0], '0');\r\n              maximumFractionDigits = minimumFractionDigits + countChars(precisionSplitted[1], '0');\r\n          }\r\n          else if (stringIncludes$1(trimmedPatternPrecisionPart, '#')) {\r\n              // If it contains optional fraction digits marked with '#'\r\n              minimumFractionDigits = countChars(trimmedPatternPrecisionPart.split('#')[0], '0');\r\n              maximumFractionDigits = trimmedPatternPrecisionPart.length;\r\n          }\r\n          else if (stringIncludes$1(trimmedPatternPrecisionPart, 'X')) {\r\n              // If it contains no-maximum fraction digits marked with 'X'\r\n              minimumFractionDigits = countChars(trimmedPatternPrecisionPart.split('X')[0], '0');\r\n              maximumFractionDigits = 500;\r\n          }\r\n          else {\r\n              const fractionDigits = countChars(trimmedPatternPrecisionPart.split(' ')[0], '0');\r\n              minimumFractionDigits = fractionDigits;\r\n              maximumFractionDigits = fractionDigits;\r\n          }\r\n      }\r\n      return { minimumFractionDigits, maximumFractionDigits };\r\n  };\r\n\r\n  var decimalPlacesRule$1 = decimalPlacesRule;\n\n  /**\r\n   * Check for optional decimals.\r\n   *\r\n   * <i> 'optionalDecimals' This would mean that:\r\n   *     - In case the number (value) HAS decimals (e.g. 55.34), then it would display the fixed amount of defined\r\n   *       decimals (e.g. '0[.]000' => 3 fixed decimals), but, if the number is an straight integer, then it won't\r\n   *       display any decimals.\r\n   * <i> It could also accept optional decimals afterwards. So for the case '0[.]00##':\r\n   *     - If it is an integer, displays only an integer:  23 => '23'\r\n   *     - If it has 1 decimal, displays 2 decimals:       23.4 => '23.40'\r\n   *     - If it has 3 decimals, displays 3 decimals:      23.456 => '23.456'\r\n   */\r\n  const optionalDecimalPlacesRule = (patternMask) => {\r\n      let optionalFractionDigits = false;\r\n      let outputPatternMask = patternMask;\r\n      if (patternIncludes(patternMask, '[.]')) {\r\n          optionalFractionDigits = true;\r\n          outputPatternMask = patternReplace(outputPatternMask, '[.]', '.');\r\n      }\r\n      return [outputPatternMask, { optionalFractionDigits }];\r\n  };\r\n\r\n  var optionalDecimalPlacesRule$1 = optionalDecimalPlacesRule;\n\n  /**\r\n   * <i> The regExp tests for:\r\n   *     - 0.00##X\r\n   *     - 0,0.00##X\r\n   *     - #.00##X (without leading zeros)\r\n   *     - #,#.00##X (without leading zeros)\r\n   */\r\n  const numberPositionRule = (patternMask) => {\r\n      const numberPartRegExp = /((((0|#)+,)?(0|#)+(\\.([0#X]|\\[0+\\])+)?){1})/;\r\n      return patternReplace(patternMask, numberPartRegExp, `'ɵn'`);\r\n  };\r\n  /**\r\n   * Minimum leading integer digits rule\r\n   * This will define the minimum amount of digits on the integer part (left-most grouped zeroes).\r\n   *     - (12.34, '0000.0') =>  '0012.3'\r\n   *     - (12.34, '0000,0.0')  =>  '0,012.3'\r\n   *     - (0.34, '#.0') => '.3'\r\n   *     - (1.34, '#.0') => '1.3'\r\n   *\r\n   * <i> It always pick the left-most amount of zeros, so:\r\n   *     - If pattern has NO thousands separator ('000.0'), then the amount at the left of the DOT is used.\r\n   *     - If pattern HAS thousands separator ('00,0.0'), then the amount at the left of the COMMA is used.\r\n   * <i> This will remove the integer zero for numbers between 1 and -1 (e.g. 0.23 or -0.5)\r\n   *     - If pattern integer part is option (0.24, '#.00') => '.24'\r\n   */\r\n  const minimumIntegerDigitsRule = (patternMask) => {\r\n      const patternMaskWithoutEscapedText = patternRemoveEscapedText(patternMask);\r\n      const patternMaskIntegerPart = patternMaskWithoutEscapedText.split('.')[0].split(',')[0];\r\n      // If it has '#' in the integer part, sets the minimumIntegerDigits to 0\r\n      if (/#/g.test(patternMaskIntegerPart)) {\r\n          return 0;\r\n      }\r\n      return (patternMaskIntegerPart.match(/0/g) || []).length;\r\n  };\r\n  // If sign is not included, put sign at the left of the number\r\n  const addSignPositionIfItDoesNotExists = (patternMask) => {\r\n      if (stringIncludes$1(patternMask, `'ɵs'`) || stringIncludes$1(patternMask, `'ɵnps'`))\r\n          return patternMask;\r\n      return patternMask.replace(`'ɵn'`, _ => `'ɵs''ɵn'`);\r\n  };\r\n  const baseParsePattern = (inputPattern) => {\r\n      const resolvedInputPattern = isString$1(inputPattern) && inputPattern || '0,0.##########';\r\n      const [patternMaskAfterSignRule, signRules] = signRule$1(resolvedInputPattern);\r\n      const [patternMaskAfterAbbreviationRule, abbreviationRules] = abbreviationRule$1(patternMaskAfterSignRule);\r\n      const [patternMaskAfterOptionalDecimalPlacesRule, optionalDecimalPlacesRules] = optionalDecimalPlacesRule$1(patternMaskAfterAbbreviationRule);\r\n      const outputPatternMask = patternMaskAfterOptionalDecimalPlacesRule;\r\n      const outputPatternMaskWithoutEscapedText = patternRemoveEscapedText(outputPatternMask);\r\n      const decimalPlacesRules = decimalPlacesRule$1(outputPatternMask);\r\n      const minimumIntegerDigits = minimumIntegerDigitsRule(outputPatternMask);\r\n      const grouping = outputPatternMaskWithoutEscapedText.indexOf(',') > -1;\r\n      const patternMaskAfterHandlingNumberPosition = numberPositionRule(outputPatternMask);\r\n      const patternMaskWithEnsuredSignPosition = addSignPositionIfItDoesNotExists(patternMaskAfterHandlingNumberPosition);\r\n      const patternMask = patternMaskWithEnsuredSignPosition;\r\n      return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, signRules), abbreviationRules), optionalDecimalPlacesRules), decimalPlacesRules), { grouping,\r\n          minimumIntegerDigits,\r\n          patternMask });\r\n  };\r\n  const parsePattern = memoize$1(baseParsePattern);\r\n\r\n  var parsePattern$1 = parsePattern;\n\n  /**\r\n   * <i> Checks if value is negative, and removes the sign in case it exists\r\n   * Expects: a value as string, with or without the minus sign, AND NOTHING ELSE.\r\n   * Returns: same as the input but without the minus sign in case it had.\r\n   */\r\n  const removeSignIfExists = (valueAsString) => {\r\n      return valueAsString[0] === '-' ? valueAsString.slice(1) : valueAsString;\r\n  };\r\n\r\n  var removeSignIfExists$1 = removeSignIfExists;\n\n  /**\r\n   * This process only is applied for automatic abbreviation ('a'), and only in the rounding\r\n   * bubbling cases where the scale has to be recomputed.\r\n   * E.g.\r\n   *     formatNumber(999960, 0.0a') // Would return '1000.0k' instead of '1.0m' without this rescaling-fix\r\n   *\r\n   * It only applies rescaling if the absolute value of 'the already scaled and rounded value' (1.87, 'k') is greater or\r\n   * equal to 1000, and the abbreviation is not greater or equal to trillion.\r\n   *\r\n   * <i> After initial scaling, value shouldn't be greater than 1000, unless it is a trillion.\r\n   * <i> The resulting decimal part, will be always 0, as this will be executed only on the corner cases,\r\n   *     that results from rounding bubbling. This is why decimal part is ignored.\r\n   */\r\n  const rescaleRoundedValue = (value, currentAbbreviationScale, patternRules, options) => {\r\n      const { compact, compactAuto } = patternRules;\r\n      const { abbreviations } = options.locale;\r\n      if (!compact || !compactAuto) {\r\n          return [value, currentAbbreviationScale];\r\n      }\r\n      const scale = createUnitScaleFromLocaleAbbreviations$1(abbreviations);\r\n      const [newScaledValue, newScaledValueUnit] = scale.toBest(value, currentAbbreviationScale || '');\r\n      return [newScaledValue, newScaledValueUnit];\r\n  };\r\n\r\n  var rescaleRoundedValue$1 = rescaleRoundedValue;\n\n  /**\r\n   * If abbreviation is forced, looks for the closest (in terms of power of ten) abbreviation in the current locale\r\n   *     k === 10 ** 3\r\n   *     m === 10 ** 6\r\n   *     b === 10 ** 9\r\n   *     t === 10 ** 12\r\n   */\r\n  const resolveForcedAbbreviationUnit = (forcedAbbreviationUnit, abbreviationsFromLocale, value) => {\r\n      // Record<AbbreviationSymbol, PowerOfTenExponent>\r\n      const forcedScaleMap = { k: 3, m: 6, b: 9, t: 12 };\r\n      const targetPowerOfTenExponent = forcedScaleMap[forcedAbbreviationUnit];\r\n      const scaleDefinitionFromLocale = (abbreviationsFromLocale === null || abbreviationsFromLocale === void 0 ? void 0 : abbreviationsFromLocale.split('|')) || [];\r\n      let closestPowerOfTenWithAvailableAbbreviation = null;\r\n      for (let distanceFromTarget = 0; distanceFromTarget < scaleDefinitionFromLocale.length; distanceFromTarget++) {\r\n          if (!scaleDefinitionFromLocale[targetPowerOfTenExponent - distanceFromTarget])\r\n              continue;\r\n          closestPowerOfTenWithAvailableAbbreviation = targetPowerOfTenExponent - distanceFromTarget;\r\n          break;\r\n      }\r\n      if (closestPowerOfTenWithAvailableAbbreviation === null) {\r\n          return [value, null];\r\n      }\r\n      return [\r\n          multiplyByPowerOfTen$1(value, -closestPowerOfTenWithAvailableAbbreviation),\r\n          scaleDefinitionFromLocale[closestPowerOfTenWithAvailableAbbreviation],\r\n      ];\r\n  };\r\n  const scaleValueWithAbbreviation = (value, patternRules, options) => {\r\n      const { compact, compactUnit } = patternRules;\r\n      const { abbreviations } = options.locale;\r\n      if (!compact)\r\n          return [value, null];\r\n      if (!!compactUnit) {\r\n          return resolveForcedAbbreviationUnit(compactUnit, abbreviations, value);\r\n      }\r\n      /**\r\n       * If abbreviation is automatic, resolves the abbreviation to the best (where the value has\r\n       * the fewest numbers before the decimal point, but is still higher than 1).\r\n       */\r\n      const scale = createUnitScaleFromLocaleAbbreviations$1(abbreviations);\r\n      const [scaledValue, localizedUnit] = scale.toBest(value, '');\r\n      return [scaledValue, localizedUnit || null];\r\n  };\r\n\r\n  var scaleValueWithAbbreviation$1 = scaleValueWithAbbreviation;\n\n  const roundNumber = (number, precision, roundingFunction) => {\r\n      const resolvedPrecision = precision || 0;\r\n      const resolvedRoundingFunction = roundingFunction || Math.round;\r\n      const scaledValueForRounding = multiplyByPowerOfTen$1(number, resolvedPrecision);\r\n      const roundedScaledValue = resolvedRoundingFunction(scaledValueForRounding);\r\n      const roundedValue = multiplyByPowerOfTen$1(roundedScaledValue, -resolvedPrecision);\r\n      return roundedValue;\r\n  };\r\n\r\n  var roundNumber$1 = roundNumber;\n\n  /**\r\n   * The result from toFixed can contain an exponent for big numbers (e.g. 1.12345671234567e+50).\r\n   * <!> Only handles positive exponents.\r\n   */\r\n  const formatPositiveExponentResult = (valueAsString) => {\r\n      const [significand, exponent] = splitStringInTwoParts$1(valueAsString, 'e');\r\n      const exponentAsNumber = +exponent;\r\n      if (exponentAsNumber < 0)\r\n          return valueAsString;\r\n      const [integerPartOfSignificand, fractionalPartOfSignificand] = splitStringInTwoParts$1(significand, '.');\r\n      const numberOfZerosToAdd = exponentAsNumber - fractionalPartOfSignificand.length;\r\n      return `${integerPartOfSignificand}${fractionalPartOfSignificand}${stringRepeat$1('0', numberOfZerosToAdd)}`;\r\n  };\r\n  /**\r\n   * The result from toFixed can contain an exponent for small numbers (e.g. 1.123e-87).\r\n   * <i> Only handles negative exponents\r\n   */\r\n  const formatNegativeExponentResult = (value, exponentAsNumber, significandAsString) => {\r\n      const negativeExponentAbsoluteValue = Math.abs(exponentAsNumber);\r\n      const [integerPartOfSignificand, fractionalPartOfSignificand] = splitStringInTwoParts$1(significandAsString, '.');\r\n      const absoluteIntegerPartOfSignificand = integerPartOfSignificand[0] === '-' ? integerPartOfSignificand.slice(1) : integerPartOfSignificand;\r\n      let outputIntegerPartOfSignificand = absoluteIntegerPartOfSignificand;\r\n      let outputFractionalPartOfSignificand = fractionalPartOfSignificand;\r\n      for (let i = 0; i < negativeExponentAbsoluteValue; i += 1) {\r\n          // Consider using array.shift\r\n          const firstCharInIntegerPart = outputIntegerPartOfSignificand[0] || '';\r\n          outputIntegerPartOfSignificand = outputIntegerPartOfSignificand.slice(0, outputIntegerPartOfSignificand.length - 1);\r\n          outputFractionalPartOfSignificand = (firstCharInIntegerPart || '0') + outputFractionalPartOfSignificand;\r\n      }\r\n      return `${value < 0 ? '-' : ''}${outputIntegerPartOfSignificand || 0}.${outputFractionalPartOfSignificand}`;\r\n  };\r\n  /**\r\n   * Like Number.prototype.toString() but excluding the exponential info for small and big numbers.\r\n   * e.g.\r\n   *     Small numbers:\r\n   *         value: 0.0000000000001234 (1.234e-13)\r\n   *         toString() => \"1.234e-13\"\r\n   *         numberToStringWithoutExponent() => \"0.0000000000001234\"\r\n   *     Big numbers:\r\n   *         value: 1234123412341230000000 (1.234123412341234e+21)\r\n   *         toString() => \"1.234123412341234e+21\"\r\n   *         numberToStringWithoutExponent() => \"1234123412341230000000\"\r\n   */\r\n  const numberToNonExponentialString = (value) => {\r\n      const valueAsString = (value || 0).toString();\r\n      const valueAsStringHasExponentialInfo = valueAsString.indexOf('e') >= 0;\r\n      if (!valueAsStringHasExponentialInfo)\r\n          return valueAsString;\r\n      // If the toString returns an exponential number (e.g. 1.23e+28)\r\n      const [significand, exponent] = splitStringInTwoParts$1(valueAsString, 'e');\r\n      const exponentAsNumber = +exponent;\r\n      return exponentAsNumber >= 0\r\n          ? formatPositiveExponentResult(valueAsString)\r\n          : formatNegativeExponentResult(value, exponentAsNumber, significand);\r\n  };\r\n\r\n  var numberToNonExponentialString$1 = numberToNonExponentialString;\n\n  const addTrailingZerosInFractionalPart = (valueAsString, minimumFractionDigits) => {\r\n      const [integerPart, fractionalPart] = splitStringInTwoParts$1(valueAsString, '.');\r\n      return `${integerPart}.${fractionalPart + stringRepeat$1('0', minimumFractionDigits - fractionalPart.length)}`;\r\n  };\r\n  /**\r\n   * Implementation of Number.prototype.toFixed() that treats floats more like decimals\r\n   *\r\n   * Fixes binary rounding issues (eg. (0.615).toFixed(2) === '0.61') that present\r\n   * problems for accounting- and finance-related software.\r\n   *\r\n   * <!> This function should only receive a finite number, never NaN, Infinity or -Infinity\r\n   * <i> This function should return always a JS string representation of a number, but without exponent.\r\n   * <i> optionalFractionDigits means: from the fractionDigits amount, the ones that are optional.\r\n   */\r\n  const numberToFixed = (finiteNumber, fractionDigits, roundingFunction, optionalFractionDigits) => {\r\n      const valueAsString = numberToNonExponentialString$1(finiteNumber);\r\n      const minimumFractionDigits = fractionDigits - (optionalFractionDigits || 0);\r\n      const fractionalPartOfValueAsString = splitStringInTwoParts$1(valueAsString, '.')[1];\r\n      const targetFractionDigitsAmount = !!fractionalPartOfValueAsString\r\n          ? Math.min(Math.max(fractionalPartOfValueAsString.length, minimumFractionDigits), fractionDigits)\r\n          : minimumFractionDigits;\r\n      const roundedValue = roundNumber$1(finiteNumber, targetFractionDigitsAmount, roundingFunction);\r\n      let output = numberToNonExponentialString$1(roundedValue);\r\n      // Add trailing zeros if needed\r\n      if (!!minimumFractionDigits) {\r\n          output = addTrailingZerosInFractionalPart(output, minimumFractionDigits);\r\n      }\r\n      return output;\r\n  };\r\n\r\n  var numberToFixed$1 = numberToFixed;\n\n  const roundValueAndAddTrailingZeros = (value, patternRules, options) => {\r\n      const { rounding } = options;\r\n      const { minimumFractionDigits, maximumFractionDigits } = patternRules;\r\n      const resolvedRoundingFunction = rounding || Math.round;\r\n      const shouldIncludeDecimalPlaces = minimumFractionDigits > 0 || maximumFractionDigits > 0;\r\n      if (shouldIncludeDecimalPlaces) {\r\n          const optionalDecimalDigitsCount = maximumFractionDigits - minimumFractionDigits;\r\n          return numberToFixed$1(value, maximumFractionDigits, resolvedRoundingFunction, optionalDecimalDigitsCount);\r\n      }\r\n      else {\r\n          return numberToFixed$1(value, 0, resolvedRoundingFunction);\r\n      }\r\n  };\r\n\r\n  var roundValueAndAddTrailingZeros$1 = roundValueAndAddTrailingZeros;\n\n  const replaceDigitsWithNumeralSystem = (numericString, numeralSystemMap) => {\r\n      if (!numeralSystemMap || numeralSystemMap.length !== 10)\r\n          return numericString;\r\n      const numericStringLength = numericString.length;\r\n      let output = '';\r\n      for (let numericStringIndex = 0; numericStringIndex < numericStringLength; numericStringIndex++) {\r\n          const char = numericString[numericStringIndex];\r\n          output += numeralSystemMap[char] || char;\r\n      }\r\n      return output;\r\n  };\r\n\r\n  var replaceDigitsWithNumeralSystem$1 = replaceDigitsWithNumeralSystem;\n\n  /**\r\n   * <i> Add or remove leading zeros\r\n   * Expects: a value integer part as string, without the minus sign. And nothing else but a number at the start.\r\n   * Returns:\r\n   *     - The value with the added or removed leading zeros\r\n   */\r\n  const addOrRemoveLeadingZerosToValue = (valueIntegerPartWithoutSign, patternRules) => {\r\n      const { minimumIntegerDigits } = patternRules;\r\n      if (minimumIntegerDigits === 0 && +valueIntegerPartWithoutSign < 1 && +valueIntegerPartWithoutSign > -1) {\r\n          return '';\r\n      }\r\n      return valueIntegerPartWithoutSign.length >= minimumIntegerDigits\r\n          ? valueIntegerPartWithoutSign\r\n          : `${stringRepeat$1('0', minimumIntegerDigits - valueIntegerPartWithoutSign.length)}${valueIntegerPartWithoutSign}`;\r\n  };\r\n\r\n  var addOrRemoveLeadingZerosToValue$1 = addOrRemoveLeadingZerosToValue;\n\n  const addSignInfoToFullFormattedNumber = (fullFormattedValueWithoutSign, isValueNegative, isValueZero, patternRules) => {\r\n      const { negativeParentheses, forceSign } = patternRules;\r\n      let output = fullFormattedValueWithoutSign;\r\n      if (negativeParentheses && isValueNegative) {\r\n          output = output.replace(/'ɵ(nps|npe)'/g, match => match === `'ɵnps'` ? '(' : ')');\r\n      }\r\n      else if (forceSign) {\r\n          output = output.replace(`'ɵs'`, isValueNegative ? '-' : isValueZero ? '' : '+');\r\n      }\r\n      else if (isValueNegative) {\r\n          output = output.replace(`'ɵs'`, '-');\r\n      }\r\n      return output;\r\n  };\r\n\r\n  var addSignInfoToFullFormattedNumber$1 = addSignInfoToFullFormattedNumber;\n\n  /**\r\n   * Splits the given number (as string) in the integer and decimal parts.\r\n   * Returns:\r\n   *     [integerPart: string, decimalPart: string]\r\n   * <i> The integer part can potentially contain the number sign (-) if it wasn't removed previously.\r\n   * <i> It should always return [string, string]\r\n   */\r\n  const splitNumberIntegerAndDecimalParts = (valueAsString, patternRules) => {\r\n      const { optionalFractionDigits } = patternRules;\r\n      const [integerPart, decimalPart] = splitStringInTwoParts$1(valueAsString, '.');\r\n      // Checks whether optionalDecimalPlaces [.] is enabled and the value is an integer (no decimals)\r\n      if (optionalFractionDigits && Number(decimalPart) === 0) {\r\n          return [integerPart, ''];\r\n      }\r\n      return [integerPart, decimalPart];\r\n  };\r\n\r\n  var splitNumberIntegerAndDecimalParts$1 = splitNumberIntegerAndDecimalParts;\n\n  const addThousandsSeparatorToValueIntegerPart = (valueIntegerPartWithLeadingZerosAndWithoutSign, patternRules, options) => {\r\n      const { delimiters, digitGroupingStyle } = options.locale;\r\n      const { grouping } = patternRules;\r\n      if (!grouping || !delimiters.thousands) {\r\n          return valueIntegerPartWithLeadingZerosAndWithoutSign;\r\n      }\r\n      const valueAsString = valueIntegerPartWithLeadingZerosAndWithoutSign;\r\n      const thousandsSeparator = delimiters.thousands;\r\n      const digitGrouping = !!(digitGroupingStyle === null || digitGroupingStyle === void 0 ? void 0 : digitGroupingStyle.length) ? digitGroupingStyle : [3];\r\n      const restDigitGrouping = [...digitGrouping];\r\n      let output = '';\r\n      let groupingSubIteration = 1;\r\n      for (let i = valueAsString.length - 1; i >= 0; i--) {\r\n          if (groupingSubIteration === restDigitGrouping[0] && i !== 0) {\r\n              output = thousandsSeparator + valueAsString[i] + output;\r\n              if (restDigitGrouping.length > 1)\r\n                  restDigitGrouping.shift();\r\n              groupingSubIteration = 1;\r\n          }\r\n          else {\r\n              output = valueAsString[i] + output;\r\n              groupingSubIteration += 1;\r\n          }\r\n      }\r\n      return output;\r\n  };\r\n\r\n  var addThousandsSeparatorToValueIntegerPart$1 = addThousandsSeparatorToValueIntegerPart;\n\n  /**\r\n   * Applies the localized abbreviation unit to the pattern mask\r\n   * <i> If the localized unit is empty (''), it will remove the space between the number and the abbreviation.\r\n   * <i> Replaces the single quotes from the abbreviation, to prevent collision with patternMask escaped text.\r\n   */\r\n  const applyAbbreviationLocalizedUnitToPatternMask = (patternMask, abbreviationLocalizedUnit, hasAbbreviationInPatternMask) => {\r\n      if (!hasAbbreviationInPatternMask)\r\n          return patternMask;\r\n      if (abbreviationLocalizedUnit) {\r\n          /**\r\n           * If it has abbreviation in the rules, and has a valid unit (e.g. K | M | B | T, or\r\n           * other localized one), escapes the single quotes in the localized abbreviation unit and appends to the mask.\r\n           */\r\n          return patternMask.replace(`'ɵa'`, _ => `'${abbreviationLocalizedUnit.replace(/'/g, _ => \"\\\\'\")}'`);\r\n      }\r\n      else {\r\n          // If it has abbreviation in the rules, but it has no unit, removes the space between abbreviation and number\r\n          return patternMask.match(/'ɵn'\\s*'ɵa'/)\r\n              // If abbreviation is before\r\n              ? patternMask.replace(/\\s*'ɵa'/, '')\r\n              // If abbreviation is after\r\n              : patternMask.replace(/'ɵa'\\s*/, '');\r\n      }\r\n  };\r\n\r\n  var applyAbbreviationLocalizedUnitToPatternMask$1 = applyAbbreviationLocalizedUnitToPatternMask;\n\n  const scaleAndRoundValue = (number, patternRules, options) => {\r\n      // If it doesn't have abbreviation, just round the value and add trailing zeros\r\n      if (!patternRules.compact) {\r\n          const roundedValueAsString = roundValueAndAddTrailingZeros$1(number, patternRules, options);\r\n          return [roundedValueAsString, null];\r\n      }\r\n      // If it has abbreviation, scales the value\r\n      const [scaledValue, scaledValueLocalizedUnit] = scaleValueWithAbbreviation$1(number, patternRules, options);\r\n      const roundedScaledValue = +roundValueAndAddTrailingZeros$1(scaledValue, patternRules, options);\r\n      const [rescaledValue, rescaledValueLocalizedUnit] = rescaleRoundedValue$1(+roundedScaledValue, scaledValueLocalizedUnit, patternRules, options);\r\n      const roundedRescaledValueAsStringWithTrailingZeros = roundValueAndAddTrailingZeros$1(rescaledValue, patternRules, options);\r\n      return [roundedRescaledValueAsStringWithTrailingZeros, rescaledValueLocalizedUnit];\r\n  };\r\n  const numberToFormattedNumber = (number, pattern, options) => {\r\n      var _a;\r\n      const patternRules = parsePattern$1(pattern);\r\n      // Ensure always uses a number or default number\r\n      const resolvedValue = isFiniteNumber$1(number) ? number : 0;\r\n      const [valueAsString, localizedAbbreviationUnit] = scaleAndRoundValue(resolvedValue, patternRules, options);\r\n      // Prevents potentially wrong formatting coming from this function\r\n      if (valueAsString === 'NaN')\r\n          return '';\r\n      const isValueNegative = options.signedZero ? number < 0 : +valueAsString < 0;\r\n      const isValueZero = options.signedZero ? number === 0 : +valueAsString === 0;\r\n      const valueAsStringWithoutSign = removeSignIfExists$1(valueAsString);\r\n      const [integerPart, decimalPart] = splitNumberIntegerAndDecimalParts$1(valueAsStringWithoutSign, patternRules);\r\n      const valueIntegerPartWithLeadingZeros = addOrRemoveLeadingZerosToValue$1(integerPart, patternRules);\r\n      const valueIntegerPartWithThousandsSeparator = addThousandsSeparatorToValueIntegerPart$1(valueIntegerPartWithLeadingZeros, patternRules, options);\r\n      const numeralSystemFromLocale = options.locale.numeralSystem;\r\n      const integerPartWithNumeralSystem = replaceDigitsWithNumeralSystem$1(valueIntegerPartWithThousandsSeparator, numeralSystemFromLocale);\r\n      const decimalPartWithNumeralSystem = replaceDigitsWithNumeralSystem$1(decimalPart, numeralSystemFromLocale);\r\n      const fullNumberWithNumeralSystem = (integerPartWithNumeralSystem\r\n          + (!!decimalPartWithNumeralSystem ? (((_a = options.locale.delimiters) === null || _a === void 0 ? void 0 : _a.decimal) || '.') + decimalPartWithNumeralSystem : ''));\r\n      // Assembling\r\n      const patternMaskWithAbbreviation = applyAbbreviationLocalizedUnitToPatternMask$1(patternRules.patternMask, localizedAbbreviationUnit, patternRules.compact);\r\n      const patternMaskWithNumber = patternMaskWithAbbreviation.replace(`'ɵn'`, _ => `'${fullNumberWithNumeralSystem.replace(/'/g, \"\\\\'\")}'`);\r\n      const patternMaskWithSignInfo = addSignInfoToFullFormattedNumber$1(patternMaskWithNumber, isValueNegative, isValueZero, patternRules);\r\n      const cleanPatternMask = patternMaskWithSignInfo.replace(/'ɵ(nps|npe|s|a|n)'/g, '');\r\n      const fullFormattedValueWithNormalizedText = patternStripAndNormalizeEscapedText(cleanPatternMask);\r\n      return fullFormattedValueWithNormalizedText;\r\n  };\r\n\r\n  var numberToFormattedNumber$1 = numberToFormattedNumber;\n\n  /**\r\n   * Basis point format (BPS)\r\n   * <i> See https://en.wikipedia.org/wiki/Basis_point\r\n   */\r\n  const bpsFormatter = {\r\n      name: 'bps',\r\n      regexps: {\r\n          format: /BPS/,\r\n          unformat: /BPS/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const scaledValue = multiplyByPowerOfTen$1(number, 4);\r\n          const patternWithEscapedBPS = patternReplace(pattern, /BPS/, `'ɵBPSɵ'`);\r\n          const formatResult = numberToFormattedNumber$1(scaledValue, patternWithEscapedBPS, options);\r\n          return formatResult.replace('ɵBPSɵ', 'BPS');\r\n      },\r\n      unformat: (string, options) => {\r\n          const number = formattedStringToNumber$1(string.replace(/\\s?BPS/, ''), options);\r\n          return isFiniteNumber$1(number) ? multiplyByPowerOfTen$1(number, -4) : number;\r\n      },\r\n  };\r\n\r\n  var bpsFormatter$1 = bpsFormatter;\n\n  const timeFormatter = {\r\n      name: 'time',\r\n      regexps: {\r\n          format: /([0-9]{1,2}:[0-9]{2}) *$/,\r\n          unformat: /([0-9]{1,2}:[0-9]{2}) *$/,\r\n      },\r\n      format: (number) => {\r\n          const absoluteValue = Math.abs(number);\r\n          const sign = number < 0 ? '-' : '';\r\n          const hours = truncateNumber$1(absoluteValue / 3600);\r\n          const minutes = truncateNumber$1((absoluteValue - (hours * 3600)) / 60);\r\n          const seconds = truncateNumber$1(absoluteValue - (hours * 3600) - (minutes * 60));\r\n          return `${sign}${hours}:${(minutes < 10 ? '0' : '') + minutes}:${(seconds < 10 ? '0' : '') + seconds}`;\r\n      },\r\n      unformat: (string) => {\r\n          const isNegative = /^ *-/.test(string);\r\n          const stringWithoutSign = string.replace(/^ *-/, '');\r\n          const timeArray = stringWithoutSign.split(':').reverse();\r\n          let seconds = 0;\r\n          seconds += +timeArray[0];\r\n          seconds += +timeArray[1] * 60;\r\n          seconds += (+timeArray[2] || 0) * 3600;\r\n          return isNegative && seconds !== 0 ? -seconds : seconds;\r\n      },\r\n  };\r\n\r\n  var timeFormatter$1 = timeFormatter;\n\n  const decimalSuffixes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\r\n  const binarySuffixes = ['B', 'KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'];\r\n  const allSuffixes = decimalSuffixes.concat(binarySuffixes.slice(1));\r\n  /** Avoid collision with BPS format @see formats|bps.ts */\r\n  const unformatRegex = `(${allSuffixes.join('|').replace(/B/g, 'B(?!PS)')})`;\r\n  const bytesDecimalScale = unitScale({ base: 'B', scale: toObject$1(decimalSuffixes, (unit, unitIndex) => [unit, Math.pow(1000, unitIndex)]) });\r\n  const bytesBinaryScale = unitScale({ base: 'B', scale: toObject$1(binarySuffixes, (unit, unitIndex) => [unit, Math.pow(1024, unitIndex)]) });\r\n  const bytesFormatter = {\r\n      name: 'bytes',\r\n      regexps: {\r\n          format: /([0\\s]b[bd])|(b[bd][0\\s])/,\r\n          unformat: (string, options) => options.type === 'bytes' ? new RegExp(unformatRegex).test(string) : false,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const scale = patternIncludes(pattern, 'bb') ? bytesBinaryScale : bytesDecimalScale;\r\n          const [scaledValue, scaledValueUnit] = scale.toBest(number, 'B');\r\n          const patternWithEscapedBytes = patternReplace(pattern, /b[bd]/, `'ɵbytesɵ'`);\r\n          const formatResult = numberToFormattedNumber$1(scaledValue, patternWithEscapedBytes, options);\r\n          return formatResult.replace('ɵbytesɵ', scaledValueUnit || '');\r\n      },\r\n      unformat: (string, options) => {\r\n          var _a;\r\n          const number = formattedStringToNumber$1(string.replace(new RegExp(unformatRegex), ''), options);\r\n          const suffix = ((_a = string.match(unformatRegex)) === null || _a === void 0 ? void 0 : _a[0]) || '';\r\n          const scale = !!bytesBinaryScale.scaleDefinition.scale[suffix] ? bytesBinaryScale : bytesDecimalScale;\r\n          return number ? scale.toBase(number, suffix) : number;\r\n      }\r\n  };\r\n\r\n  var bytesFormatter$1 = bytesFormatter;\n\n  const ordinalFormatter = {\r\n      name: 'ordinal',\r\n      regexps: {\r\n          format: /o/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          var _a, _b;\r\n          const localizedOrdinal = ((_b = (_a = options.locale).ordinal) === null || _b === void 0 ? void 0 : _b.call(_a, number)) || '';\r\n          const patternWithEscapedOrdinal = patternReplace(pattern, /o/, `'ɵordɵ'`);\r\n          const formatResult = numberToFormattedNumber$1(number, patternWithEscapedOrdinal, options);\r\n          return formatResult.replace('ɵordɵ', _ => localizedOrdinal);\r\n      }\r\n  };\r\n\r\n  var ordinalFormatter$1 = ordinalFormatter;\n\n  const currencySymbolsMap = {\r\n      EUR: '€',\r\n      USD: '$',\r\n      XCD: 'EC$',\r\n      AUD: 'A$',\r\n      INR: '₹',\r\n      BRL: 'R$',\r\n      CAD: 'CA$',\r\n      XAF: 'FCFA',\r\n      CNY: 'CN¥',\r\n      NZD: 'NZ$',\r\n      XPF: 'CFPF',\r\n      GBP: '£',\r\n      HKD: 'HK$',\r\n      ILS: '₪',\r\n      JPY: '¥',\r\n      KRW: '₩',\r\n      XOF: 'CFA',\r\n      MXN: 'MX$',\r\n      TWD: 'NT$',\r\n      VND: '₫',\r\n  };\r\n  const currencyFormatter = {\r\n      name: 'currency',\r\n      regexps: {\r\n          format: /(\\$)/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          var _a;\r\n          const currencyFromOptions = (_a = options.currency) === null || _a === void 0 ? void 0 : _a.toUpperCase();\r\n          const localizedCurrencySymbol = currencySymbolsMap[currencyFromOptions] || currencyFromOptions || '';\r\n          const patternWithEscapedCurrencySymbol = patternReplace(pattern, /\\$/, `'ɵcurrencyɵ'`);\r\n          const formatResult = numberToFormattedNumber$1(number, patternWithEscapedCurrencySymbol, options);\r\n          return formatResult.replace('ɵcurrencyɵ', _ => localizedCurrencySymbol);\r\n      },\r\n  };\r\n\r\n  var currencyFormatter$1 = currencyFormatter;\n\n  const percentageFormatter = {\r\n      name: 'percentage',\r\n      regexps: {\r\n          format: /%!?/,\r\n          unformat: /%/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const hasNotScalePercentageSymbolInPattern = patternIncludes(pattern, '%!');\r\n          const scaledValue = options.scalePercentage && !hasNotScalePercentageSymbolInPattern ? multiplyByPowerOfTen$1(number, 2) : number;\r\n          const patternWithEscapedPercentage = patternReplace(pattern, /%!?/, `'ɵ%ɵ'`);\r\n          const formatResult = numberToFormattedNumber$1(scaledValue, patternWithEscapedPercentage, options);\r\n          return formatResult.replace('ɵ%ɵ', '%');\r\n      },\r\n      unformat: (string, options) => {\r\n          const number = formattedStringToNumber$1(string.replace(/\\s?%/, ''), options);\r\n          return number && options.scalePercentage ? multiplyByPowerOfTen$1(number, -2) : number;\r\n      },\r\n  };\r\n\r\n  var percentageFormatter$1 = percentageFormatter;\n\n  const exponentialFormatter = {\r\n      name: 'exponential',\r\n      regexps: {\r\n          format: /[eE][+-][0-9]+/,\r\n          unformat: /[eE][+-][0-9]+/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const exponential = typeof number === 'number' && !isNaNNumber$1(number) ? number.toExponential() : '0e+0';\r\n          const parts = splitStringInTwoParts$1(exponential, 'e');\r\n          const patternWithoutExponential = patternReplace(pattern, /e[+|-]{1}0/i, '');\r\n          const formatResult = numberToFormattedNumber$1(+parts[0], patternWithoutExponential, options);\r\n          return formatResult + 'e' + parts[1];\r\n      },\r\n      unformat: (string, options) => {\r\n          var _a;\r\n          const value = formattedStringToNumber$1(string.replace(/e[+-]{1}[0-9]{1,3}/i, ''), options);\r\n          const powerOfTenExponent = +(((_a = string.match(/e([+-]{1}[0-9]{1,3})/i)) === null || _a === void 0 ? void 0 : _a[1]) || '0');\r\n          return isFiniteNumber$1(value) ? multiplyByPowerOfTen$1(value, powerOfTenExponent) : value;\r\n      },\r\n  };\r\n\r\n  var exponentialFormatter$1 = exponentialFormatter;\n\n  const BUILT_IN_FORMATTERS = [\r\n      percentageFormatter$1,\r\n      currencyFormatter$1,\r\n      ordinalFormatter$1,\r\n      timeFormatter$1,\r\n      bytesFormatter$1,\r\n      exponentialFormatter$1,\r\n      bpsFormatter$1,\r\n  ];\r\n\r\n  var BUILT_IN_FORMATTERS$1 = BUILT_IN_FORMATTERS;\n\n  const roundHalfAwayFromZero = (value) => {\r\n      return value >= 0\r\n          ? Math.round(value)\r\n          : (value % 0.5 === 0) ? Math.floor(value) : Math.round(value);\r\n  };\r\n\r\n  var roundHalfAwayFromZero$1 = roundHalfAwayFromZero;\n\n  const areDelimitersValid = (delimiters) => {\r\n      return !!(delimiters === null || delimiters === void 0 ? void 0 : delimiters.decimal)\r\n          && isString$1(delimiters === null || delimiters === void 0 ? void 0 : delimiters.thousands)\r\n          && delimiters.decimal !== delimiters.thousands;\r\n  };\r\n  const resolveOptionsLocale = (optionsLocale) => {\r\n      const defaultLocale = locale$1;\r\n      if (!isObject$1(optionsLocale))\r\n          return defaultLocale;\r\n      return merge(optionsLocale, {\r\n          delimiters: areDelimitersValid(optionsLocale.delimiters) ? optionsLocale.delimiters : defaultLocale.delimiters,\r\n          abbreviations: optionsLocale.abbreviations || defaultLocale.abbreviations,\r\n          ordinal: optionsLocale.ordinal || defaultLocale.ordinal,\r\n      });\r\n  };\r\n  const resolveRoundingOption = (roundingOption) => {\r\n      switch (roundingOption) {\r\n          case 'ceil': return Math.ceil;\r\n          case 'floor': return Math.floor;\r\n          case 'truncate': return truncateNumber$1;\r\n          case 'half-up': return Math.round;\r\n          case 'half-away-from-zero': return roundHalfAwayFromZero$1;\r\n          default: return isFunction$1(roundingOption) ? roundingOption : roundHalfAwayFromZero$1;\r\n      }\r\n  };\r\n  const resolveOptionsFormatters = (optionsFormatters) => {\r\n      if (!optionsFormatters)\r\n          return BUILT_IN_FORMATTERS$1;\r\n      return isFunction$1(optionsFormatters)\r\n          ? optionsFormatters(BUILT_IN_FORMATTERS$1)\r\n          : [...optionsFormatters, ...BUILT_IN_FORMATTERS$1];\r\n  };\r\n  const resolveFormatOptions = (formatOptions) => {\r\n      var _a, _b, _c;\r\n      const options = formatOptions || {};\r\n      const resolvedRoundingFunction = resolveRoundingOption(options.rounding);\r\n      const resolvedLocale = resolveOptionsLocale(options.locale);\r\n      const resolvedFormatters = resolveOptionsFormatters(options.formatters);\r\n      return {\r\n          defaultPattern: options.defaultPattern || '0,0.##########',\r\n          nullFormat: options.nullFormat || '',\r\n          nanFormat: options.nanFormat,\r\n          zeroFormat: options.zeroFormat,\r\n          locale: resolvedLocale,\r\n          rounding: resolvedRoundingFunction,\r\n          type: options.type,\r\n          scalePercentage: (_a = options.scalePercentage) !== null && _a !== void 0 ? _a : true,\r\n          trim: (_b = options.trim) !== null && _b !== void 0 ? _b : true,\r\n          formatters: resolvedFormatters,\r\n          currency: options.currency,\r\n          signedZero: !!options.signedZero,\r\n          nonBreakingSpace: (_c = options.nonBreakingSpace) !== null && _c !== void 0 ? _c : false,\r\n      };\r\n  };\r\n\r\n  var resolveFormatOptions$1 = resolveFormatOptions;\n\n  const getUnformatFunctionIfMatch = (input, resolvedOptions) => {\r\n      for (const formatter of resolvedOptions.formatters) {\r\n          const matcher = formatter.regexps.unformat;\r\n          if (!matcher)\r\n              continue;\r\n          const matcherResult = isFunction$1(matcher) ? matcher(input, resolvedOptions) : !!input.match(matcher);\r\n          if (matcherResult)\r\n              return formatter.unformat;\r\n      }\r\n  };\r\n  const parse$2 = (input, options) => {\r\n      const resolvedOptions = resolveFormatOptions$1(options);\r\n      let value;\r\n      if (isNil$1(input) || isNaNNumber$1(input)) {\r\n          value = null;\r\n      }\r\n      else if (typeof input === 'number') {\r\n          // Handles negative zero\r\n          value = input === 0 ? 0 : input;\r\n      }\r\n      else if (typeof input === 'string') {\r\n          if (resolvedOptions.zeroFormat && input === resolvedOptions.zeroFormat) {\r\n              value = 0;\r\n          }\r\n          else if (resolvedOptions.nullFormat && input === resolvedOptions.nullFormat) {\r\n              value = null;\r\n          }\r\n          else {\r\n              // Removes non-breaking spaces if they exists\r\n              const inputStringWithNormalSpaces = input.replace(/\\u00A0/, ' ');\r\n              const unformatFunctionFromFormatters = getUnformatFunctionIfMatch(inputStringWithNormalSpaces, resolvedOptions);\r\n              const unformatFunction = unformatFunctionFromFormatters || formattedStringToNumber$1;\r\n              value = unformatFunction(inputStringWithNormalSpaces, resolvedOptions);\r\n          }\r\n      }\r\n      else {\r\n          const result = +input;\r\n          value = result === 0 ? result : (result || null);\r\n      }\r\n      return value;\r\n  };\r\n\r\n  var parse$1$1 = parse$2;\n\n  /**\r\n   * @example\r\n   * ```javascript\r\n   * parse('1,250.48')\r\n   * //=> 1250.48\r\n   * parse('10 %')\r\n   * //=> 0.1\r\n   * parse('1 000,582', { locale: fr })\r\n   * //=> 1000.582\r\n   * ```\r\n   * Parse the given numeric-string applying the provided options.\r\n   *\r\n   * options:\r\n   * ```typescript\r\n   * {\r\n   * nullFormat?: string;\r\n   * nanFormat?: string;\r\n   * zeroFormat?: string;\r\n   * defaultPattern?: string;\r\n   * rounding?: 'truncate' | 'ceil' | 'floor' | 'round' | ((scaledValueForRounding: number) => number);\r\n   * locale?: NumerableLocale;\r\n   * type?: string;\r\n   * scalePercentage?: boolean;\r\n   * formatters?: NumerableFormatter[] | ((builtInFormatters: NumerableFormatter[]) => NumerableFormatter[]);\r\n   * }\r\n   * ```\r\n   *\r\n   * @param string string: The numeric-string to parse (e.g. **'10 %'**)\r\n   * @param options options: The options used to parse the numeric-string\r\n   * ```typescript\r\n   * {\r\n   * nullFormat?: string;\r\n   * nanFormat?: string;\r\n   * zeroFormat?: string;\r\n   * defaultPattern?: string;\r\n   * rounding?: 'truncate' | 'ceil' | 'floor' | 'round' | ((scaledValueForRounding: number) => number);\r\n   * locale?: NumerableLocale;\r\n   * type?: string;\r\n   * scalePercentage?: boolean;\r\n   * formatters?: NumerableFormatter[] | ((builtInFormatters: NumerableFormatter[]) => NumerableFormatter[]);\r\n   * }\r\n   * ```\r\n   */\r\n  const parse = (string, options) => {\r\n      return parse$1$1(string, options);\r\n  };\r\n\r\n  var parse$1 = parse;\n\n  /**\r\n   * @example\r\n   * ```javascript\r\n   * round(12.687, 2)\r\n   * //=> 12.69\r\n   * round(12.687)\r\n   * //=> 13\r\n   * round(12.687, 2, Math.floor)\r\n   * //=> 12.68\r\n   * ```\r\n   * Rounds the given number to the specified amount of decimal places.\r\n   *\r\n   * - The **default precision** is 0.\r\n   * - The **default roundingFunction** is Math.round.\r\n   *\r\n   * @param number number: The number to round (e.g. **10.23**)\r\n   * @param precision precision: The desired amount of decimal places (e.g. **2**)\r\n   * @param roundingFunction roundingFunction: The function applied for rounding (e.g. **Math.floor**)\r\n   * */\r\n  const round = (number, precision, roundingFunction) => {\r\n      return roundNumber$1(number, precision, roundingFunction);\r\n  };\r\n\r\n  var round$1 = round;\n\n  const getFormatFunctionIfMatch = (pattern, resolvedOptions) => {\r\n      const patternWithoutEscapedText = patternRemoveEscapedText(pattern);\r\n      for (const formatter of resolvedOptions.formatters) {\r\n          const matcher = formatter.regexps.format;\r\n          if (!matcher)\r\n              continue;\r\n          const matcherResult = isFunction$1(matcher) ? matcher(pattern, resolvedOptions) : !!patternWithoutEscapedText.match(matcher);\r\n          if (matcherResult)\r\n              return formatter.format;\r\n      }\r\n  };\r\n  const format$1 = (value, pattern, options) => {\r\n      var _a;\r\n      try {\r\n          const resolvedValue = isString$1(value) ? parseFloat(value) : value;\r\n          const resolvedOptions = resolveFormatOptions$1(options);\r\n          const resolvedPattern = pattern || resolvedOptions.defaultPattern;\r\n          let output;\r\n          if (resolvedValue === Infinity || resolvedValue === -Infinity) {\r\n              output = resolvedValue > 0 ? '∞' : '-∞';\r\n          }\r\n          else if (isNaNNumber$1(resolvedValue)) {\r\n              return isString$1(resolvedOptions.nanFormat)\r\n                  ? resolvedOptions.nanFormat\r\n                  : (isString$1(resolvedOptions.nullFormat) ? resolvedOptions.nullFormat : '');\r\n          }\r\n          else if (isNil$1(resolvedValue)) {\r\n              output = isString$1(resolvedOptions.nullFormat) ? resolvedOptions.nullFormat : '';\r\n          }\r\n          else if (resolvedValue === 0 && isString$1(resolvedOptions.zeroFormat)) {\r\n              output = resolvedOptions.zeroFormat;\r\n          }\r\n          else {\r\n              // <!> Here value should always be a number\r\n              const resolvedValueAsNumber = resolvedValue || 0;\r\n              const formatFunctionFromFormatters = getFormatFunctionIfMatch(resolvedPattern, resolvedOptions);\r\n              const resolvedFormatFunction = formatFunctionFromFormatters || numberToFormattedNumber$1;\r\n              output = resolvedFormatFunction(resolvedValueAsNumber, resolvedPattern, resolvedOptions);\r\n          }\r\n          // Ensures that it always returns an string\r\n          output = isString$1(output) ? output : '';\r\n          // Replaces spaces with non-breaking spaces if needed\r\n          output = resolvedOptions.nonBreakingSpace\r\n              ? output.replace(/ /g, _ => '\\u00A0')\r\n              : output;\r\n          // Trims the output if needed\r\n          output = resolvedOptions.trim ? output.trim() : output;\r\n          return output;\r\n      }\r\n      catch (_error) {\r\n          return ((_a = options) === null || _a === void 0 ? void 0 : _a._errorFormat) || '';\r\n      }\r\n  };\r\n\r\n  var format$1$1 = format$1;\n\n  function format(number, arg2, arg3) {\r\n      const pattern = isString$1(arg2) ? arg2 : null;\r\n      const options = isObject$1(arg2) ? arg2 : (isObject$1(arg3) ? arg3 : {});\r\n      return format$1$1(number, pattern, options);\r\n  }\r\n  const createFormatFunction = (options) => {\r\n      const baseOptions = merge(options, {\r\n          locale: isFunction$1(options.locale) ? options.locale() : options.locale,\r\n      });\r\n      return ((value, arg2, arg3) => {\r\n          const pattern = isString$1(arg2) ? arg2 : null;\r\n          const optionsFromArguments = isObject$1(arg2) ? arg2 : (isObject$1(arg3) ? arg3 : {});\r\n          return format$1$1(value, pattern, merge(baseOptions, optionsFromArguments));\r\n      });\r\n  };\r\n  format.withOptions = createFormatFunction;\n\n  const unique = (arr) => {\r\n      if (!arr)\r\n          return [];\r\n      return arr.filter((value, index, self) => self.indexOf(value) === index);\r\n  };\r\n\r\n  var unique$1 = unique;\n\n  // <i> Extracted from https://stackoverflow.com/questions/12006095/javascript-how-to-check-if-character-is-rtl\r\n  const leftToRightMark = '\\u200e';\r\n  const rtlCharsRanges = '\\u0591-\\u07FF\\u200F\\u202B\\u202E\\uFB1D-\\uFDFD\\uFE70-\\uFEFC';\r\n  const rtlDirCheck = new RegExp('^[^' + rtlCharsRanges + ']*?[' + rtlCharsRanges + ']');\r\n  const isRTL = (string) => rtlDirCheck.test(string);\r\n  const appendLeftToRightMarkIfIsRTL = (string) => isRTL(string) ? string + leftToRightMark : string;\r\n  // const languagesWith4DigitsGroupingStyle = ['zh', 'yue', 'ko', 'ja'];\r\n  const languagesWith4DigitsGroupingStyle = []; //***\r\n  const toLocaleStringSupportsOptions = () => {\r\n      return typeof Intl === 'object' && !!Intl && typeof Intl.NumberFormat === 'function';\r\n  };\r\n  const getNumeralSystemDigits = (languageTag) => {\r\n      try {\r\n          const localizedNumber = (1234567890).toLocaleString(languageTag, { useGrouping: false });\r\n          const lookupObject = {};\r\n          const repeatedChar = localizedNumber.split('').find((char) => {\r\n              if (lookupObject[char])\r\n                  return true;\r\n              lookupObject[char] = true;\r\n          });\r\n          const digitsWithoutGroupingDelimiters = repeatedChar\r\n              ? localizedNumber.replace(new RegExp(escapeRegexString$1(repeatedChar || ''), 'g'), '')\r\n              : localizedNumber;\r\n          const digitsAsArray = digitsWithoutGroupingDelimiters.split('');\r\n          const sortedDigits = [digitsAsArray[digitsAsArray.length - 1], ...digitsAsArray.slice(0, -1)];\r\n          return sortedDigits.join('');\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const getGroupingAndFractionDelimiters = (languageTag, digits) => {\r\n      try {\r\n          const localizedNumber = (12345678.123).toLocaleString(languageTag);\r\n          const localizedNumberWithoutDigits = localizedNumber.replace(new RegExp(`[${escapeRegexString$1(digits)}]`, 'g'), '');\r\n          const [groupingDelimiter = ',', fractionDelimiter = '.'] = unique$1(localizedNumberWithoutDigits.split(''));\r\n          return [groupingDelimiter, fractionDelimiter];\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const getGroupingStyle = (languageTag, groupingDelimiter) => {\r\n      // <i> Handle '4 digits' grouping style for some asian countries (not CLDR)\r\n      if (languagesWith4DigitsGroupingStyle.some(language => languageTag.indexOf(language) === 0))\r\n          return [4];\r\n      try {\r\n          const result = [];\r\n          let subIterationIndex = 0;\r\n          (100000000000).toLocaleString(languageTag).split('').reverse().forEach((digitOrGroupingDelimiter) => {\r\n              if (digitOrGroupingDelimiter === groupingDelimiter) {\r\n                  result.push(subIterationIndex);\r\n                  subIterationIndex = 0;\r\n              }\r\n              else {\r\n                  subIterationIndex += 1;\r\n              }\r\n          });\r\n          let resultIndex = result.length;\r\n          while (resultIndex--) {\r\n              if (result[resultIndex] === result[resultIndex - 1])\r\n                  result.pop();\r\n              else\r\n                  break;\r\n          }\r\n          return result;\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const getAbbreviations = (languageTag, digits, type) => {\r\n      try {\r\n          if (!toLocaleStringSupportsOptions())\r\n              return null;\r\n          const intlFormatOptions = { notation: 'compact', useGrouping: false, compactDisplay: type };\r\n          const [digitOfZero, digitOfOne, digitOfTwo] = digits.split('');\r\n          let abbreviations = '';\r\n          for (let i = 1; i < 50; i++) {\r\n              const abbreviationResultForOne = (+(1 + stringRepeat$1('0', i))).toLocaleString(languageTag, intlFormatOptions);\r\n              if (new RegExp(`^${digitOfOne}[^${digitOfZero}]+$`).test(abbreviationResultForOne)) {\r\n                  if (type === 'long') {\r\n                      const abbreviationResultForTwo = (+(2 + stringRepeat$1('0', i))).toLocaleString(languageTag, intlFormatOptions);\r\n                      const abbreviationOne = abbreviationResultForOne.replace(new RegExp(`${digitOfOne}`, 'g'), '').trim();\r\n                      const abbreviationTwo = abbreviationResultForTwo.replace(new RegExp(`${digitOfTwo}`, 'g'), '').trim();\r\n                      abbreviations += '|' + appendLeftToRightMarkIfIsRTL(abbreviationOne) + ':::' + appendLeftToRightMarkIfIsRTL(abbreviationTwo);\r\n                  }\r\n                  else {\r\n                      const abbreviation = abbreviationResultForOne.replace(new RegExp(`${digitOfOne}`, 'g'), '').trim();\r\n                      abbreviations += '|' + appendLeftToRightMarkIfIsRTL(abbreviation);\r\n                  }\r\n              }\r\n              else {\r\n                  abbreviations += '|';\r\n              }\r\n          }\r\n          // Remove trailing pipes '|'\r\n          let result = abbreviations;\r\n          let resultIndex = result.length;\r\n          while (resultIndex--) {\r\n              if (result[resultIndex] === '|')\r\n                  result = result.slice(0, -1);\r\n              else\r\n                  break;\r\n          }\r\n          return result;\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const baseGetLocaleFromPlatform = (languageTag) => {\r\n      const resolvedLanguageTag = languageTag || 'en';\r\n      const digits = getNumeralSystemDigits(resolvedLanguageTag);\r\n      const resolvedDigits = digits || '0123456789';\r\n      const delimiters = getGroupingAndFractionDelimiters(resolvedLanguageTag, resolvedDigits);\r\n      const [groupingDelimiter, fractionDelimiter] = !!delimiters && delimiters.length >= 2 ? delimiters : [',', '.'];\r\n      const groupingStyle = getGroupingStyle(resolvedLanguageTag, groupingDelimiter);\r\n      const shortAbbreviations = getAbbreviations(resolvedLanguageTag, resolvedDigits, 'short');\r\n      const longAbbreviations = getAbbreviations(resolvedLanguageTag, resolvedDigits, 'long');\r\n      return {\r\n          _abbreviationsLong: longAbbreviations || locale$1.abbreviations,\r\n          code: resolvedLanguageTag,\r\n          delimiters: { thousands: groupingDelimiter, decimal: fractionDelimiter },\r\n          abbreviations: shortAbbreviations || locale$1.abbreviations,\r\n          digitGroupingStyle: !!(groupingStyle === null || groupingStyle === void 0 ? void 0 : groupingStyle.length) ? groupingStyle : undefined,\r\n          numeralSystem: digits !== '0123456789' ? digits === null || digits === void 0 ? void 0 : digits.split('').map(appendLeftToRightMarkIfIsRTL) : undefined,\r\n          ordinal: locale$1.ordinal,\r\n      };\r\n  };\r\n  const getLocaleFromPlatform$2 = memoize$1(baseGetLocaleFromPlatform);\r\n\r\n  var getLocaleFromPlatform$1$1 = getLocaleFromPlatform$2;\n\n  /**\r\n   * Given a language tag (e.g. '**zh**' | '**es**' | '**fr**' | '**en-IN**' | '**zh-Hans**'), returns a NumerableLocale\r\n   * object extracted from the platform Intl.NumberFormat behavior.\r\n   *\r\n   * This locale object can be used in the numerable functions that support i18n (*format* and *parse*).\r\n   * Example:\r\n   * ```javascript\r\n   * format(12345, '0,0.00', { locale: getLocaleFromPlatform('fr') })\r\n   * ```\r\n   *\r\n   * <i> Take into account that the returned locale is not complete, and some features like\r\n   *     'ordinal formatting' won't work. Use this feature only for simple applications that don't require\r\n   *     full support from numeral, and don't target legacy browsers.\r\n   */\r\n  const getLocaleFromPlatform = (languageTag) => {\r\n      return getLocaleFromPlatform$1$1(languageTag);\r\n  };\r\n\r\n  var getLocaleFromPlatform$1 = getLocaleFromPlatform;\n\n  var numerable = {\n    __proto__: null,\n    parse: parse$1,\n    round: round$1,\n    format: format,\n    getLocaleFromPlatform: getLocaleFromPlatform$1\n  };\n\n  Object.assign(ew__default[\"default\"], numerable);\n\n})(ew, jQuery, luxon);\n"]}